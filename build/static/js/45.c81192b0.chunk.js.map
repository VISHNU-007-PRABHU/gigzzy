{"version":3,"sources":["component/Admin/Roles/AdminUsers.js"],"names":["AdminUsers","props","handleTableChange","pagination","a","pager","current","setState","loading","client","query","GET_ADMIN_USER","variables","limit","pageSize","page","fetchPolicy","then","result","state","total","data","get_admin_users","pageInfo","totalDocs","dataSource","fetch_user","visible","role","handleDelete","_id","mutate","mutation","DELETE_ADMIN_USER","error","Alert_msg","delete_admin_user","status","onFilter","value","console","log","target","datas","$or","$regex","$options","SEARCH_ADMIN","admin_search","search_user","simple","this","columns","title","width","render","text","record","name","className","style","wordBreak","email","color","admin_role_detail","msg","dataIndex","RoleViewFunction","length","permission","onClick","history","push","type","theme","twoToneColor","onConfirm","size","placeholder","onKeyUp","event","id","rowClassName","onChange","React","Component","withRouter"],"mappings":"gRASMA,E,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAgBVC,kBAjBmB,uCAiBC,WAAMC,GAAN,eAAAC,EAAA,6DACVC,EADU,eACGF,IACbG,QAAUH,EAAWG,QAC3B,EAAKC,SAAS,CAAEC,SAAS,IAHT,SAKVC,IAAOC,MAAM,CACfA,MAAOC,IACPC,UAAW,CAAEC,MAAOR,EAAMS,SAAUC,KAAMV,EAAMC,SAChDU,YAAa,aACdC,MAAK,SAAAC,GACJ,IAAMf,EAAU,eAAQ,EAAKgB,MAAMhB,YACnCA,EAAWiB,MAAQF,EAAOG,KAAKC,gBAAgBC,SAASC,UACxDrB,EAAWG,QAAUY,EAAOG,KAAKC,gBAAgBC,SAASR,KAC1D,EAAKR,SAAS,CAAEJ,aAAYK,SAAS,EAAOiB,WAAYP,EAAOG,KAAKC,gBAAgBD,UAbxE,2CAjBD,wDAkCnBK,WAlCmB,uCAkCN,WAAOC,GAAP,SAAAvB,EAAA,6DACT,EAAKG,SAAS,CAAEC,SAAS,IADhB,SAGHC,IAAOC,MAAM,CACfA,MAAOC,IACPC,UAAW,CAAEC,MAAO,EAAKM,MAAMhB,WAAWW,SAAUC,KAAM,EAAKI,MAAMhB,WAAWG,QAASsB,KAAM,KAC/FZ,YAAa,aACdC,MAAK,SAAAC,GACJ,IAAMf,EAAU,eAAQ,EAAKgB,MAAMhB,YACnCA,EAAWiB,MAAQF,EAAOG,KAAKC,gBAAgBC,SAASC,UACxD,EAAKjB,SAAS,CAAEC,SAAS,EAAOL,aAAYsB,WAAYP,EAAOG,KAAKC,gBAAgBD,UAV/E,2CAlCM,wDAgDnBQ,aAhDmB,uCAgDJ,WAAOC,GAAP,SAAA1B,EAAA,sEACLK,IAAOsB,OAAO,CAChBC,SAAUC,IACVrB,UAAW,CAAEkB,IAAKA,KACnBb,MAAK,SAACC,EAAQV,EAAS0B,GACtBC,YAAUjB,EAAOG,KAAKe,mBACuB,YAAzClB,EAAOG,KAAKe,kBAAkBC,QAC9B,EAAKX,gBAPF,2CAhDI,wDA4DnBY,SA5DmB,uCA4DR,WAAOC,GAAP,eAAAnC,EAAA,6DACPoC,QAAQC,IAAIF,EAAMG,OAAOH,OACrBI,EAAQ,CACRC,IAAK,CAAC,CAAE,KAAQ,CAAEC,OAAQ,KAAON,EAAMG,OAAOH,MAAQ,KAAMO,SAAU,MACtE,CAAE,MAAS,CAAED,OAAQ,KAAON,EAAMG,OAAOH,MAAQ,KAAMO,SAAU,QAJ9D,SAMDrC,IAAOC,MAAM,CACfA,MAAOqC,IACPnC,UAAW,CAAES,KAAMsB,GACnB3B,YAAa,aACdC,MAAK,SAAAC,GAAW,IAAD,EACd,EAAKX,SAAS,CAAEkB,WAAU,OAAEP,QAAF,IAAEA,GAAF,UAAEA,EAAQG,YAAV,aAAE,EAAc2B,kBAXvC,2CA5DQ,sDAEf,EAAK7B,MAAQ,CACTM,WAAY,GACZwB,YAAa,GACbzC,SAAS,EACTL,WAAY,CACRW,SAAU,GACVR,QAAS,EACTc,MAAO,EACP8B,QAAQ,IAVD,E,qDAcnB,WACIC,KAAKzB,e,oBA4DT,WAAU,IAAD,OACGD,EAAe0B,KAAKhC,MAApBM,WAEF2B,EAAU,CACZ,CACIC,MAAO,OACPC,MAAO,MACPC,OAAQ,SAACC,EAAMC,GACX,OAAO,0BAAMJ,MAAM,QAAQI,EAAOC,QAI1C,CACIL,MAAO,WACH,OAAO,6BACH,yBAAKM,UAAU,WACX,yCAMZL,MAAO,MACPC,OAAQ,SAACC,EAAMC,GACX,OAAO,0BAAMJ,MAAM,QAAQO,MAAO,CAAEC,UAAW,aAAeJ,EAAOK,SAI7E,CACIT,MAAO,WACH,OAAO,6BACH,yBAAKM,UAAU,WACX,yCAMZL,MAAO,MACPC,OAAQ,SAACC,EAAMC,GAAY,IAAD,IACtB,OAAO,0BAAMJ,MAAM,QAAQO,MAAO,CAAEC,UAAW,aAC1CJ,EAAM,MACH,kBAAC,IAAD,CAAKM,MAAM,UAAX,OAAqBN,QAArB,IAAqBA,GAArB,UAAqBA,EAAQO,yBAA7B,aAAqB,EAA2BN,MADnD,OACiED,QADjE,IACiEA,GADjE,UACiEA,EAAQO,yBADzE,aACiE,EAA2BC,OAKzG,CACIZ,MAAO,SACPa,UAAW,YACXP,UAAWQ,YAAiB,eAAiBA,YAAiB,gBAAkB,GAAK,SACrFZ,OAAQ,SAACC,EAAMC,GAAP,OACJ,EAAKtC,MAAMM,WAAW2C,QAAU,EAC5B,0BAAMf,MAAM,OAAOM,UAAU,6CACzB,kBAAC,IAAD,CAAUU,WAAW,cACjB,0BAAMV,UAAU,eAAeW,QAAS,WAAQ,EAAKrE,MAAMsE,QAAQC,KAAnB,2BAA4Cf,EAAO3B,QAAW,kBAAC,IAAD,CAAM2C,KAAK,OAAOC,MAAM,UAAUC,aAAa,UAAUhB,UAAU,gBAErL,kBAAC,IAAD,CAAUU,WAAW,gBACjB,kBAAC,IAAD,CAAYhB,MAAM,6BAA6BuB,UAAW,kBAAM,EAAK/C,aAAa4B,EAAO3B,OACrF,kBAAC,IAAD,CAAM2C,KAAK,SAASC,MAAM,UAAUC,aAAa,UAAUhB,UAAU,YAIjF,QAKhB,OACI,6BACI,yBAAKA,UAAU,qBACX,kBAAC,IAAD,CAAQkB,KAAK,QAAQC,YAAY,SAASC,QAAS,SAACC,GAAY,EAAK1C,SAAS0C,IAAUxE,SAAS,KAErG,yBAAKyE,GAAG,kBACJ,kBAAC,IAAD,CACIC,aAAc,iBAAM,gBACpBvB,UAAU,eACVlC,WAAYA,EACZ2B,QAASA,EACTyB,KAAK,SACL1E,WAAYgD,KAAKhC,MAAMhB,WACvBgF,SAAUhC,KAAKjD,kBACfM,QAAS2C,KAAKhC,MAAMX,gB,GA9JnB4E,IAAMC,WAsKhBC,+BAAWtF","file":"static/js/45.c81192b0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { GET_ADMIN_USER, SEARCH_ADMIN, DELETE_ADMIN_USER } from '../../../graphql/Admin/roles';\r\nimport { client } from \"../../../apollo\";\r\nimport { Table, Icon, Popconfirm } from 'antd';\r\nimport Tag from 'antd/es/tag';\r\nimport Search from \"antd/es/input/Search\";\r\nimport { Alert_msg } from '../../Comman/alert_msg';\r\nimport RoleView, { RoleViewFunction } from '../../Comman/roles_permission_view'\r\nclass AdminUsers extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dataSource: [],\r\n            search_user: [],\r\n            loading: false,\r\n            pagination: {\r\n                pageSize: 10,\r\n                current: 1,\r\n                total: 0,\r\n                simple: true,\r\n            }\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.fetch_user();\r\n    }\r\n    handleTableChange = async pagination => {\r\n        const pager = { ...pagination };\r\n        pager.current = pagination.current;\r\n        this.setState({ loading: true });\r\n\r\n        await client.query({\r\n            query: GET_ADMIN_USER,\r\n            variables: { limit: pager.pageSize, page: pager.current },\r\n            fetchPolicy: 'no-cache',\r\n        }).then(result => {\r\n            const pagination = { ...this.state.pagination };\r\n            pagination.total = result.data.get_admin_users.pageInfo.totalDocs;\r\n            pagination.current = result.data.get_admin_users.pageInfo.page;\r\n            this.setState({ pagination, loading: false, dataSource: result.data.get_admin_users.data });\r\n        });\r\n    };\r\n\r\n    fetch_user = async (visible) => {\r\n        this.setState({ loading: true });\r\n\r\n        await client.query({\r\n            query: GET_ADMIN_USER,\r\n            variables: { limit: this.state.pagination.pageSize, page: this.state.pagination.current, role: \"1\" },\r\n            fetchPolicy: 'no-cache',\r\n        }).then(result => {\r\n            const pagination = { ...this.state.pagination };\r\n            pagination.total = result.data.get_admin_users.pageInfo.totalDocs;\r\n            this.setState({ loading: false, pagination, dataSource: result.data.get_admin_users.data });\r\n        });\r\n    }\r\n\r\n    handleDelete = async (_id) => {\r\n        await client.mutate({\r\n            mutation: DELETE_ADMIN_USER,\r\n            variables: { _id: _id },\r\n        }).then((result, loading, error) => {\r\n            Alert_msg(result.data.delete_admin_user);\r\n            if (result.data.delete_admin_user.status === 'success') {\r\n                this.fetch_user();\r\n            }\r\n        });\r\n    }\r\n\r\n    onFilter = async (value) => {\r\n        console.log(value.target.value);\r\n        var datas = {\r\n            $or: [{ 'name': { $regex: '.*' + value.target.value + '.*', $options: 'i' } },\r\n            { 'email': { $regex: '.*' + value.target.value + '.*', $options: 'i' } }]\r\n        }\r\n        await client.query({\r\n            query: SEARCH_ADMIN,\r\n            variables: { data: datas },\r\n            fetchPolicy: 'no-cache',\r\n        }).then(result => {\r\n            this.setState({ dataSource: result?.data?.admin_search });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { dataSource } = this.state;\r\n\r\n        const columns = [\r\n            {\r\n                title: \"Name\",\r\n                width: '20%',\r\n                render: (text, record) => {\r\n                    return <span title=\"Name\">{record.name}</span>;\r\n                }\r\n\r\n            },\r\n            {\r\n                title: () => {\r\n                    return <div>\r\n                        <div className=\"d-block\">\r\n                            <div>\r\n                                Email\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                },\r\n                width: '20%',\r\n                render: (text, record) => {\r\n                    return <span title=\"Email\" style={{ wordBreak: \"keep-all\" }}>{record.email}</span>;\r\n                }\r\n\r\n            },\r\n            {\r\n                title: () => {\r\n                    return <div>\r\n                        <div className=\"d-block\">\r\n                            <div>\r\n                                Roles\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                },\r\n                width: '20%',\r\n                render: (text, record) => {\r\n                    return <span title=\"Email\" style={{ wordBreak: \"keep-all\" }}>\r\n                        {record['roles'] ?\r\n                            <Tag color=\"purple\">{record?.admin_role_detail?.name}</Tag> : record?.admin_role_detail?.msg}\r\n                    </span>;\r\n                }\r\n\r\n            },\r\n            {\r\n                title: \"Action\",\r\n                dataIndex: 'operation',\r\n                className: RoleViewFunction('edit_admin') || RoleViewFunction('delete_admin') ? '' : 'd-none',\r\n                render: (text, record) =>\r\n                    this.state.dataSource.length >= 1 ? (\r\n                        <span title=\"....\" className=\"d-inline d-md-flex justify-content-around\">\r\n                            <RoleView permission=\"edit_admin\">\r\n                                <span className='cursor_point' onClick={() => { this.props.history.push(`/admin-admin/add/${record._id}`); }}><Icon type=\"edit\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='mx-3 f_25' /></span>\r\n                            </RoleView>\r\n                            <RoleView permission=\"delete_admin\">\r\n                                <Popconfirm title=\"Sure to delete the admin ?\" onConfirm={() => this.handleDelete(record._id)}>\r\n                                    <Icon type=\"delete\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='f_25' />\r\n                                </Popconfirm>\r\n                            </RoleView>\r\n                        </span>\r\n                    ) : null,\r\n            },\r\n        ];\r\n\r\n\r\n        return (\r\n            <div>\r\n                <div className='mx-2 mx-sm-0 mb-3'>\r\n                    <Search size=\"large\" placeholder=\"search\" onKeyUp={(event) => { this.onFilter(event) }} loading={false} />\r\n                </div>\r\n                <div id=\"no-more-tables\">\r\n                    <Table\r\n                        rowClassName={() => 'editable-row'}\r\n                        className='table_shadow'\r\n                        dataSource={dataSource}\r\n                        columns={columns}\r\n                        size=\"middle\"\r\n                        pagination={this.state.pagination}\r\n                        onChange={this.handleTableChange}\r\n                        loading={this.state.loading}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(AdminUsers);"],"sourceRoot":""}