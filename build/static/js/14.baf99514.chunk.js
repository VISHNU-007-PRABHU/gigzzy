(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1933:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},1943:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(1),r=n(2),c=n(963),o=n(23),i=n(90);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e){return function(){var t,n=d(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=d(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,t)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(d,a["Component"]);var t,n,r,s=f(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(e=s.apply(this,arguments)).renderSteps=function(t){var n=t.getPrefixCls,r=n("steps",e.props.prefixCls),i=n("",e.props.iconPrefix),s={finish:a.createElement(o.a,{type:"check",className:"".concat(r,"-finish-icon")}),error:a.createElement(o.a,{type:"close",className:"".concat(r,"-error-icon")})};return a.createElement(c.default,l({icons:s},e.props,{prefixCls:r,iconPrefix:i}))},e}return t=d,(n=[{key:"render",value:function(){return a.createElement(i.a,null,this.renderSteps)}}])&&u(t.prototype,n),r&&u(t,r),d}();p.Step=c.default.Step,p.defaultProps={current:0},p.propTypes={prefixCls:r.string,iconPrefix:r.string,current:r.number}},1971:function(e,t,n){"use strict";n.r(t);var a,r,c=n(148),o=n(3),i=n.n(o),s=n(5),l=n(53),u=n(1),f=n.n(u),d=n(1943),m=n(451),p=n(1923),_=n(194),b=n(77),g=n(23),y=n(20),O=n(146),v=n(18),j=n(19),A=n.n(j),h=A()(a||(a=Object(v.a)(["\n    mutation UPDATECONTRACT($_id:ID,$contract_data:JSON){\n        update_contract(_id:$_id,contract_data:$contract_data){\n            msg\n            status\n            _id\n        }\n    }\n"]))),E=A()(r||(r=Object(v.a)(["\n    query GETCONTRACT($contract_id:ID){\n        get_contracts(contract_id:$contract_id){\n            name\n            description\n            current_page\n            address_id\n            budget\n            timeline\n            timeline_type\n            terms_condition\n            get_contract_files(contract_id:$contract_id) {\n                _id\n                images{\n                    small_image\n                    large_image\n                    image_tag\n                }\n            }\n        }\n    }\n"]))),w=n(830),S=n(347),k=n.n(S),N=n(1933),x=n.n(N),P=n(161),C=n(266),I=n(348),R=n.n(I),T=n(108),F=n.n(T),D=d.a.Step,z=[{id:1,title:"First",content:"Project Details",status:"wait"},{id:2,title:"Second",content:"Project Location",status:"wait"},{id:3,title:"Last",content:"Budget",status:"wait"},{id:4,title:"final",content:"Document",status:"wait"}],J={offset:8,span:16},X=f.a.lazy(function(){return n.e(26).then(n.bind(null,1967))}),B=f.a.lazy(function(){return n.e(25).then(n.bind(null,1968))}),Q=f.a.lazy(function(){return n.e(27).then(n.bind(null,1969))});t.default=p.a.create()(function(e){var t=e.form,n=k()(),a=n.history,r=n.match,o=Object(u.useState)(!1),v=Object(l.a)(o,2),j=v[0],A=v[1],S=Object(u.useState)(""),N=Object(l.a)(S,2),I=N[0],T=N[1],q=Object(u.useState)(0),$=Object(l.a)(q,2),L=$[0],Y=$[1],G=Object(u.useState)(""),M=Object(l.a)(G,2),U=(M[0],M[1],Object(u.useState)("")),K=Object(l.a)(U,2),W=K[0],V=K[1],Z=Object(u.useState)({}),H=Object(l.a)(Z,2),ee=H[0],te=H[1],ne=Object(u.useState)(z),ae=Object(l.a)(ne,2),re=ae[0],ce=ae[1],oe=Object(O.a)(h),ie=Object(l.a)(oe,2),se=ie[0],le=(ie[1].loading,Object(O.b)(E));return Object(u.useEffect)(Object(s.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("user")&&V(JSON.parse(localStorage.getItem("user"))._id),!localStorage.getItem("current_contract_id")){e.next=7;break}return e.next=4,le.refetch({contract_id:localStorage.getItem("current_contract_id")});case 4:n=e.sent,te(n.data.get_contracts[0]),T(null===(t=n.data.get_contracts[0])||void 0===t?void 0:t.address_id);case 7:case"end":return e.stop()}},e)})),[localStorage.getItem("current_contract_id")]),f.a.createElement(f.a.Fragment,null,f.a.createElement(d.a,{size:"large",className:"contract_steper",labelPlacement:"vertical",current:L},re&&re.map(function(e){return f.a.createElement(D,{key:e.title,status:e.status,icon:f.a.createElement("img",{src:x.a}),title:e.content})})),f.a.createElement("div",{className:"d-flex justify-content-center pt-5"},f.a.createElement(p.a,Object.assign({},J,{name:"nest-messages",className:"w-50"}),f.a.createElement(u.Suspense,{fallback:f.a.createElement(_.a,{active:!0})},f.a.createElement("div",{className:3===L?"":"d-none"},f.a.createElement(Q,{contract_detail_data:ee,current:L,customform:t})),f.a.createElement("div",{className:2===L?"":"d-none"},f.a.createElement(B,{contract_detail_data:ee,current:L,customform:t})),f.a.createElement("div",{className:0===L?"":"d-none"},f.a.createElement(X,{contract_detail_data:ee,current:L,customform:t})),f.a.createElement("div",{className:1===L?"":"d-none"},f.a.createElement(P.b.Provider,{value:{location_change:function(e){T(e._id)}}},f.a.createElement(b.a,{type:"primary",className:"mb-3",onClick:function(){A(!0)}},f.a.createElement("div",{className:"normal_font_size d-flex justify-content-around align-items-center"},f.a.createElement("div",null,"Add new address"),f.a.createElement(g.a,{type:"plus"}))),f.a.createElement(w.a,{user_id:W,address_id:I})),f.a.createElement(C.default,{visible:j}))),f.a.createElement("div",{className:"steps-action justify-content-between d-flex"},L<re.length-1&&f.a.createElement(b.a,{type:"primary",className:"w-50",onClick:function(){return t=re[L].id,void e.form.validateFields(function(){var e=Object(s.a)(i.a.mark(function e(n,a){var o,s,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("next -> values",a),n){e.next=16;break}if(2!==L||a.budget&&a.timeline&&a.timeline_type){e.next=5;break}return Object(y.a)({status:"failed",msg:"Please fill all the data"}),e.abrupt("return",!1);case 5:return o={},0===L&&(a.category_id=r.params.id,localStorage.getItem("user")&&(a.user_id=JSON.parse(localStorage.getItem("user"))._id)),I&&(a.address_id=I),a.current_page=L,a&&F()(a)&&(o.contract_data=[a]),localStorage.getItem("current_contract_id")&&(o._id=localStorage.getItem("current_contract_id")),e.next=13,se({variables:o});case 13:s=e.sent,Object(y.a)(s.data.update_contract),"success"===s.data.update_contract.status&&(localStorage.setItem("current_contract_id",s.data.update_contract._id),l=Object(c.a)(re),u=R()(l,["id",t]),l[u].status="finish",ce(l),Y(L+1));case 16:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());var t}},f.a.createElement("div",{className:"normal_font_size"},"Next")),L===re.length-1&&f.a.createElement(b.a,{type:"primary",className:"w-50",onClick:function(){return function(){t.validateFields(function(){var e=Object(s.a)(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("next -> values",n);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());var e=Object(c.a)(re);e[F()(e)-1].status="finish",ce(e),m.a.success("Processing complete!")}()}},f.a.createElement("div",{className:"normal_font_size"},"Done")),L>=0&&f.a.createElement(b.a,{style:{marginLeft:8},className:"w-50",onClick:function(){return function(e){if(1===e)a.push({pathname:"/"});else{var t=Object(c.a)(re);t[R()(t,["id",e])].status="wait",ce(t),Y(L-1)}}(re[L].id)}},f.a.createElement("div",{className:"normal_font_size"},"Back"))))))})}}]);
//# sourceMappingURL=14.baf99514.chunk.js.map