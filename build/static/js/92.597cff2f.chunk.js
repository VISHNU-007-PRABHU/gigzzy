(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1534:function(e,n,t){"use strict";t.r(n);var a=t(596),o=t.n(a),i=t(602),r=t(567),l=t(568),c=t(619),s=t(569),_=t(570),m=t(673),u=t(0),d=t.n(u),g=t(593),b=t(69),p=t(973),k=(t(283),t(281),t(129)),y=t(674),v=t.n(y),f=t(876),$=t(966),E=t.n($);function h(){var e=Object(m.a)(['\nsubscription SENDACCEPTMSG($_id:ID,$booking_id:ID){\n    send_accept_msg (_id:$_id,booking_id:$booking_id){\n      _id\n      status\n      booking_status\n      payment_type\n      mpeas_payment_callback\n      base_price(code:"symbol")\n      extra_price(code:"symbol")\n      ctob_shotcode\n      ctob_billRef\n    }\n}']);return h=function(){return e},e}var w=d.a.lazy(function(){return t.e(86).then(t.bind(null,1244))}),I={0:"welcome Gizzy",50:"waiting for payment confirmation",10:"Base price paid",11:"Booking canceled",4:"Job started",13:"Ongoing",14:"Completed"},x=v()(h()),N=function(e){Object(_.a)(t,e);var n=Object(s.a)(t);function t(){var e;Object(r.a)(this,t);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(e=n.call.apply(n,[this].concat(l))).state={currency_symbol:"Ksh",collapsed:!1,booking:[],booking_user:[],booking_provider:[],booking_category:[],booking_status:0,payment_type:"",mpeas_payment_callback:!1,base_price:"0.00",extra_price:"0.00",ctob_shotcode:"",ctob_billRef:""},e.onToggle=function(n){console.log(n),e.setState({collapsed:n})},e.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))},e.fetch_booking=function(n){k.a.query({query:f.f,variables:{_id:n},fetchPolicy:"no-cache"}).then(function(n){var t,a,o,i,r,l;console.log(n),e.current_booking_status(e.props.match.params.id),e.setState({booking:n.data.booking,booking_category:n.data.booking[0].booking_category,booking_user:n.data.booking[0].booking_user,booking_provider:n.data.booking[0].booking_provider,message:n.data.booking[0].get_booking_message,booking_status:n.data.booking[0].booking_status,payment_type:(null===(t=n.data.booking[0])||void 0===t?void 0:t.payment_type)||"",base_price:(null===(a=n.data.booking[0])||void 0===a?void 0:a.base_price)||"",extra_price:(null===(o=n.data.booking[0])||void 0===o?void 0:o.extra_price)||"",ctob_shotcode:(null===(i=n.data.booking[0])||void 0===i?void 0:i.ctob_shotcode)||"",ctob_billRef:(null===(r=n.data.booking[0])||void 0===r?void 0:r.ctob_billRef)||"",mpeas_payment_callback:null===(l=n.data.booking[0])||void 0===l?void 0:l.mpeas_payment_callback})})},e.current_booking_status=function(){var n=Object(i.a)(o.a.mark(function n(t){var a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Invoice -> current_booking_status -> b_id",t),a=Object(c.a)(e),n.next=4,k.a.subscribe({query:x,variables:{_id:JSON.parse(localStorage.getItem("user"))._id,booking_id:t}}).subscribe({next:function(e,n,t){var o;(console.log("Invoice -> next -> error",t),n&&console.log("load"),e)&&(console.log(e.data.send_accept_msg),a.setState({booking_status:e.data.send_accept_msg.booking_status,payment_type:(null===(o=e.data.send_accept_msg)||void 0===o?void 0:o.payment_type)||""}))}});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.isMobile()),this.fetch_booking(this.props.match.params.id)}},{key:"render",value:function(){var e,n=this.state,t=n.ctob_billRef,a=n.ctob_shotcode,o=n.mpeas_payment_callback,i=n.base_price,r=n.extra_price,l=n.booking,c=n.booking_category,s=n.booking_provider,_=n.booking_user,m=n.payment_type,k=n.booking_status;return console.log("Invoice -> render -> booking_status",k),console.log("Invoice -> render -> mpeas_payment_callback",o),console.log("Invoice -> render -> payment_option",m),d.a.createElement("div",{className:" col-xs-12 col-md-12 col-sm-12 invoice_body_color  "},d.a.createElement("div",{className:"col-xs-12 col-md-12 col-sm-12 col-lg-6 main_content mx-lg-auto"},d.a.createElement("div",{className:"invoice_header mt-1"},d.a.createElement("div",{className:this.isMobile()?"d-none":""},d.a.createElement("a",{href:"/bookings"},d.a.createElement(g.a,{placement:"left",title:"Back to Booking"},d.a.createElement(b.a,{className:"ml-2 cursor_point",type:"arrow-left",style:{fontSize:"26px"}})))),d.a.createElement("div",null,d.a.createElement("img",{src:E.a,alt:"gigzzy",className:"w-50x object_fit cursor_point"})),d.a.createElement("div",{className:"invoice_info"},d.a.createElement("div",null,"INVOICE NO ",d.a.createElement("b",null,l[0]?l[0].booking_ref:"")),d.a.createElement("div",null," ",d.a.createElement("small",null,l[0]?l[0].booking_date:"")),d.a.createElement("div",{className:"py-2"},d.a.createElement(p.a,{color:"green"},I[this.state.booking_status])))),d.a.createElement("div",{className:50!=k&&1!=o||"c2b"!=m?"d-none":"jumbotron p-1 mb-3 mx-3"},d.a.createElement(u.Suspense,{fallback:d.a.createElement("div",{class:"spinner-border text-success",role:"status"},d.a.createElement("span",{class:"sr-only"},"Loading..."))},d.a.createElement(w,{BusinessNumber:a,AmountNumber:t,Amount:o?r:i}))),d.a.createElement("div",{className:"user_batch mx-3"},d.a.createElement("p",null,d.a.createElement("b",null,_[0]?_[0].name:"")),d.a.createElement("p",null,"Thanks for using gigzzy")),d.a.createElement("div",{className:"total_fare"},d.a.createElement("h5",null,"TOTAL COST"),d.a.createElement("h1",null,d.a.createElement("small",null),l[0]?l[0].total:"")),d.a.createElement("div",{className:"fare_estimation col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex"},d.a.createElement("div",{className:"fare_breakup mr-sm-3"},d.a.createElement("p",{className:"title"},"Fare Breakup"),d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("label",null,"Base Price"),d.a.createElement("span",null,l[0]?l[0].base_price:"")),d.a.createElement("li",null,d.a.createElement("label",null,"Extra Price "),d.a.createElement("span",null,l[0]?l[0].extra_price:"")))),d.a.createElement("div",{className:"tax_breakup "},d.a.createElement("p",{className:"title"},"Service Breakup"),d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("label",{className:"d-flex align-items-center"},"Service Fee",d.a.createElement(g.a,{placement:"right",title:"".concat(null===(e=l[0])||void 0===e?void 0:e.service_fee," %")},d.a.createElement(b.a,{className:"ml-2 cursor_point",type:"info-circle"})),d.a.createElement("span",{className:"ml-auto"},l[0]?l[0].admin_fee:"")))))),d.a.createElement("div",{className:"booking_details col-xs-12 col-md-12 col-sm-12"},d.a.createElement("p",{className:"title"},"Booking Details"),d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("label",null,"Service Type"),d.a.createElement("span",null,c[0]?1===c[0].category_type?c[0].category_name:c[0].subCategory_name:"")),d.a.createElement("li",null,d.a.createElement("label",null,"Booking Date"),d.a.createElement("span",null,l[0]?l[0].booking_date:"")),d.a.createElement("li",null,d.a.createElement("label",null,"Scheduled Date"),d.a.createElement("span",null,l[0]?l[0].booking_date:"")))),d.a.createElement("div",{className:"member_section col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex"},d.a.createElement("div",{className:"user_details mr-sm-3"},d.a.createElement("p",{className:"title"},"User Details"),d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("label",null,"Name"),d.a.createElement("span",null,_[0]?_[0].name:"")),d.a.createElement("li",null,d.a.createElement("label",null,"Email"),d.a.createElement("span",null,_[0]?_[0].email:"")),d.a.createElement("li",null,d.a.createElement("label",null,"Phone"),d.a.createElement("span",null,_[0]?_[0].phone_number:"")))),d.a.createElement("div",{className:"provider_details"},d.a.createElement("p",{className:"title"},"Provider Details"),d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("label",null,"Name"),d.a.createElement("span",null,s[0]?s[0].name:"")),d.a.createElement("li",null,d.a.createElement("label",null,"Email"),d.a.createElement("span",null,s[0]?s[0].email:"")),d.a.createElement("li",null,d.a.createElement("label",null,"Phone"),d.a.createElement("span",null,s[0]?s[0].phone_number:""))))),d.a.createElement("div",{className:"invoice_footer col-xs-12 m-3"},d.a.createElement("hr",null),d.a.createElement("p",null," Thanks,"),"gigzzy Team")))}}]),t}(d.a.Component);n.default=N},876:function(e,n,t){"use strict";t.d(n,"b",function(){return v}),t.d(n,"a",function(){return f}),t.d(n,"h",function(){return $}),t.d(n,"f",function(){return E}),t.d(n,"e",function(){return h}),t.d(n,"d",function(){return w}),t.d(n,"i",function(){return I}),t.d(n,"j",function(){return x}),t.d(n,"g",function(){return N}),t.d(n,"c",function(){return D});var a=t(673),o=t(674),i=t.n(o);function r(){var e=Object(a.a)(["\nmutation ADDCOMMENTS($booking_id : ID,$user_id:ID,$rating:Int,$comments:String){ \n  addRating(\n    role:1\n    booking_id: $booking_id\n    user_id: $user_id\n    rating: $rating\n    comments:$comments\n  ) {\n    user_rating_status\n    msg\n    status\n  }\n}"]);return r=function(){return e},e}function l(){var e=Object(a.a)(["\nsubscription MSGSUB($booking_id : ID,$user_id:ID,$provider_id:ID){ \n\tmessageSent(booking_id:$booking_id){\n    \tmessage\n      createdAt\n      msg_date\n      msg_time\n      role\n      user(_id:$user_id){\n        name\n        img_url\n      }\n      provider(_id:$provider_id){\n        name\n        img_url\n      }\n  }\n}"]);return l=function(){return e},e}function c(){var e=Object(a.a)(["\nmutation UPDATE_MSG_COUNT($booking_id : ID,$role:Int,){ \n  update_msg_is_read(role:$role,booking_id: $booking_id) {\n    msg\n    status\n  }\n}"]);return c=function(){return e},e}function s(){var e=Object(a.a)(["\nmutation UPDATE_MANUAL_PAYMENT($booking_id : ID,$role:Int,){ \n  update_manual_payment(role:$role,booking_id: $booking_id) {\n    msg\n    status\n  }\n}"]);return s=function(){return e},e}function _(){var e=Object(a.a)(["\nmutation ADDMSG($booking_id : ID,$user_id:ID,$data:String){ \n  add_message(\n    role:1\n    booking_id: $booking_id\n    user_id: $user_id\n    message: $data\n  ) {\n    message\n  }\n}"]);return _=function(){return e},e}function m(){var e=Object(a.a)(["\n  query GETMSG($booking_id : ID,$user_id:ID,$provider_id:ID) {\n    get_message(booking_id:$booking_id){\n      message\n      createdAt\n      role\n      msg_date\n      msg_time\n      user(_id:$user_id){\n        name\n        img_url\n      }\n      provider(_id:$provider_id){\n        name\n        img_url\n      }\n    }\n  }"]);return m=function(){return e},e}function u(){var e=Object(a.a)(['\nquery GETPARTICULARBOOKING($_id : ID) {\n  booking(_id:$_id) {\n        _id\n        description\n        user_image_url\n        booking_status\n        booking_date\n        created_at\n        job_start_time\n        job_end_time\n        start_job_image_url\n        end_job_image_url\n        booking_ref\n        base_price(code:"symbol")\n        extra_price(code:"symbol")\n        extra_hour_price(code:"symbol")\n        total(code:"symbol")\n        final_payment(code:"symbol")\n        admin_fee(code:"symbol")\n        charge_id\n        MpesaReceiptNumber\n        mpeas_payment_callback\n        ctob\n        ctob_shotcode\n        ctob_billRef\n        service_fee\n        lat\n        lng\n        provider_fee\n        payment_status\n        payment_type\n        user_rating\n        user_rating_status\n        actual_time\n        user_msg_count\n          provider_msg_count\n          user_msg_is_read\n          provider_msg_is_read\n      user_comments\n      provider_rating\n      provider_comments\n      booking_type\n      get_booking_message(booking_id:$_id){\n          message\n          createdAt\n          role\n          msg_date\n          msg_time\n        }\n        booking_category {\n          category_name\n          category_type\n          subCategory_name\n          description\n          _id\n          base_price\n          hour_price\n          hour_limit\n          img_url\n          booking_parent_category {\n            category_name\n            category_name\n          }\n        }\n        booking_provider{\n          name\n          email\n          phone_number\n          _id\n          img_url\n          lat\n          lng\n        }\n        booking_user {\n          name\n          phone_number\n          email\n          img_url\n          location\n        }\n      }\n    }']);return u=function(){return e},e}function d(){var e=Object(a.a)(['\nquery My_appointments($_id : ID,$role : Int,$booking_status : Int,$limit:Int,$page:Int)\n{\n  get_my_appointments(_id:$_id,role:$role,booking_status:$booking_status,limit:$limit,page:$page){\n    pageInfo{\n      totalDocs\n      page\n    }\n    data{\n            _id\n          booking_status\n          booking_date\n          base_price(code:"symbol")\n          ctob\n          booking_ref\n          booking_type\n          booking_date\n          user_msg_count\n          provider_msg_count\n          user_msg_is_read\n          provider_msg_is_read\n          booking_category{\n          img_url\n          category_type\n          category_name\n          subCategory_name\n          is_parent\n            booking_parent_category{\n              category_name\n              img_url\n            }\n          }\n          booking_provider{\n            name\n            img_url\n            phone_number\n          }\n        }\n    }\n}']);return d=function(){return e},e}function g(){var e=Object(a.a)(["\nmutation AcceptJobMutation($role: Int\n  $booking_id: ID\n  $provider_id: ID\n  $booking_status:Int\n  $phone_number : String\n  $payment_type : String\n){\n  manage_booking(\n    role:$role\n    booking_id: $booking_id\n    provider_id: $provider_id\n    booking_status: $booking_status\n    phone_number : $phone_number\n    payment_type:$payment_type\n  ){\n    status\n    msg\n  }\n}"]);return g=function(){return e},e}function b(){var e=Object(a.a)(['\n mutation ADDBOOKING($user_id:ID,$local_location_code:String,$location_code:String,$booking_time:String,$booking_hour:String,$booking_type:Int,$category_id:ID,$category_type:Int,$lat:Float,$lng:Float,$hours:String,$description:String,$booking_status:Int,$booking_date:String,$file:[Upload]) {\n    add_booking(\n      user_id: $user_id,\n      category_id: $category_id\n      location_code:$location_code\n      local_location_code:$local_location_code\n      category_type: $category_type\n      lat: $lat\n      lng: $lng\n      hours: $hours\n      description: $description\n      booking_status: $booking_status,\n      booking_type:$booking_type,\n      booking_date:$booking_date,\n      booking_time:$booking_time,\n      booking_hour:$booking_hour,\n      file:$file\n    ) {\n      id\n      description\n      location\n      lat\n      lng\n      user_image_url\n      user(_id:$user_id) {\n        name\n      }\n      provider {\n        name\n        _id\n      }\n      category(_id: $category_id, category_type: $category_type) {\n        category_name\n        subCategory_name\n        base_price\n        hour_price\n        hour_limit\n        description\n        img_url\n        ParentCategoryCurrency(root: true,location_code:$location_code) {\n          base_price(code:"symbol")\n        }\n      }\n      hours\n    }\n  }\n  ']);return b=function(){return e},e}function p(){var e=Object(a.a)(["\nsubscription TESTS($online:String){\n    test (online:$online){\n      status\n      msg\n    }\n}"]);return p=function(){return e},e}function k(){var e=Object(a.a)(['\nsubscription getPendingDataSubscription($_id: ID\n$role: Int\n$booking_status: Int\n){\n  get_my_appointments(_id: $_id, role: $role, booking_status: $booking_status)\n  {\n    _id\n    status\n    description\n    base_price(code:"symbol")\n    ctob\n    booking_date\n    jobStart_time\n    jobEnd_time\n    booking_status\n    user_image_url\n    start_job_image_url\n    end_job_image_url\n    booking_type\n    user_msg_count\n    provider_msg_count\n    user_msg_is_read\n    provider_msg_is_read\n    booking_category {\n      category_name\n      subCategory_name\n      category_type\n      description\n      _id\n      base_price\n      hour_price\n      hour_limit\n      img_url\n      booking_parent_category{\n        category_name\n      }\n    }\n    booking_user {\n      name\n      lat\n      lng\n      phone_no\n      phone_number\n      _id\n      img_url\n    }\n    booking_provider {\n      name\n      lat\n      lng\n      phone_no\n      _id\n      img_url\n    }\n    # find_kilometre(lat: $lat, lng: $lng) {\n    #   kilometre\n    # }\n  }\n}']);return k=function(){return e},e}function y(){var e=Object(a.a)(['\nsubscription SENDACCEPTMSG($_id:ID,$booking_id:ID){\n    send_accept_msg (_id:$_id,booking_id:$booking_id){\n      _id\n      status\n      description\n      booking_ref\n      booking_date\n      base_price(code:"symbol")\n      ctob\n      extra_price\n      msg_date\n      msg_time\n      booking_provider {\n        _id\n        name\n        lat\n        lng\n        img_url\n        rating\n      }\n    }\n}']);return y=function(){return e},e}i()(y()),i()(k()),i()(p());var v=i()(b()),f=i()(g()),$=i()(d()),E=i()(u()),h=i()(m()),w=i()(_()),I=i()(s()),x=i()(c()),N=i()(l()),D=i()(r())},966:function(e,n,t){e.exports=t.p+"static/media/main.c57228a8.png"}}]);
//# sourceMappingURL=92.597cff2f.chunk.js.map