{"version":3,"sources":["component/Admin/Roles/AdminUsers.js"],"names":["AdminUsers","props","_this","Object","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","_super","call","handleTableChange","_ref","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","pagination","pager","wrap","_context","prev","next","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__","current","setState","loading","client","query","GET_ADMIN_USER","variables","limit","pageSize","page","role","fetchPolicy","then","result","state","total","data","get_admin_users","pageInfo","totalDocs","dataSource","stop","_x","apply","arguments","fetch_user","_ref2","_callee2","visible","_context2","_x2","search_user","simple","_this2","columns","title","width","render","text","record","react__WEBPACK_IMPORTED_MODULE_7___default","createElement","name","className","style","wordBreak","email","antd_es_tag__WEBPACK_IMPORTED_MODULE_14__","color","dataIndex","length","onClick","history","push","concat","_id","antd__WEBPACK_IMPORTED_MODULE_11__","type","theme","twoToneColor","antd__WEBPACK_IMPORTED_MODULE_12__","onConfirm","handleDelete","antd_es_input_Search__WEBPACK_IMPORTED_MODULE_15__","size","placeholder","onKeyUp","event","onFilter","id","antd__WEBPACK_IMPORTED_MODULE_13__","rowClassName","onChange","React","Component","withRouter"],"mappings":"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","file":"static/js/15.b530a790.chunk.js","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { GET_ADMIN_USER } from '../../../graphql/Admin/roles';\nimport { client } from \"../../../apollo\";\nimport { Table, Button, Icon, Popconfirm } from 'antd';\nimport Tag from 'antd/es/tag';\nimport Search from \"antd/es/input/Search\";\nimport { Alert_msg } from '../../Comman/alert_msg';\nclass AdminUsers extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataSource: [],\n            search_user: [],\n            loading: false,\n            pagination: {\n                pageSize: 10,\n                current: 1,\n                total: 0,\n                simple: true,\n            }\n        };\n    }\n    componentDidMount() {\n        this.fetch_user();\n    }\n    handleTableChange = async pagination => {\n        const pager = { ...pagination };\n        pager.current = pagination.current;\n        this.setState({ loading: true });\n\n        await client.query({\n            query: GET_ADMIN_USER,\n            variables: { limit: pager.pageSize, page: pager.current, role: \"1\" },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            const pagination = { ...this.state.pagination };\n            pagination.total = result.data.get_admin_users.pageInfo.totalDocs;\n            pagination.current = result.data.get_admin_users.pageInfo.page;\n            this.setState({ pagination, loading: false, dataSource: result.data.get_admin_users.data });\n        });\n    };\n\n    fetch_user = async (visible) => {\n        this.setState({ loading: true });\n\n        await client.query({\n            query: GET_ADMIN_USER,\n            variables: { limit: this.state.pagination.pageSize, page: this.state.pagination.current, role: \"1\" },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            const pagination = { ...this.state.pagination };\n            pagination.total = result.data.get_admin_users.pageInfo.totalDocs;\n            this.setState({ loading: false, pagination, dataSource: result.data.get_admin_users.data });\n        });\n    }\n\n    // handleDelete = async (_id) => {\n    //     console.log(_id);\n    //     await client.mutate({\n    //         mutation: DELETE_USER,\n    //         variables: { _id: _id },\n    //     }).then((result, loading, error) => {\n    //         Alert_msg(result.data.deleteDetails);\n    //         if (result.data.deleteDetails.status === 'success') {\n    //             this.fetch_user();\n    //         }\n    //     });\n    // }\n\n    // onFilter = async (value) => {\n    //     console.log(value.target.value);\n    //     var datas = { delete: 0, role: 1, $or: [{ 'name': { $regex: '.*' + value.target.value + '.*',$options:'i'  } }, { 'email': { $regex: '.*' + value.target.value + '.*',$options:'i'  } }, { 'phone_no': { $regex: '.*' + value.target.value + '.*',$options:'i'  } }] }\n    //     await client.query({\n    //         query: USER_EMAIL_QUERY,\n    //         variables: { data: datas },\n    //         fetchPolicy: 'no-cache',\n    //     }).then(result => {\n    //         this.setState({ dataSource: result?.data?.user_search });\n    //     });\n    // }\n    render() {\n        const { dataSource } = this.state;\n\n        const columns = [\n            {\n                title: \"Name\",\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Name\">{record.name}</span>;\n                }\n\n            },\n            {\n                title: () => {\n                    return <div>\n                        <div className=\"d-block\">\n                            <div>\n                                Email\n                             </div>\n                        </div>\n                    </div>\n                },\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Email\" style={{ wordBreak: \"keep-all\" }}>{record.email}</span>;\n                }\n\n            },\n            {\n                title: () => {\n                    return <div>\n                        <div className=\"d-block\">\n                            <div>\n                                Roles\n                             </div>\n                        </div>\n                    </div>\n                },\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Email\" style={{ wordBreak: \"keep-all\" }}>\n                        {record['roles'] ? \n                          <Tag color=\"purple\">{record['admin_role_detail']['name']}</Tag>:record['admin_role_detail']['msg']}\n                        </span>;\n                }\n\n            },\n            {\n                title: \"Action\",\n                dataIndex: 'operation',\n                render: (text, record) =>\n                    this.state.dataSource.length >= 1 ? (\n                        <span title=\"....\" className=\"d-flex d-sm-inline justify-content-around\">\n                            <span className='cursor_point' onClick={() => { this.props.history.push(`/admin-admin/add/${record._id}`); }}><Icon type=\"edit\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='mx-3 f_25' /></span>\n                            <Popconfirm title=\"Sure to delete the user ?\" onConfirm={() => this.handleDelete(record._id)}>\n                                <Icon type=\"delete\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='f_25' />\n                            </Popconfirm>\n                        </span>\n                    ) : null,\n            },\n        ];\n\n\n        return (\n            <div>\n                <div className='mx-2 mx-sm-0 mb-3'>\n                    <Search size=\"large\" placeholder=\"search\" onKeyUp={(event) => { this.onFilter(event) }} loading={false} />\n                </div>\n                <div id=\"no-more-tables\">\n                    <Table\n                        rowClassName={() => 'editable-row'}\n                        className='table_shadow'\n                        dataSource={dataSource}\n                        columns={columns}\n                        size=\"middle\"\n                        pagination={this.state.pagination}\n                        onChange={this.handleTableChange}\n                        loading={this.state.loading}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(AdminUsers);"],"sourceRoot":""}