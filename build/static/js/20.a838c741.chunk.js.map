{"version":3,"sources":["graphql/User/contract.js","graphql/User/biding.js","graphql/User/milestone.js","component/Admin/Booking/ContractInvoice.js"],"names":["UPDATE_CONTRACT","gql","_templateObject","Object","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__","UPDATE_CONTRACT_FILE","_templateObject2","DELETE_CONTRACT_FILE","_templateObject3","GET_CONTRACT_FILES","_templateObject4","GET_CONTRACT","_templateObject5","GET_BIDING_PAGINATION","GET_BIDING_DETAIL","UPDATE_BIDING","GET_MILESTONE_PAGINATION","UPDATE_MILESTONE","C2B_CONTENT","React","lazy","__webpack_require__","e","then","bind","payment_status","0","50","9","10","11","4","13","14","milestone_payment_status","ContractInvoice","_booking_user$","_booking_category$","_booking_category$2","_booking_category$3","_booking_user$2","_booking_user$3","_booking_user$4","_booking_provider$","_booking_provider$2","_booking_provider$3","detectMobile","useMobileDetect","_useReactRouter","useReactRouter","match","history","_useState","useState","_useState2","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","booking_category","set_booking_category","_useState3","_useState4","booking_user","set_booking_user","_useState5","_useState6","booking_biding","set_booking_biding","_useState7","_useState8","booking_provider","set_booking_provider","_useState9","_useState10","booking","set_booking","_useState11","_useState12","booking_milestone","set_booking_milestone","_useState13","_useState14","_useState15","_useState16","mpesa_detail","set_mpesa_detail","contract_detail","useQuery","get_biding_detail","get_biding_milestone","useEffect","fetch_contract","_ref","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","finaldata","accept_biding_data","accept_milestone_data","current_mid","mid_result","wrap","_context","prev","next","refetch","contract_id","params","id","sent","data","get_contracts","get_provider_user","get_user","get_contract_category","biding_id","_id","booking_status","currenct_milestone_status","currenct_milestone_id","_","find","size","stop","apply","this","arguments","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","Fragment","className","isMobile","href","antd__WEBPACK_IMPORTED_MODULE_4__","placement","title","antd__WEBPACK_IMPORTED_MODULE_5__","type","style","fontSize","src","main","alt","contract_ref","booking_date","antd__WEBPACK_IMPORTED_MODULE_6__","color","payment_type","react__WEBPACK_IMPORTED_MODULE_3__","fallback","class","role","BusinessNumber","ctob_shotcode","AmountNumber","ctob_billRef","Amount","budget","name","admin_fee","service_fee","category_type","category_name","subCategory_name","created_at","length","map","m_data","m_i","email","phone_number"],"mappings":"mSAEaA,EAAkBC,IAAHC,MAAAC,OAAAC,EAAA,EAAAD,CAAA,8MAWfE,EAAuBJ,IAAHK,MAAAH,OAAAC,EAAA,EAAAD,CAAA,qTASpBI,EAAuBN,IAAHO,MAAAL,OAAAC,EAAA,EAAAD,CAAA,sJASpBM,EAAqBR,IAAHS,MAAAP,OAAAC,EAAA,EAAAD,CAAA,kSAclBQ,EAAeV,IAAHW,MAAAT,OAAAC,EAAA,EAAAD,CAAA,8wEC3CZU,EAAwBZ,IAAHC,MAAAC,OAAAC,EAAA,EAAAD,CAAA,4hDAgDrBW,EAAoBb,IAAHK,MAAAH,OAAAC,EAAA,EAAAD,CAAA,4pCAyCjBY,EAAgBd,IAAHO,MAAAL,OAAAC,EAAA,EAAAD,CAAA,0SCxFba,EAA2Bf,IAAHC,MAAAC,OAAAC,EAAA,EAAAD,CAAA,yhBAkCxBc,GAjBuBhB,IAAHK,MAAAH,OAAAC,EAAA,EAAAD,CAAA,qZAiBDF,IAAHO,MAAAL,OAAAC,EAAA,EAAAD,CAAA,2sBC1BvBe,EAAcC,IAAMC,KAAK,kBAAMC,EAAAC,EAAA,GAAAC,KAAAF,EAAAG,KAAA,cAE/BC,EAAiB,CACnBC,EAAG,gBACHC,GAAI,mCACJC,EAAG,sBACHC,GAAI,kBACJC,GAAI,mBACJC,EAAG,cACHC,GAAI,UACJC,GAAI,aAGFC,EAA2B,CAC7BR,EAAG,gBACHC,GAAI,mCACJC,EAAG,UACHG,EAAG,cACHC,GAAI,UACJC,GAAI,aAiNOE,UA9Mf,WAA2B,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACjBC,EAAeC,MACrBC,EAA2BC,MAAVC,GAAjBF,EAAQG,QAARH,EAAiBE,OACjBE,EAAiDC,mBAAS,IAA1DC,EAAAnD,OAAAoD,EAAA,EAAApD,CAAAiD,EAAA,GAAOI,EAAPF,EAAA,GAAyBG,EAAzBH,EAAA,GACAI,EAAyCL,mBAAS,IAAlDM,EAAAxD,OAAAoD,EAAA,EAAApD,CAAAuD,EAAA,GAAOE,EAAPD,EAAA,GAAqBE,EAArBF,EAAA,GACAG,EAA6CT,mBAAS,IAAtDU,EAAA5D,OAAAoD,EAAA,EAAApD,CAAA2D,EAAA,GAAOE,EAAPD,EAAA,GAAuBE,EAAvBF,EAAA,GACAG,EAAiDb,mBAAS,IAA1Dc,EAAAhE,OAAAoD,EAAA,EAAApD,CAAA+D,EAAA,GAAOE,EAAPD,EAAA,GAAyBE,EAAzBF,EAAA,GACAG,EAA+BjB,mBAAS,IAAxCkB,EAAApE,OAAAoD,EAAA,EAAApD,CAAAmE,EAAA,GAAOE,EAAPD,EAAA,GAAgBE,EAAhBF,EAAA,GACAG,EAAmDrB,mBAAS,IAA5DsB,EAAAxE,OAAAoD,EAAA,EAAApD,CAAAuE,EAAA,GAAOE,GAAPD,EAAA,GAA0BE,GAA1BF,EAAA,GACAG,GAA6DzB,oBAAS,GAAtE0B,GAAA5E,OAAAoD,EAAA,EAAApD,CAAA2E,GAAA,GACAE,IADAD,GAAA,GAAAA,GAAA,GACyC1B,mBAAS,KAAlD4B,GAAA9E,OAAAoD,EAAA,EAAApD,CAAA6E,GAAA,GAAOE,GAAPD,GAAA,GAAqBE,GAArBF,GAAA,GAEMG,GAAkBC,YAAS1E,KAC3B2E,GAAoBD,YAASvE,KAC7ByE,GAAuBF,YAASrE,KAEtCwE,oBAAU,WACNC,MACD,IAEH,IAAMA,GAAc,eAAAC,EAAAvF,OAAAwF,EAAA,EAAAxF,CAAAyF,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAR,EAAAC,EAAAQ,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACGpB,GAAgBqB,QAAQ,CAAEC,YAAaxD,EAAMyD,OAAOC,KADvD,UACfZ,EADeM,EAAAO,KAEnBpC,EAAYuB,EAAUc,KAAKC,cAAc,IACzC1C,EAAqB2B,EAAUc,KAAKC,cAAc,GAAGC,mBACrDnD,EAAiBmC,EAAUc,KAAKC,cAAc,GAAGE,UACjDxD,EAAqBuC,EAAUc,KAAKC,cAAc,GAAGG,wBACjDlB,EAAUc,KAAKC,cAAc,GAAGI,UANjB,CAAAb,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAOgBlB,GAAkBmB,QAAQ,CAAEW,IAAKpB,EAAUc,KAAKC,cAAc,GAAGI,YAPjF,eAOXlB,EAPWK,EAAAO,KAQf5C,EAAmBgC,EAAmBa,KAAKxB,mBAR5BgB,EAAAE,KAAA,GASmBjB,GAAqBkB,QAAQ,CAAEU,UAAWnB,EAAUc,KAAKC,cAAc,GAAGI,YAT7F,QASXjB,EATWI,EAAAO,KAUfhC,GAAsBqB,EAAsBY,KAAKvB,sBACM,KAAnDS,EAAUc,KAAKC,cAAc,GAAGM,eAChClC,GAAiBc,EAAmBa,KAAKxB,mBAClCU,EAAUc,KAAKC,cAAc,GAAGO,4BACnCnB,EAAcH,EAAUc,KAAKC,cAAc,GAAGQ,sBAC9CnB,EAAaoB,IAAEC,KAAK7C,GAAmB,CAAC,MAAOuB,IAC/CqB,IAAEE,KAAKtB,IACPjB,GAAiBiB,IAjBV,yBAAAE,EAAAqB,SAAA5B,MAAH,yBAAAL,EAAAkC,MAAAC,KAAAC,YAAA,GAuBpB,OACIC,EAAAlC,EAAAmC,cAAAD,EAAAlC,EAAAoC,SAAA,KACIF,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,uDACXH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,kEACXH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,uBACXH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAWpF,EAAaqF,WAAa,SAAW,IACjDJ,EAAAlC,EAAAmC,cAAA,KAAGI,KAAK,aACJL,EAAAlC,EAAAmC,cAACK,EAAA,EAAD,CAASC,UAAU,OAAOC,MAAM,mBAC5BR,EAAAlC,EAAAmC,cAACQ,EAAA,EAAD,CAAMN,UAAU,oBAAoBO,KAAK,aAAaC,MAAO,CAAEC,SAAU,aAIrFZ,EAAAlC,EAAAmC,cAAA,WACID,EAAAlC,EAAAmC,cAAA,OAAKY,IAAKC,IAAMC,IAAK,SAAUZ,UAAU,mCAE7CH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,gBACXH,EAAAlC,EAAAmC,cAAA,yBAAgBD,EAAAlC,EAAAmC,cAAA,gBAAIxD,QAAJ,IAAIA,OAAJ,EAAIA,EAASuE,eAC7BhB,EAAAlC,EAAAmC,cAAA,eAAMD,EAAAlC,EAAAmC,cAAA,oBAAQxD,QAAR,IAAQA,OAAR,EAAQA,EAASwE,eACvBjB,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,QACXH,EAAAlC,EAAAmC,cAACiB,EAAA,EAAD,CAAKC,MAAM,SACNzH,EAAe+C,EAAQ6C,oBAMxCU,EAAAlC,EAAAmC,cAAA,OAAKE,UAA6C,MAArB,OAAZhD,SAAY,IAAZA,QAAA,EAAAA,GAAcmC,iBAAuD,QAAlB,OAAZnC,SAAY,IAAZA,QAAA,EAAAA,GAAciE,cAAyB,0BAA4B,UACvHpB,EAAAlC,EAAAmC,cAACoB,EAAA,SAAD,CAAUC,SACNtB,EAAAlC,EAAAmC,cAAA,OAAKsB,MAAM,8BAA8BC,KAAK,UAC1CxB,EAAAlC,EAAAmC,cAAA,QAAMsB,MAAM,WAAZ,gBAGJvB,EAAAlC,EAAAmC,cAAC9G,EAAD,CACIsI,eAAc,OAAEtE,SAAF,IAAEA,QAAF,EAAEA,GAAcuE,cAC9BC,aAAY,OAAExE,SAAF,IAAEA,QAAF,EAAEA,GAAcyE,aAC5BC,OAAM,OAAE1E,SAAF,IAAEA,QAAF,EAAEA,GAAc2E,WAGlC9B,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,mBACXH,EAAAlC,EAAAmC,cAAA,SAAGD,EAAAlC,EAAAmC,cAAA,gBAAIpE,QAAJ,IAAIA,OAAJ,UAAAxB,EAAIwB,EAAe,UAAnB,IAAAxB,OAAA,EAAIA,EAAmB0H,OAC1B/B,EAAAlC,EAAAmC,cAAA,sCAEJD,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,cACXH,EAAAlC,EAAAmC,cAAA,wBACAD,EAAAlC,EAAAmC,cAAA,UAAID,EAAAlC,EAAAmC,cAAA,cAAJ,OAAoBhE,QAApB,IAAoBA,OAApB,EAAoBA,EAAgB6F,SAGxC9B,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,+EACXH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,wBACXH,EAAAlC,EAAAmC,cAAA,KAAGE,UAAU,SAAb,gBACAH,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,2BACAD,EAAAlC,EAAAmC,cAAA,mBAAOhE,QAAP,IAAOA,OAAP,EAAOA,EAAgB+F,cAInChC,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,gBACXH,EAAAlC,EAAAmC,cAAA,KAAGE,UAAU,SAAb,mBACAH,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,SAAOE,UAAU,6BAAjB,cAEIH,EAAAlC,EAAAmC,cAAA,QAAME,UAAU,WAAhB,OACKlE,QADL,IACKA,OADL,EACKA,EAAgBgG,YADrB,UAWpBjC,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,iDACXH,EAAAlC,EAAAmC,cAAA,KAAGE,UAAU,SAAb,mBACAH,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,6BACAD,EAAAlC,EAAAmC,cAAA,YAAgD,KAAzB,OAAhBxE,QAAgB,IAAhBA,OAAA,UAAAnB,EAAAmB,EAAmB,UAAnB,IAAAnB,OAAA,EAAAA,EAAuB4H,eAAvB,OAA6CzG,QAA7C,IAA6CA,OAA7C,UAAAlB,EAA6CkB,EAAmB,UAAhE,IAAAlB,OAAA,EAA6CA,EAAuB4H,cAApE,OAAoF1G,QAApF,IAAoFA,OAApF,UAAAjB,EAAoFiB,EAAmB,UAAvG,IAAAjB,OAAA,EAAoFA,EAAuB4H,mBAEtHpC,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,6BACAD,EAAAlC,EAAAmC,cAAA,mBAAOxD,QAAP,IAAOA,OAAP,EAAOA,EAAS4F,eAI3BxF,GAAkByF,OAAS,GAAKtC,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,iDAC5CH,EAAAlC,EAAAmC,cAAA,KAAGE,UAAU,SAAb,qBACCtD,GAAkB0F,IAAI,SAACC,EAAQC,GAC5B,OACIzC,EAAAlC,EAAAmC,cAAAD,EAAAlC,EAAAoC,SAAA,KACIF,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,kBACXH,EAAAlC,EAAAmC,cAAA,wBAAgBwC,GAChBzC,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,kCACXH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,UAAf,oBAGAH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,sBACXH,EAAAlC,EAAAmC,cAACiB,EAAA,EAAD,CAAKC,MAAM,SAAShH,EAAwB,OAACqI,QAAD,IAACA,OAAD,EAACA,EAAQlD,mBAG7DU,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,kCACXH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,UAAf,UAGAH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,sBAAf,OACKqC,QADL,IACKA,OADL,EACKA,EAAQV,cASrC9B,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,8EACXH,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,wBACXH,EAAAlC,EAAAmC,cAAA,KAAGE,UAAU,SAAb,gBACAH,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,qBACAD,EAAAlC,EAAAmC,cAAA,mBAAOpE,QAAP,IAAOA,OAAP,UAAApB,EAAOoB,EAAe,UAAtB,IAAApB,OAAA,EAAOA,EAAmBsH,OAE9B/B,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,sBACAD,EAAAlC,EAAAmC,cAAA,mBAAOpE,QAAP,IAAOA,OAAP,UAAAnB,EAAOmB,EAAe,UAAtB,IAAAnB,OAAA,EAAOA,EAAmBgI,QAE9B1C,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,sBACAD,EAAAlC,EAAAmC,cAAA,mBAAOpE,QAAP,IAAOA,OAAP,UAAAlB,EAAOkB,EAAe,UAAtB,IAAAlB,OAAA,EAAOA,EAAmBgI,iBAItC3C,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,oBACXH,EAAAlC,EAAAmC,cAAA,KAAGE,UAAU,SAAb,oBACAH,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,qBACAD,EAAAlC,EAAAmC,cAAA,mBAAO5D,QAAP,IAAOA,OAAP,UAAAzB,EAAOyB,EAAmB,UAA1B,IAAAzB,OAAA,EAAOA,EAAuBmH,OAElC/B,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,sBACAD,EAAAlC,EAAAmC,cAAA,mBAAO5D,QAAP,IAAOA,OAAP,UAAAxB,EAAOwB,EAAmB,UAA1B,IAAAxB,OAAA,EAAOA,EAAuB6H,QAElC1C,EAAAlC,EAAAmC,cAAA,UACID,EAAAlC,EAAAmC,cAAA,sBACAD,EAAAlC,EAAAmC,cAAA,mBAAO5D,QAAP,IAAOA,OAAP,UAAAvB,EAAOuB,EAAmB,UAA1B,IAAAvB,OAAA,EAAOA,EAAuB6H,kBAK9C3C,EAAAlC,EAAAmC,cAAA,OAAKE,UAAU,gCACXH,EAAAlC,EAAAmC,cAAA,WACAD,EAAAlC,EAAAmC,cAAA,qBAFJ","file":"static/js/20.a838c741.chunk.js","sourcesContent":["import gql from \"graphql-tag\";\n\nexport const UPDATE_CONTRACT = gql`\n    mutation UPDATECONTRACT($_id:ID,$contract_data:JSON){\n        update_contract(_id:$_id,contract_data:$contract_data){\n            msg\n            status\n            _id\n        }\n    }\n`\n\n\nexport const UPDATE_CONTRACT_FILE = gql`\n    mutation UPDATECONTRACTFILE($contract_id:ID,$file:[Upload],$category:String,$image_tag:String,$_id:ID){\n        ContractJobFileUpload(contract_id:$contract_id,file:$file,category:$category,image_tag:$image_tag,_id:$_id){\n            msg\n            status\n            _id\n        }\n    }\n`\nexport const DELETE_CONTRACT_FILE = gql`\n    mutation DELETECONTRACTFILE($_id:ID){\n        DeleteContractJobFile(_id:$_id){\n            msg\n            status\n        }\n    }\n`\n\nexport const GET_CONTRACT_FILES = gql`\n    query GETCONTRACTFILES($contract_id:ID){\n        get_contract_files(contract_id:$contract_id) {\n            _id\n            images{\n                small_image\n                image_tag\n                doc_category\n                _id\n            }\n        }\n    }\n`\n\nexport const GET_CONTRACT = gql`\n    query GETCONTRACT($contract_id:ID,$location_code:String){\n        get_contracts(contract_id:$contract_id,location_code:$location_code){\n            name\n            description\n            current_page\n            address_id\n            booking_status\n            budget(code:$location_code)\n            timeline\n            biding_id\n            timeline_type\n            terms_condition\n            contract_ref\n            biding_count\n            created_at\n            currenct_milestone_id\n            currenct_milestone_status\n            ctob_billRef\n            ctob_shotcode\n            ctob\n            get_contract_category{\n                category_name\n                subCategory_name\n                category_type\n            }\n            get_contract_all_files(contract_id:$contract_id){\n                small_image\n            }\n            get_contract_files(contract_id:$contract_id) {\n                _id\n                images{\n                    small_image\n                    large_image\n                    image_tag\n                }\n            }\n            get_provider_user {\n                img_url\n                first_name\n                email\n                phone_no\n                user_type\n                last_name\n                _id\n                get_company_root_detail(root: true) {\n                    company_name\n                    company_website\n                    company_category\n                    get_company_images {\n                    small_image\n                    }\n                }\n            }\n            get_user {\n                img_url\n                first_name\n                user_type\n                last_name\n                email\n                phone_no\n                _id\n                get_company_root_detail(root: true) {\n                    company_name\n                    company_website\n                    company_category\n                    get_company_images {\n                        small_image\n                    }\n                }\n            }\n        }\n    }\n`\n\n\n\n\n\n","import gql from \"graphql-tag\";\n\nexport const GET_BIDING_PAGINATION = gql`\n    query GETBIDINGPAGINATION($limit: Int,$page:Int,$data:JSON,$contract_id:ID,$location_code:String) {\n        get_biding_pagination(limit:$limit,page:$page,data:$data,contract_id:$contract_id,location_code:$location_code) {\n            pageInfo{\n                totalDocs\n                page\n            }\n            data{\n                _id\n                budget(code:$location_code)\n                service_fee\n                admin_fee(code:$location_code)\n                ref: biding_ref\n                created_at\n                user_id\n                contract_id\n                description\n                experience\n                timeline\n                timeline_type\n                payment_option(code:$location_code)\n                add_to_shortlist\n                provider_rating_by_category(root: true) {\n                    rating\n                }\n                get_biding_all_files {\n                    small_image\n                }\n                get_user(root_parent:true) {\n                    img_url\n                    first_name\n                    user_type\n                    last_name\n                    _id\n                    get_company_root_detail(root: true) {\n                        company_name\n                        company_website\n                        company_category\n                        get_company_images {\n                            small_image\n                        }\n                    }\n                }\n            }\n        }\n    }\n`;\n\nexport const GET_BIDING_DETAIL = gql`\n    query GETBIDINGDETAIL($_id:ID){\n        get_biding_detail(_id:$_id){\n            _id\n                budget(code:\"IN\")\n                admin_fee(code:\"IN\")\n                service_fee\n                ref: biding_ref\n                created_at\n                user_id\n                contract_id\n                description\n                experience\n                timeline\n                timeline_type\n                add_to_shortlist\n                payment_type\n                ctob_shotcode\n                ctob_billRef\n                get_biding_all_files {\n                    small_image\n                }\n                get_user {\n                    img_url\n                    first_name\n                    user_type\n                    last_name\n                    _id\n                    get_company_root_detail(root: true) {\n                        company_name\n                        company_website\n                        company_category\n                        get_company_images {\n                            small_image\n                        }\n                    }\n                }\n        }\n    }\n`\n\nexport const UPDATE_BIDING = gql`\nmutation UPDATEBIDING($_id:ID,$biding_data:[JSON]){ \n    update_biding(\n    _id: $_id\n    biding_data: $biding_data\n  ) {\n    msg\n    status\n  }\n}`\n\n\n","\nimport gql from \"graphql-tag\";\n\nexport const GET_MILESTONE_PAGINATION = gql`\n    query GETMILESTONEPAGINATION($_id:ID,$contract_id:ID,$biding_id:ID,$location_code:String){\n        get_biding_milestone(_id:$_id,contract_id:$contract_id,biding_id:$biding_id){\n                _id\n                budget(code:$location_code)\n                ref: milestone_ref\n                created_at\n                user_id\n                contract_id\n                timeline\n                timeline_type\n                payment_option(code:$location_code)\n                booking_status\n        }\n    }\n`;\n\nexport const GET_MILESTONE_DETAIL = gql`\n    query GETMILESTONEDETAIL($_id:ID,$contract_id:ID,$biding_id:ID){\n        get_biding_milestone_detail(_id:$_id,contract_id:$contract_id,biding_id:$biding_id){\n            _id\n            budget\n            ref: milestone_ref\n            created_at\n            user_id\n            contract_id\n            description\n            timeline\n            timeline_type\n        }\n    }\n`\n\n\nexport const UPDATE_MILESTONE = gql`\nmutation UPDATEMILESTONE($option:String  \n    $_id:ID\n    $user_id: String\n    $provider_id:ID\n    $biding_id:ID\n    $contract_id:ID\n    $file:[Upload]\n    $milestone_data:JSON){ \n    update_milestone(\n        option:$option  \n        _id:$_id\n        user_id: $user_id\n        provider_id:$provider_id\n        biding_id:$biding_id\n        contract_id:$contract_id\n        file:$file\n        milestone_data:$milestone_data\n  ) {\n    msg\n    status\n  }\n}`","\nimport React, { Suspense, useState, useEffect } from \"react\";\nimport { Icon, Tooltip, Tag } from \"antd\"\nimport useMobileDetect from 'use-mobile-detect-hook';\nimport main from '../../../image/main.png';\nimport useReactRouter from \"use-react-router\";\nimport { useQuery } from '@apollo/react-hooks';\nimport { GET_CONTRACT } from '../../../graphql/User/contract';\nimport { GET_BIDING_DETAIL } from '../../../graphql/User/biding';\nimport { GET_MILESTONE_PAGINATION } from '../../../graphql/User/milestone';\nimport _ from 'lodash'\nconst C2B_CONTENT = React.lazy(() => import('./C2B_CONTENT'));\n\nconst payment_status = {\n    0: \"welcome Gizzy\",\n    50: \"waiting for payment confirmation\",\n    9: \"Provider accept job\",\n    10: \"Base price paid\",\n    11: \"Booking canceled\",\n    4: \"Job started\",\n    13: \"Ongoing\",\n    14: \"Completed\"\n}\n\nconst milestone_payment_status = {\n    0: \"welcome Gizzy\",\n    50: \"waiting for payment confirmation\",\n    9: \"Pending\",\n    4: \"Job started\",\n    13: \"Ongoing\",\n    14: \"Completed\"\n}\n\nfunction ContractInvoice() {\n    const detectMobile = useMobileDetect();\n    const { history, match } = useReactRouter();\n    const [booking_category, set_booking_category] = useState([])\n    const [booking_user, set_booking_user] = useState([])\n    const [booking_biding, set_booking_biding] = useState({})\n    const [booking_provider, set_booking_provider] = useState([])\n    const [booking, set_booking] = useState([])\n    const [booking_milestone, set_booking_milestone] = useState([])\n    const [mpeas_payment_callback, set_mpeas_payment_callback] = useState(false)\n    const [mpesa_detail, set_mpesa_detail] = useState({})\n\n    const contract_detail = useQuery(GET_CONTRACT);\n    const get_biding_detail = useQuery(GET_BIDING_DETAIL);\n    const get_biding_milestone = useQuery(GET_MILESTONE_PAGINATION);\n\n    useEffect(() => {\n        fetch_contract()\n    }, [])\n\n    const fetch_contract = async () => {\n        let finaldata = await contract_detail.refetch({ contract_id: match.params.id })\n        set_booking(finaldata.data.get_contracts[0])\n        set_booking_provider(finaldata.data.get_contracts[0].get_provider_user)\n        set_booking_user(finaldata.data.get_contracts[0].get_user)\n        set_booking_category(finaldata.data.get_contracts[0].get_contract_category)\n        if (finaldata.data.get_contracts[0].biding_id) {\n            let accept_biding_data = await get_biding_detail.refetch({ _id: finaldata.data.get_contracts[0].biding_id })\n            set_booking_biding(accept_biding_data.data.get_biding_detail)\n            let accept_milestone_data = await get_biding_milestone.refetch({ biding_id: finaldata.data.get_contracts[0].biding_id })\n            set_booking_milestone(accept_milestone_data.data.get_biding_milestone)\n            if (finaldata.data.get_contracts[0].booking_status === 50) {\n                set_mpesa_detail(accept_biding_data.data.get_biding_detail)\n            } else if (finaldata.data.get_contracts[0].currenct_milestone_status) {\n                let current_mid = finaldata.data.get_contracts[0].currenct_milestone_id\n                let mid_result = _.find(booking_milestone, ['_id', current_mid])\n                if (_.size(mid_result)) {\n                    set_mpesa_detail(mid_result)\n                }\n            }\n        }\n    }\n\n    return (\n        <>\n            <div className=\" col-xs-12 col-md-12 col-sm-12 invoice_body_color  \" >\n                <div className=\"col-xs-12 col-md-12 col-sm-12 col-lg-6 main_content mx-lg-auto\">\n                    <div className=\"invoice_header mt-1\">\n                        <div className={detectMobile.isMobile() ? \"d-none\" : \"\"}>\n                            <a href=\"/bookings\">\n                                <Tooltip placement=\"left\" title=\"Back to Booking\">\n                                    <Icon className=\"ml-2 cursor_point\" type=\"arrow-left\" style={{ fontSize: \"26px\" }} />\n                                </Tooltip>\n                            </a>\n                        </div>\n                        <div>\n                            <img src={main} alt={'gigzzy'} className='w-50x object_fit cursor_point' />\n                        </div>\n                        <div className=\"invoice_info\">\n                            <div>INVOICE NO <b>{booking?.contract_ref}</b></div>\n                            <div> <small>{booking?.booking_date}</small></div>\n                            <div className=\"py-2\">\n                                <Tag color=\"green\">\n                                    {payment_status[booking.booking_status]}\n                                </Tag>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className={(mpesa_detail?.booking_status === 50 && mpesa_detail?.payment_type == \"c2b\") ? \"jumbotron p-1 mb-3 mx-3\" : \"d-none\"}>\n                        <Suspense fallback={\n                            <div class=\"spinner-border text-success\" role=\"status\">\n                                <span class=\"sr-only\">Loading...</span>\n                            </div>\n                        }>\n                            <C2B_CONTENT\n                                BusinessNumber={mpesa_detail?.ctob_shotcode}\n                                AmountNumber={mpesa_detail?.ctob_billRef}\n                                Amount={mpesa_detail?.budget} />\n                        </Suspense>\n                    </div>\n                    <div className=\"user_batch mx-3\">\n                        <p><b>{booking_user?.[0]?.name}</b></p>\n                        <p>Thanks for using gigzzy.</p>\n                    </div>\n                    <div className=\"total_fare\">\n                        <h5>TOTAL COST</h5>\n                        <h1><small></small>{booking_biding?.budget}</h1>\n                        {/* <h6>TOTAL HOURS : asd</h6> */}\n                    </div>\n                    <div className=\"fare_estimation col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex\">\n                        <div className=\"fare_breakup mr-sm-3\">\n                            <p className=\"title\">Fare Breakup</p>\n                            <ul>\n                                <li>\n                                    <label>Base Price</label>\n                                    <span>{booking_biding?.admin_fee}</span>\n                                </li>\n                            </ul>\n                        </div>\n                        <div className=\"tax_breakup \">\n                            <p className=\"title\">Service Breakup</p>\n                            <ul>\n                                <li>\n                                    <label className=\"d-flex align-items-center\">\n                                        Service Fee\n                                        <span className=\"ml-auto\">\n                                            {booking_biding?.service_fee}%\n                                        </span>\n                                    </label>\n                                </li>\n                                {/* <li>\n                                    <label>( added to your total fare)</label>\n                                </li> */}\n                            </ul>\n                        </div>\n                    </div>\n                    <div className=\"booking_details col-xs-12 col-md-12 col-sm-12\">\n                        <p className=\"title\">Booking Details</p>\n                        <ul>\n                            <li>\n                                <label>Service Type</label>\n                                <span>{booking_category?.[0]?.category_type === 1 ? booking_category?.[0]?.category_name : booking_category?.[0]?.subCategory_name}</span>\n                            </li>\n                            <li>\n                                <label>Booking Date</label>\n                                <span>{booking?.created_at}</span>\n                            </li>\n                        </ul>\n                    </div>\n                    {booking_milestone.length > 0 && <div className=\"booking_details col-xs-12 col-md-12 col-sm-12\">\n                        <p className=\"title\">Milestone Details</p>\n                        {booking_milestone.map((m_data, m_i) => {\n                            return (\n                                <>\n                                    <div className=\"jumbotron p-3 \">\n                                        <div>Milestone {m_i}</div>\n                                        <div className=\"justify-content-between d-flex\">\n                                            <div className=\"d-flex\">\n                                                Milestone Status\n                                            </div>\n                                            <div className='d-flex flex-grow-0'>\n                                                <Tag color=\"green\">{milestone_payment_status[m_data?.booking_status]}</Tag>\n                                            </div>\n                                        </div>\n                                        <div className=\"justify-content-between d-flex\">\n                                            <div className=\"d-flex\">\n                                                Budget\n                                            </div>\n                                            <div className=\"d-flex flex-grow-0\">\n                                                {m_data?.budget}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </>\n                            )\n                        })}\n\n                    </div>}\n                    <div className=\"member_section col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex\">\n                        <div className=\"user_details mr-sm-3\">\n                            <p className=\"title\">User Details</p>\n                            <ul>\n                                <li>\n                                    <label>Name</label>\n                                    <span>{booking_user?.[0]?.name}</span>\n                                </li>\n                                <li>\n                                    <label>Email</label>\n                                    <span>{booking_user?.[0]?.email}</span>\n                                </li>\n                                <li>\n                                    <label>Phone</label>\n                                    <span>{booking_user?.[0]?.phone_number}</span>\n                                </li>\n                            </ul>\n                        </div>\n                        <div className=\"provider_details\">\n                            <p className=\"title\">Provider Details</p>\n                            <ul>\n                                <li>\n                                    <label>Name</label>\n                                    <span>{booking_provider?.[0]?.name}</span>\n                                </li>\n                                <li>\n                                    <label>Email</label>\n                                    <span>{booking_provider?.[0]?.email}</span>\n                                </li>\n                                <li>\n                                    <label>Phone</label>\n                                    <span>{booking_provider?.[0]?.phone_number}</span>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div className=\"invoice_footer col-xs-12 m-3\">\n                        <hr />\n                        <p>\tThanks,</p>\n                        gigzzy Team\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default ContractInvoice\n"],"sourceRoot":""}