{"version":3,"sources":["image/bookLater.png","component/User/Book/AppointmentDetail.js"],"names":["module","exports","__webpack_require__","p","AppiontmentsEmpty","React","lazy","e","then","bind","memo","props","_useReactRouter","useReactRouter","history","_useState","match","useState","_useState2","Object","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","user_id","set_user_id","_useState3","_useState4","page","set_page","_useState5","_useState6","set_totalDocs","_useState7","_useState8","limit","_useState9","_useState10","hasMore","set_hasMore","_useState11","_useState12","loading","set_loading","_useState13","_useState14","appointment_data","set_appointment_data","get_contracts_pagination","useQuery","MY_CONTRACT_APPOINTMENTS","variables","role","useEffect","console","log","localStorage","getItem","JSON","parse","_id","fetch_data","_ref","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","input_data","finaldata","tem_total","appointment_datas","wrap","_context","prev","next","refetch","sent","data","pageInfo","totalDocs","concat","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","reverse","stop","apply","this","arguments","handleInfiniteOnLoad","_ref2","_callee2","_context2","_x","react__WEBPACK_IMPORTED_MODULE_4___default","createElement","className","react__WEBPACK_IMPORTED_MODULE_4__","react_infinite_scroller__WEBPACK_IMPORTED_MODULE_10___default","initialLoad","pageStart","loadMore","useWindow","antd_lib_spin__WEBPACK_IMPORTED_MODULE_8___default","map","_data$get_contract_al","antd_lib_card__WEBPACK_IMPORTED_MODULE_6___default","Grid","key","hoverable","onClick","view_booking","push","onBookingDetailModel","name","contract_ref","created_at","budget","height","width","alt","src","get_contract_all_files","small_image"],"mappings":"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","file":"static/js/146.4e351c53.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bookLater.3e207467.png\";","import React, { Suspense, useState, useEffect } from 'react'\nimport { My_APPOINTMENTS, MY_CONTRACT_APPOINTMENTS } from '../../../graphql/User/booking';\nimport Card from 'antd/lib/card';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport Skeleton from 'antd/lib/skeleton';\nimport Spin from 'antd/lib/spin';\nimport useReactRouter from 'use-react-router';\nimport InfiniteScroll from 'react-infinite-scroller';\n\nimport timer_icon from '../../../image/bookLater.png';\nconst AppiontmentsEmpty = React.lazy(() => import('./AppiontmentsEmpty'));\nfunction AppointmentDetail(props) {\n    const { history, match } = useReactRouter();\n    const [user_id, set_user_id] = useState('61306d9257602fcea82c5fb3');\n    const [page, set_page] = useState(1);\n    const [totalDocs, set_totalDocs] = useState(0);\n    const [limit, set_limit] = useState(10);\n    const [hasMore, set_hasMore] = useState(false)\n    const [loading, set_loading] = useState(false)\n    const [appointment_data, set_appointment_data] = useState([]);\n\n    const get_contracts_pagination = useQuery(MY_CONTRACT_APPOINTMENTS, {\n        variables: {\n            limit,\n            page: page,\n            user_id,\n            role: 1,\n        }\n    });\n\n    useEffect(() => {\n        console.log(get_contracts_pagination)\n        if (!localStorage.getItem('user')) {\n            set_user_id(JSON.parse(localStorage.getItem(\"user\"))._id)\n        } else {\n            set_user_id(\"61306d9257602fcea82c5fb3\")\n        }\n        fetch_data()\n    }, [localStorage.getItem('user')])\n\n    const fetch_data = async () => {\n        set_loading(true)\n        let input_data = {\n            limit,\n            page: page,\n            user_id,\n            role: 1,\n        }\n        let finaldata = await get_contracts_pagination.refetch(input_data)\n        if (finaldata.data && finaldata.data.get_contracts_pagination) {\n            let tem_total = finaldata.data.get_contracts_pagination.pageInfo.totalDocs\n            let appointment_datas = [...appointment_data, ...finaldata.data.get_contracts_pagination.data];\n            set_appointment_data(appointment_datas.reverse());\n            set_totalDocs(tem_total)\n            set_loading(false)\n            if (tem_total && tem_total > (page * limit)) {\n                set_page(page + 1)\n                set_hasMore(true)\n            } else {\n                set_hasMore(false)\n            }\n        }\n    }\n    const handleInfiniteOnLoad = async (data) => {\n        if (hasMore) {\n            fetch_data()\n        }\n    }\n    const onBookingDetailModel = (data) => {\n        if (props.view_booking) {\n            props.view_booking(true, data._id)\n        }\n        history.push(`/contract/user_view/${data._id}`)\n    }\n\n    return (\n        < div className=\"booking_infinite_container\" >\n            {!appointment_data &&\n                <Suspense>\n                    <AppiontmentsEmpty />\n                </Suspense>\n            }\n            <InfiniteScroll\n                initialLoad={false}\n                pageStart={1}\n                loadMore={handleInfiniteOnLoad}\n                hasMore={hasMore}\n                useWindow={true}\n            >\n                {loading && (\n                    <div className=\"d-flex justify-content-center my-4\">\n                        <Spin />\n                    </div>\n                )}\n                {appointment_data.map(data => {\n                    return (\n                        <Card.Grid key={data._id} hoverable={false} className='p-0 w-100 col-12 col-sm-6 cursor_point box_shadow_none'>\n                            <div className=\"d-flex justify-content-between m-2 border br_10\" onClick={() => { onBookingDetailModel(data) }}>\n                                <div className=\"d-flex flex-column w-100 justify-content-around px-2\">\n                                    <div className=\"normal_font_size bold\">\n                                        {data.name}\n                                    </div>\n                                    <div>\n                                        {data.contract_ref}\n                                    </div>\n                                    <div className=\"d-flex justify-content-between\">\n                                        <div>{data.created_at}</div>\n                                        <div>{data.budget}</div>\n                                    </div>\n                                </div>\n                                <div className=\"position-relative\">\n                                    <img className=\"br_10\" height=\"90\" width=\"100\" alt='' src={data?.get_contract_all_files[0]?.small_image} />\n                                    <div className=\"contract_tag\">Contract</div>\n                                </div>\n                            </div>\n                        </Card.Grid>\n                    )\n                })}\n            </InfiniteScroll>\n        </div >\n    )\n};\n\n\nexport default React.memo(AppointmentDetail);"],"sourceRoot":""}