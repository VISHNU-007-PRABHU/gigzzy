{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js","component/User/Book/contract/ProjectImages.js"],"names":["_objectDestructuringEmpty","obj","TypeError","__webpack_require__","d","__webpack_exports__","FileUpload","Input","TextArea","React","lazy","e","then","bind","ProjectImagesCategoryModel","Form","create","props","useHistory","_useState","useState","_useState2","Object","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","hide_common_upload","set_hide_common_upload","_useState3","_useState4","_useState5","_useState6","VisibleImageCategory","set_VisibleImageCategory","_useState7","_useState8","get_all_images_data","set_get_all_images","_useState9","_useState10","image_comman_data","set_image_comman_data","_useState11","_useState12","_useMutation","useMutation","UPDATE_CONTRACT_FILE","_useMutation2","ContractJobFileUpload","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_2__","_useMutation3","DELETE_CONTRACT_FILE","_useMutation4","DeleteContractJobFile","get_contract_files","useQuery","GET_CONTRACT_FILES","form","customform","useEffect","fetch_data","_ref","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","data","wrap","_context","prev","next","refetch","contract_id","localStorage","getItem","sent","length","stop","apply","this","arguments","onFileUpload","_ref2","_callee2","files","category","input_data","_args2","_context2","undefined","file","variables","status","_x","showImageModel","_ref3","_callee3","_context3","_x2","modelReturnFuncion","_ref4","_callee4","_context4","delete_contract_images","_ref5","_callee5","_id","_context5","console","log","_x3","react__WEBPACK_IMPORTED_MODULE_4___default","createElement","Fragment","antd__WEBPACK_IMPORTED_MODULE_6__","className","antd__WEBPACK_IMPORTED_MODULE_7__","span","antd__WEBPACK_IMPORTED_MODULE_8__","Item","label","getFieldDecorator","rules","valuePropName","custom_content","custom_sub_content","custom_class","gutter","map","all_image_items","antd__WEBPACK_IMPORTED_MODULE_9__","title","custom_category","images","image_data","md","loading","src","small_image","image_tag","onClick","antd__WEBPACK_IMPORTED_MODULE_10__","type","antd__WEBPACK_IMPORTED_MODULE_11__","onConfirm","antd__WEBPACK_IMPORTED_MODULE_12__","footer","centered","visible","onCancel","react__WEBPACK_IMPORTED_MODULE_4__","fallback","antd__WEBPACK_IMPORTED_MODULE_13__","active"],"mappings":"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","file":"static/js/31.958110dc.chunk.js","sourcesContent":["export default function _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n}","import React, { useState, useEffect, Suspense } from 'react'\nimport { Row, Col, Form, Input, Card, Icon, Popconfirm, Modal, Skeleton } from 'antd';\nimport { useHistory } from \"react-router-dom\";\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { UPDATE_CONTRACT_FILE, GET_CONTRACT_FILES, DELETE_CONTRACT_FILE } from '../../../../graphql/User/contract';\nconst { TextArea } = Input;\nconst FileUpload = React.lazy(() => import('../../../Comman/FileUpload'));\nconst ProjectImagesCategoryModel = React.lazy(() => import('./ProjectImageCategoryModel'));\n\nconst ProjectImages = (props) => {\n    let history = useHistory();\n    const [hide_common_upload, set_hide_common_upload] = useState(false);\n    const [user_data, setuser_data] = useState(\"\");\n    const [VisibleImageCategory, set_VisibleImageCategory] = useState(false);\n\n    const [get_all_images_data, set_get_all_images] = useState([])\n    const [image_comman_data, set_image_comman_data] = useState({})\n    const [loading, setloading] = useState(false);\n    const [ContractJobFileUpload, { }] = useMutation(UPDATE_CONTRACT_FILE)\n    const [DeleteContractJobFile, { }] = useMutation(DELETE_CONTRACT_FILE)\n    const get_contract_files = useQuery(GET_CONTRACT_FILES)\n    const form = props.customform;\n\n    useEffect(() => {\n        if (props.hide_common_upload) {\n            set_hide_common_upload(props.hide_common_upload)\n        }\n        fetch_data();\n    }, [props])\n\n    const fetch_data = async () => {\n        let data = await get_contract_files.refetch({ contract_id: localStorage.getItem('current_contract_id') })\n        if (data && data.data && data.data.get_contract_files && data.data.get_contract_files.length) {\n            set_get_all_images(data && data.data.get_contract_files)\n        }\n    }\n    const onFileUpload = async (files, category = \"others\") => {\n        let input_data = {\n            contract_id: localStorage.getItem('current_contract_id'),\n            file: [files],\n        }\n        if (category) {\n            input_data['category'] = category\n        }\n    \n        let final_data = await ContractJobFileUpload({ variables: input_data })\n        if (final_data.data.ContractJobFileUpload.status === \"success\") {\n            fetch_data()\n        }\n    }\n    const showImageModel = async (data) => {\n        set_image_comman_data(data)\n        set_VisibleImageCategory(true)\n    }\n    const modelReturnFuncion = async () => {\n        set_VisibleImageCategory(false)\n        fetch_data()\n    }\n    const delete_contract_images = async (_id) => {\n        let input_data = { _id }\n        let remove_data = await DeleteContractJobFile({ variables: input_data })\n        console.log(\"delete_contract_images -> input_data\", input_data)\n        fetch_data()\n    }\n    return (\n        <>\n            <Row className={hide_common_upload ? \"d-none\" : \"\"}>\n                <Col span={24}>\n                    <Form.Item label=\"\">\n                        {form.getFieldDecorator('file', {\n                            rules: [],\n                            valuePropName: 'fileList',\n                        })(\n                            <FileUpload\n                                custom_content=\"Upload document\"\n                                onFileUpload={onFileUpload}\n                                custom_sub_content=\"Upload your documents and site images etc..,\"\n                                custom_class=\"avatar-uploader d-flex justify-content-center px_view\"> </FileUpload>\n                        )}\n                    </Form.Item>\n                    <small>Supported File Formats : JPG, PNG</small>\n                </Col>\n            </Row>\n            <Row gutter={[16, 40]}>\n                <Col span={24}>\n                    {\n                        get_all_images_data.length ? get_all_images_data.map(all_image_items => {\n                            return (\n                                <Card className=\"mb-2 extra_radius_input document_section_contract\" title={<div className=\"d-flex justify-content-between align-items-center\">\n                                    <div>{all_image_items['_id']}</div>\n                                    <div className=\"d-flex\">\n                                        <FileUpload onFileUpload={onFileUpload} custom_category={all_image_items['_id']} custom_class=\"contract_header_images\"\n                                        ></FileUpload>\n                                    </div>\n                                </div>\n                                }>\n                                    <Row gutter={8}>\n                                    {all_image_items.images.map(image_data => {\n                                        return (\n                                        <Col md={{span:8}} className=\"gutter-row imgHolder position-relative cursor_point\">\n                                            <div className=\"h-100\">\n                                                <img loading=\"lazy\" className=\"rounded w-100 img_cover img-fluid loading h-100\" src={image_data.small_image} />\n                                                <span className=\"tags bold\">{image_data.image_tag}</span>\n                                                <span className=\"edit\" onClick={() => { showImageModel(image_data) }}><Icon type=\"edit\" className='f_25' /></span>\n                                                <Popconfirm title=\"Sure to delete this image ?\" onConfirm={() => delete_contract_images(image_data._id)}>\n                                                    <span className=\"delete\"><Icon type=\"delete\" className='f_25' /></span>\n                                                </Popconfirm>\n                                            </div>\n                                        </Col>\n                                        )\n                                    })}\n                                    </Row>\n                                </Card>\n                            )\n                        }) : <></>\n                    }\n                </Col>\n            </Row>\n            <Modal footer={null} centered visible={VisibleImageCategory} onCancel={() => { set_VisibleImageCategory(false) }}>\n                <Suspense fallback={<Skeleton active />}>\n                    <ProjectImagesCategoryModel modelReturnFuncion={modelReturnFuncion} image_comman_data={image_comman_data} />\n                </Suspense>\n            </Modal>\n        </>\n    )\n};\nexport default Form.create()(ProjectImages);\n"],"sourceRoot":""}