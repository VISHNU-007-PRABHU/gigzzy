{"version":3,"sources":["component/Admin/Roles/AdminRoles.js"],"names":["AdminRoles","props","_this","Object","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","_super","call","handleTableChange","_ref","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","pagination","pager","wrap","_context","prev","next","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__","current","setState","loading","client","query","GET_ADMIN_ROLES","variables","limit","pageSize","page","role","fetchPolicy","then","result","console","log","data","state","total","get_admin_roles","pageInfo","totalDocs","dataSource","stop","_x","apply","arguments","fetch_user","_ref2","_callee2","visible","_context2","_x2","handleDelete","_ref3","_callee3","_id","_context3","mutate","mutation","DELETE_ADMIN_ROLES","error","Alert_msg","delete_admin_roles","status","_x3","onFilter","_ref4","_callee4","value","datas","_context4","target","$or","name","$regex","$options","key","SEARCH_ROLE","_result$data","roles_search","_x4","search_user","simple","_this2","columns","title","width","render","text","record","react__WEBPACK_IMPORTED_MODULE_7___default","createElement","className","style","wordBreak","dataIndex","RoleViewFunction","length","_Comman_roles_permission_view__WEBPACK_IMPORTED_MODULE_16__","permission","onClick","history","push","concat","antd__WEBPACK_IMPORTED_MODULE_11__","type","theme","twoToneColor","antd__WEBPACK_IMPORTED_MODULE_12__","onConfirm","antd_es_input_Search__WEBPACK_IMPORTED_MODULE_15__","size","placeholder","onKeyUp","event","id","antd__WEBPACK_IMPORTED_MODULE_13__","rowClassName","onChange","React","Component","withRouter"],"mappings":"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","file":"static/js/16.b2b411ab.chunk.js","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { GET_ADMIN_ROLES, DELETE_ADMIN_ROLES, SEARCH_ROLE } from '../../../graphql/Admin/roles';\nimport { client } from \"../../../apollo\";\nimport { Table, Button, Icon, Popconfirm } from 'antd';\nimport { Alert_msg } from '../../Comman/alert_msg';\nimport Search from \"antd/es/input/Search\";\nimport RoleView, { RoleViewFunction } from '../../Comman/roles_permission_view'\nclass AdminRoles extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataSource: [],\n            search_user: [],\n            loading: false,\n            pagination: {\n                pageSize: 10,\n                current: 1,\n                total: 0,\n                simple: true,\n            }\n        };\n    }\n    componentDidMount() {\n        this.fetch_user();\n    }\n    handleTableChange = async pagination => {\n        const pager = { ...pagination };\n        pager.current = pagination.current;\n        this.setState({ loading: true });\n\n        await client.query({\n            query: GET_ADMIN_ROLES,\n            variables: { limit: pager.pageSize, page: pager.current, role: \"1\" },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            console.log(result.data);\n            const pagination = { ...this.state.pagination };\n            pagination.total = result.data.get_admin_roles.pageInfo.totalDocs;\n            pagination.current = result.data.get_admin_roles.pageInfo.page;\n            console.log(pagination);\n            this.setState({ pagination, loading: false, dataSource: result.data.get_admin_roles.data });\n        });\n    };\n\n    fetch_user = async (visible) => {\n        this.setState({ loading: true });\n\n        await client.query({\n            query: GET_ADMIN_ROLES,\n            variables: { limit: this.state.pagination.pageSize, page: this.state.pagination.current, role: \"1\" },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            const pagination = { ...this.state.pagination };\n            pagination.total = result.data.get_admin_roles.pageInfo.totalDocs;\n            this.setState({ loading: false, pagination, dataSource: result.data.get_admin_roles.data });\n        });\n    }\n\n    handleDelete = async (_id) => {\n        await client.mutate({\n            mutation: DELETE_ADMIN_ROLES,\n            variables: { _id: _id },\n        }).then((result, loading, error) => {\n            Alert_msg(result.data.delete_admin_roles);\n            if (result.data.delete_admin_roles.status === 'success') {\n                this.fetch_user();\n            }\n        });\n    }\n\n    onFilter = async (value) => {\n        console.log(value.target.value);\n        var datas = { $or: [{ 'name': { $regex: '.*' + value.target.value + '.*', $options: 'i' } }, { 'key': { $regex: '.*' + value.target.value + '.*', $options: 'i' } }] }\n        await client.query({\n            query: SEARCH_ROLE,\n            variables: { data: datas },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            this.setState({ dataSource: result?.data?.roles_search });\n        });\n    }\n    render() {\n        const { dataSource } = this.state;\n\n        const columns = [\n            {\n                title: \"Roles Name\",\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Roles Name\">{record?.name}</span>;\n                }\n\n            },\n            {\n                title: () => {\n                    return <div>\n                        <div className=\"d-block\">\n                            <div>\n                                Key Roles\n                            </div>\n                        </div>\n                    </div>\n                },\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Key Roles\" style={{ wordBreak: \"keep-all\" }}>{record?.key}</span>;\n                }\n\n            },\n            {\n                title: \"Action\",\n                dataIndex: 'operation',\n                className: RoleViewFunction('edit_roles') || RoleViewFunction('delete_roles') ? '' : 'd-none',\n                render: (text, record) =>\n                    this.state.dataSource.length >= 1 ? (\n                        <span title=\"....\" className=\"d-flex d-sm-inline justify-content-around\">\n                            <RoleView permission=\"edit_roles\">\n                                <span className='cursor_point' onClick={() => { this.props.history.push(`/admin-roles/add/${record._id}`); }}><Icon type=\"edit\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='mx-3 f_25' /></span>\n                            </RoleView>\n                            <RoleView permission=\"delete_roles\">\n                                <Popconfirm title=\"Sure to delete the user ?\" onConfirm={() => this.handleDelete(record._id)}>\n                                    <Icon type=\"delete\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='f_25' />\n                                </Popconfirm>\n                            </RoleView>\n                        </span>\n                    ) : null,\n            },\n        ];\n\n\n        return (\n            <div>\n                <div className='mx-2 mx-sm-0 mb-3'>\n                    <Search size=\"large\" placeholder=\"search\" onKeyUp={(event) => { this.onFilter(event) }} loading={false} />\n                </div>\n                <div id=\"no-more-tables\">\n                    <Table\n                        rowClassName={() => 'editable-row'}\n                        className='table_shadow'\n                        dataSource={dataSource}\n                        columns={columns}\n                        size=\"middle\"\n                        pagination={this.state.pagination}\n                        onChange={this.handleTableChange}\n                        loading={this.state.loading}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(AdminRoles);"],"sourceRoot":""}