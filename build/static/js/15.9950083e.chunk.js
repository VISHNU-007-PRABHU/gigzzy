(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1919:function(t,e,n){"use strict";n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"a",function(){return f}),n.d(e,"c",function(){return _}),n.d(e,"b",function(){return p});var a,r,c,o,i,s=n(18),l=n(19),u=n.n(l),d=u()(a||(a=Object(s.a)(["\n    mutation UPDATECONTRACT($_id:ID,$contract_data:JSON){\n        update_contract(_id:$_id,contract_data:$contract_data){\n            msg\n            status\n            _id\n        }\n    }\n"]))),m=u()(r||(r=Object(s.a)(["\n    mutation UPDATECONTRACTFILE($contract_id:ID,$file:[Upload],$category:String,$image_tag:String,$_id:ID){\n        ContractJobFileUpload(contract_id:$contract_id,file:$file,category:$category,image_tag:$image_tag,_id:$_id){\n            msg\n            status\n            _id\n        }\n    }\n"]))),f=u()(c||(c=Object(s.a)(["\n    mutation DELETECONTRACTFILE($_id:ID){\n        DeleteContractJobFile(_id:$_id){\n            msg\n            status\n        }\n    }\n"]))),_=u()(o||(o=Object(s.a)(["\n    query GETCONTRACTFILES($contract_id:ID){\n        get_contract_files(contract_id:$contract_id) {\n            _id\n            images{\n                small_image\n                image_tag\n                doc_category\n                _id\n            }\n        }\n    }\n"]))),p=u()(i||(i=Object(s.a)(["\n    query GETCONTRACT($contract_id:ID){\n        get_contracts(contract_id:$contract_id){\n            name\n            description\n            current_page\n            address_id\n            budget\n            timeline\n            timeline_type\n            terms_condition\n            contract_ref\n            get_contract_category{\n                category_name\n                subCategory_name\n                category_type\n            }\n            get_contract_all_files(contract_id:$contract_id){\n                small_image\n            }\n            get_contract_files(contract_id:$contract_id) {\n                _id\n                images{\n                    small_image\n                    large_image\n                    image_tag\n                }\n            }\n        }\n    }\n"])))},1922:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},1937:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var a=n(1),r=n(2),c=n(959),o=n(23),i=n(90);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t){return function(){var e,n=m(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=m(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"===typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,e)}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(m,a["Component"]);var e,n,r,s=d(m);function m(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),(t=s.apply(this,arguments)).renderSteps=function(e){var n=e.getPrefixCls,r=n("steps",t.props.prefixCls),i=n("",t.props.iconPrefix),s={finish:a.createElement(o.a,{type:"check",className:"".concat(r,"-finish-icon")}),error:a.createElement(o.a,{type:"close",className:"".concat(r,"-error-icon")})};return a.createElement(c.default,l({icons:s},t.props,{prefixCls:r,iconPrefix:i}))},t}return e=m,(n=[{key:"render",value:function(){return a.createElement(i.a,null,this.renderSteps)}}])&&u(e.prototype,n),r&&u(e,r),m}();_.Step=c.default.Step,_.defaultProps={current:0},_.propTypes={prefixCls:r.string,iconPrefix:r.string,current:r.number}},1968:function(t,e,n){"use strict";n.r(e);var a=n(147),r=n(3),c=n.n(r),o=n(5),i=n(53),s=n(1),l=n.n(s),u=n(1937),d=n(276),m=n(194),f=n(449),_=n(1911),p=n(77),g=n(23),b=n(20),y=n(145),E=n(1919),O=n(828),v=n(343),j=n.n(v),A=n(1922),h=n.n(A),S=n(160),w=n(262),N=n(344),k=n.n(N),C=n(108),x=n.n(C),I=u.a.Step,P=[{id:1,title:"First",content:"Project Details",status:"wait"},{id:2,title:"Second",content:"Project Location",status:"wait"},{id:3,title:"Last",content:"Budget",status:"wait"},{id:4,title:"final",content:"Document",status:"wait"}],T={offset:8,span:16},R=l.a.lazy(function(){return n.e(34).then(n.bind(null,1942))}),$=l.a.lazy(function(){return n.e(33).then(n.bind(null,1943))}),D=l.a.lazy(function(){return n.e(22).then(n.bind(null,1944))}),F=l.a.lazy(function(){return n.e(21).then(n.bind(null,1945))});e.default=_.a.create()(function(t){var e=t.form,n=j()(),r=n.history,v=n.match,A=Object(s.useState)(!1),N=Object(i.a)(A,2),C=N[0],z=N[1],J=Object(s.useState)(""),L=Object(i.a)(J,2),X=L[0],q=L[1],B=Object(s.useState)(0),Q=Object(i.a)(B,2),U=Q[0],G=Q[1],Y=Object(s.useState)(""),M=Object(i.a)(Y,2),K=(M[0],M[1],Object(s.useState)("")),W=Object(i.a)(K,2),V=W[0],Z=W[1],H=Object(s.useState)({}),tt=Object(i.a)(H,2),et=tt[0],nt=tt[1],at=Object(s.useState)(P),rt=Object(i.a)(at,2),ct=rt[0],ot=rt[1],it=Object(y.a)(E.d),st=Object(i.a)(it,2),lt=st[0],ut=(st[1].loading,Object(y.b)(E.b));Object(s.useEffect)(Object(o.a)(c.a.mark(function t(){var e,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("user")&&Z(JSON.parse(localStorage.getItem("user"))._id),!localStorage.getItem("current_contract_id")){t.next=7;break}return t.next=4,ut.refetch({contract_id:localStorage.getItem("current_contract_id")});case 4:e=t.sent,console.log("ContractSteper -> finaldata",e),5==e.data.get_contracts[0].current_page?r.push({pathname:"/contract/view/".concat(localStorage.getItem("current_contract_id"))}):(nt(e.data.get_contracts[0]),q(null===(n=e.data.get_contracts[0])||void 0===n?void 0:n.address_id),G(Number(e.data.get_contracts[0].current_page)+1));case 7:case"end":return t.stop()}},t)})),[localStorage.getItem("current_contract_id")]);var dt=function(e){t.form.validateFields(function(){var t=Object(o.a)(c.a.mark(function t(n,r){var o,i,u,f;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("next -> values",r),n){t.next=17;break}if(2!==U||r.budget&&r.timeline&&r.timeline_type){t.next=5;break}return Object(b.a)({status:"failed",msg:"Please fill all the data"}),t.abrupt("return",!1);case 5:return o={},0===U&&(r.category_id=v.params.id,localStorage.getItem("user")&&(r.user_id=JSON.parse(localStorage.getItem("user"))._id)),X&&(r.address_id=X),5===e&&(r.contract_status="12"),r.current_page=U,r&&x()(r)&&(o.contract_data=[r]),localStorage.getItem("current_contract_id")&&(o._id=localStorage.getItem("current_contract_id")),t.next=14,lt({variables:o});case 14:i=t.sent,Object(b.a)(i.data.update_contract),"success"===i.data.update_contract.status&&(5===e?d.a.success({footer:null,content:l.a.createElement(s.Suspense,{fallback:l.a.createElement(m.a,{active:!0})},l.a.createElement(F,{id:o._id}))}):(localStorage.setItem("current_contract_id",i.data.update_contract._id),u=Object(a.a)(ct),f=k()(u,["id",e]),u[f].status="finish",ot(u),G(U+1)));case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())};return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{size:"large",className:"contract_steper",labelPlacement:"vertical",current:U},ct&&ct.map(function(t){return l.a.createElement(I,{key:t.title,status:t.status,icon:l.a.createElement("img",{src:h.a}),title:t.content})})),l.a.createElement("div",{className:"d-flex justify-content-center pt-5"},l.a.createElement(_.a,Object.assign({},T,{name:"nest-messages",className:"w-50"}),l.a.createElement(s.Suspense,{fallback:l.a.createElement(m.a,{active:!0})},l.a.createElement("div",{className:5===U?"":"d-none"},l.a.createElement("h4",{className:"text-center"},"Review and publish your project"),l.a.createElement(R,{contract_detail_data:et,current:U,customform:e}),l.a.createElement($,{contract_detail_data:et,current:U,customform:e}),l.a.createElement(D,{hide_common_upload:!0,contract_detail_data:et,current:U,customform:e})),l.a.createElement("div",{className:3===U?"contract_images_section":"d-none"},l.a.createElement(D,{contract_detail_data:et,current:U,customform:e})),l.a.createElement("div",{className:2===U?"":"d-none"},l.a.createElement($,{contract_detail_data:et,current:U,customform:e})),l.a.createElement("div",{className:0===U?"":"d-none"},l.a.createElement(R,{contract_detail_data:et,current:U,customform:e})),l.a.createElement("div",{className:1===U?"":"d-none"},l.a.createElement(S.b.Provider,{value:{location_change:function(t){q(t._id)}}},l.a.createElement(p.a,{type:"primary",className:"mb-3",onClick:function(){z(!0)}},l.a.createElement("div",{className:"normal_font_size d-flex justify-content-around align-items-center"},l.a.createElement("div",null,"Add new address"),l.a.createElement(g.a,{type:"plus"}))),l.a.createElement(O.a,{user_id:V,address_id:X})),l.a.createElement(w.default,{visible:C}))),l.a.createElement("div",{className:"steps-action justify-content-between d-flex"},U<ct.length-1&&l.a.createElement(p.a,{type:"primary",className:"w-50",onClick:function(){return dt(ct[U].id)}},l.a.createElement("div",{className:"normal_font_size"},"Next")),U===ct.length-1&&l.a.createElement(p.a,{type:"primary",className:"w-50",onClick:function(){return function(){var t=P.map(function(t){return t.status="finish"});ot(t),G(4),f.a.success("Processing complete!")}()}},l.a.createElement("div",{className:"normal_font_size"},"Done")),5===U&&l.a.createElement(p.a,{type:"primary",className:"w-50",onClick:function(){return dt(5)}},l.a.createElement("div",{className:"normal_font_size"},"Post Project")),U>=0&&l.a.createElement(p.a,{style:{marginLeft:8},className:"w-50",onClick:function(){return function(t){if(1===t)r.push({pathname:"/"});else{var e=Object(a.a)(ct);e[k()(e,["id",t])].status="wait",ot(e),G(U-1)}}(ct[U].id)}},l.a.createElement("div",{className:"normal_font_size"},"Back"))))))})}}]);
//# sourceMappingURL=15.9950083e.chunk.js.map