(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1924:function(t,e,n){"use strict";n.d(e,"d",function(){return m}),n.d(e,"e",function(){return d}),n.d(e,"a",function(){return _}),n.d(e,"c",function(){return f}),n.d(e,"b",function(){return p});var a,r,c,o,i,s=n(18),l=n(19),u=n.n(l),m=u()(a||(a=Object(s.a)(["\n    mutation UPDATECONTRACT($_id:ID,$contract_data:JSON){\n        update_contract(_id:$_id,contract_data:$contract_data){\n            msg\n            status\n            _id\n        }\n    }\n"]))),d=u()(r||(r=Object(s.a)(["\n    mutation UPDATECONTRACTFILE($contract_id:ID,$file:[Upload],$category:String,$image_tag:String,$_id:ID){\n        ContractJobFileUpload(contract_id:$contract_id,file:$file,category:$category,image_tag:$image_tag,_id:$_id){\n            msg\n            status\n            _id\n        }\n    }\n"]))),_=u()(c||(c=Object(s.a)(["\n    mutation DELETECONTRACTFILE($_id:ID){\n        DeleteContractJobFile(_id:$_id){\n            msg\n            status\n        }\n    }\n"]))),f=u()(o||(o=Object(s.a)(["\n    query GETCONTRACTFILES($contract_id:ID){\n        get_contract_files(contract_id:$contract_id) {\n            _id\n            images{\n                small_image\n                image_tag\n                doc_category\n                _id\n            }\n        }\n    }\n"]))),p=u()(i||(i=Object(s.a)(["\n    query GETCONTRACT($contract_id:ID,$location_code:String){\n        get_contracts(contract_id:$contract_id,location_code:$location_code){\n            name\n            description\n            current_page\n            address_id\n            booking_status\n            budget(code:$location_code)\n            timeline\n            biding_id\n            timeline_type\n            terms_condition\n            contract_ref\n            biding_count\n            created_at\n            get_contract_category{\n                category_name\n                subCategory_name\n                category_type\n            }\n            get_contract_all_files(contract_id:$contract_id){\n                small_image\n            }\n            get_contract_files(contract_id:$contract_id) {\n                _id\n                images{\n                    small_image\n                    large_image\n                    image_tag\n                }\n            }\n            get_provider_user {\n                img_url\n                first_name\n                email\n                phone_no\n                user_type\n                last_name\n                _id\n                get_company_root_detail(root: true) {\n                    company_name\n                    company_website\n                    company_category\n                    get_company_images {\n                    small_image\n                    }\n                }\n            }\n            get_user {\n                img_url\n                first_name\n                user_type\n                last_name\n                email\n                phone_no\n                _id\n                get_company_root_detail(root: true) {\n                    company_name\n                    company_website\n                    company_category\n                    get_company_images {\n                        small_image\n                    }\n                }\n            }\n        }\n    }\n"])))},1929:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},2017:function(t,e,n){"use strict";n.r(e);var a=n(148),r=n(3),c=n.n(r),o=n(5),i=n(38),s=n(1),l=n.n(s),u=n(2),m=n(966),d=n(23),_=n(89);function f(t){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function g(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function b(t){return function(){var e,n=y(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=y(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"===typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,e)}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(c,s["Component"]);var e,n,a,r=b(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.apply(this,arguments)).renderSteps=function(e){var n=e.getPrefixCls,a=n("steps",t.props.prefixCls),r=n("",t.props.iconPrefix),c={finish:s.createElement(d.a,{type:"check",className:"".concat(a,"-finish-icon")}),error:s.createElement(d.a,{type:"close",className:"".concat(a,"-error-icon")})};return s.createElement(m.default,p({icons:c},t.props,{prefixCls:a,iconPrefix:r}))},t}return e=c,(n=[{key:"render",value:function(){return s.createElement(_.a,null,this.renderSteps)}}])&&g(e.prototype,n),a&&g(e,a),c}();O.Step=m.default.Step,O.defaultProps={current:0},O.propTypes={prefixCls:u.string,iconPrefix:u.string,current:u.number};var v=n(282),j=n(192),h=n(450),A=n(1911),S=n(74),w=n(20),N=n(101),k=n(1924),C=n(414),x=n(140),I=n.n(x),P=n(1929),T=n.n(P),$=n(118),R=n(266),D=n(348),F=n.n(D),z=n(106),J=n.n(z),L=O.Step,X=[{id:1,title:"First",content:"Project Details",status:"wait"},{id:2,title:"Second",content:"Project Location",status:"wait"},{id:3,title:"Last",content:"Budget",status:"wait"},{id:4,title:"final",content:"Document",status:"wait"}],q={offset:8,span:16},B=l.a.lazy(function(){return n.e(51).then(n.bind(null,2010))}),Q=l.a.lazy(function(){return n.e(50).then(n.bind(null,2011))}),U=l.a.lazy(function(){return n.e(29).then(n.bind(null,2012))}),G=l.a.lazy(function(){return n.e(28).then(n.bind(null,2013))});e.default=A.a.create()(function(t){var e=t.form,n=I()(),r=n.history,u=n.match,m=Object(s.useState)(!1),_=Object(i.a)(m,2),f=_[0],p=_[1],g=Object(s.useState)(""),b=Object(i.a)(g,2),y=b[0],E=b[1],x=Object(s.useState)(0),P=Object(i.a)(x,2),D=P[0],z=P[1],Y=Object(s.useState)(""),M=Object(i.a)(Y,2),K=(M[0],M[1],Object(s.useState)("")),W=Object(i.a)(K,2),V=W[0],Z=W[1],H=Object(s.useState)({}),tt=Object(i.a)(H,2),et=tt[0],nt=tt[1],at=Object(s.useState)(X),rt=Object(i.a)(at,2),ct=rt[0],ot=rt[1],it=Object(N.a)(k.d),st=Object(i.a)(it,2),lt=st[0],ut=(st[1].loading,Object(N.b)(k.b));Object(s.useEffect)(Object(o.a)(c.a.mark(function t(){var e,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("user")&&Z(JSON.parse(localStorage.getItem("user"))._id),!localStorage.getItem("current_contract_id")){t.next=7;break}return t.next=4,ut.refetch({contract_id:localStorage.getItem("current_contract_id")});case 4:e=t.sent,console.log("ContractSteper -> finaldata",e),5==e.data.get_contracts[0].current_page?r.push({pathname:"/contract/view/".concat(localStorage.getItem("current_contract_id"))}):(nt(e.data.get_contracts[0]),E(null===(n=e.data.get_contracts[0])||void 0===n?void 0:n.address_id),z(Number(e.data.get_contracts[0].current_page)+1));case 7:case"end":return t.stop()}},t)})),[localStorage.getItem("current_contract_id")]);var mt=function(e){t.form.validateFields(function(){var t=Object(o.a)(c.a.mark(function t(n,r){var o,i,m,d;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("next -> values",r),n){t.next=17;break}if(2!==D||r.budget&&r.timeline&&r.timeline_type){t.next=5;break}return Object(w.a)({status:"failed",msg:"Please fill all the data"}),t.abrupt("return",!1);case 5:return o={},0===D&&(r.category_id=u.params.id,localStorage.getItem("user")&&(r.user_id=JSON.parse(localStorage.getItem("user"))._id)),y&&(r.address_id=y),5===e&&(r.contract_status="12"),r.current_page=D,r&&J()(r)&&(o.contract_data=[r]),localStorage.getItem("current_contract_id")&&(o._id=localStorage.getItem("current_contract_id")),t.next=14,lt({variables:o});case 14:i=t.sent,Object(w.a)(i.data.update_contract),"success"===i.data.update_contract.status&&(5===e?v.a.success({footer:null,content:l.a.createElement(s.Suspense,{fallback:l.a.createElement(j.a,{active:!0})},l.a.createElement(G,{id:o._id}))}):(localStorage.setItem("current_contract_id",i.data.update_contract._id),m=Object(a.a)(ct),d=F()(m,["id",e]),m[d].status="finish",ot(m),z(D+1)));case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())};return l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{size:"large",className:"contract_steper",labelPlacement:"vertical",current:D},ct&&ct.map(function(t){return l.a.createElement(L,{key:t.title,status:t.status,icon:l.a.createElement("img",{src:T.a}),title:t.content})})),l.a.createElement("div",{className:"d-flex justify-content-center pt-5"},l.a.createElement(A.a,Object.assign({},q,{name:"nest-messages",className:"w-50"}),l.a.createElement(s.Suspense,{fallback:l.a.createElement(j.a,{active:!0})},l.a.createElement("div",{className:5===D?"":"d-none"},l.a.createElement("h4",{className:"text-center"},"Review and publish your project"),l.a.createElement(B,{contract_detail_data:et,current:D,customform:e}),l.a.createElement(Q,{contract_detail_data:et,current:D,customform:e}),l.a.createElement(U,{hide_common_upload:!0,contract_detail_data:et,current:D,customform:e})),l.a.createElement("div",{className:3===D?"contract_images_section":"d-none"},l.a.createElement(U,{contract_detail_data:et,current:D,customform:e})),l.a.createElement("div",{className:2===D?"":"d-none"},l.a.createElement(Q,{contract_detail_data:et,current:D,customform:e})),l.a.createElement("div",{className:0===D?"":"d-none"},l.a.createElement(B,{contract_detail_data:et,current:D,customform:e})),l.a.createElement("div",{className:1===D?"":"d-none"},l.a.createElement($.c.Provider,{value:{location_change:function(t){E(t.user_address[0]._id)}}},l.a.createElement(S.a,{type:"primary",className:"mb-3",onClick:function(){p(!0)}},l.a.createElement("div",{className:"normal_font_size d-flex justify-content-around align-items-center"},l.a.createElement("div",null,"Add new address"),l.a.createElement(d.a,{type:"plus"}))),l.a.createElement(C.a,{user_id:V,address_id:y})),l.a.createElement(R.default,{visible:f}))),l.a.createElement("div",{className:"steps-action justify-content-between d-flex"},D<ct.length-1&&l.a.createElement(S.a,{type:"primary",className:"w-50",onClick:function(){return mt(ct[D].id)}},l.a.createElement("div",{className:"normal_font_size"},"Next")),D===ct.length-1&&l.a.createElement(S.a,{type:"primary",className:"w-50",onClick:function(){return function(){var t=X.map(function(t){return t.status="finish"});ot(t),z(4),h.a.success("Processing complete!")}()}},l.a.createElement("div",{className:"normal_font_size"},"Done")),5===D&&l.a.createElement(S.a,{type:"primary",className:"w-50",onClick:function(){return mt(5)}},l.a.createElement("div",{className:"normal_font_size"},"Post Project")),D>=0&&l.a.createElement(S.a,{style:{marginLeft:8},className:"w-50",onClick:function(){return function(t){if(1===t)r.push({pathname:"/"});else{var e=Object(a.a)(ct);e[F()(e,["id",t])].status="wait",ot(e),z(D-1)}}(ct[D].id)}},l.a.createElement("div",{className:"normal_font_size"},"Back"))))))})}}]);
//# sourceMappingURL=22.6e20ba66.chunk.js.map