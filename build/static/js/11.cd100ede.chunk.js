(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1920:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},1921:function(t,e,n){"use strict";n.d(e,"c",function(){return l}),n.d(e,"d",function(){return f}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return m});var a,r,c,o,i=n(18),s=n(19),u=n.n(s),l=u()(a||(a=Object(i.a)(["\n    mutation UPDATECONTRACT($_id:ID,$contract_data:JSON){\n        update_contract(_id:$_id,contract_data:$contract_data){\n            msg\n            status\n            _id\n        }\n    }\n"]))),f=u()(r||(r=Object(i.a)(["\n    mutation UPDATECONTRACTFILE($contract_id:ID,$file:[Upload]){\n        ContractJobFileUpload(contract_id:$contract_id,file:$file){\n            msg\n            status\n            _id\n        }\n    }\n"]))),d=u()(c||(c=Object(i.a)(["\n    query GETCONTRACTFILES($contract_id:ID){\n        get_contract_files(contract_id:$contract_id) {\n            _id\n            images{\n                small_image\n                large_image\n                image_tag\n            }\n        }\n    }\n"]))),m=u()(o||(o=Object(i.a)(["\n    query GETCONTRACT($contract_id:ID){\n        get_contracts(contract_id:$contract_id){\n            name\n            description\n            current_page\n            address_id\n            budget\n            timeline\n            timeline_type\n            terms_condition\n            get_contract_files(contract_id:$contract_id) {\n                _id\n                images{\n                    small_image\n                    large_image\n                    image_tag\n                }\n            }\n        }\n    }\n"])))},1931:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var a=n(1),r=n(2),c=n(959),o=n(23),i=n(90);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function l(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function f(t){return function(){var e,n=d(t);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=d(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"===typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,e)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(d,a["Component"]);var e,n,r,s=f(d);function d(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(t=s.apply(this,arguments)).renderSteps=function(e){var n=e.getPrefixCls,r=n("steps",t.props.prefixCls),i=n("",t.props.iconPrefix),s={finish:a.createElement(o.a,{type:"check",className:"".concat(r,"-finish-icon")}),error:a.createElement(o.a,{type:"close",className:"".concat(r,"-error-icon")})};return a.createElement(c.default,u({icons:s},t.props,{prefixCls:r,iconPrefix:i}))},t}return e=d,(n=[{key:"render",value:function(){return a.createElement(i.a,null,this.renderSteps)}}])&&l(e.prototype,n),r&&l(e,r),d}();p.Step=c.default.Step,p.defaultProps={current:0},p.propTypes={prefixCls:r.string,iconPrefix:r.string,current:r.number}},1959:function(t,e,n){"use strict";n.r(e);var a=n(148),r=n(3),c=n.n(r),o=n(5),i=n(53),s=n(1),u=n.n(s),l=n(1931),f=n(447),d=n(1911),m=n(194),p=n(77),_=n(23),b=n(20),g=n(146),y=n(1921),O=n(826),v=n(343),j=n.n(v),A=n(1920),E=n.n(A),h=n(161),w=n(262),S=n(344),N=n.n(S),k=n(108),x=n.n(k),C=l.a.Step,P=[{id:1,title:"First",content:"Project Details",status:"wait"},{id:2,title:"Second",content:"Project Location",status:"wait"},{id:3,title:"Last",content:"Budget",status:"wait"},{id:4,title:"final",content:"Document",status:"wait"}],I={offset:8,span:16},T=u.a.lazy(function(){return n.e(27).then(n.bind(null,1935))}),R=u.a.lazy(function(){return n.e(26).then(n.bind(null,1936))}),F=u.a.lazy(function(){return n.e(28).then(n.bind(null,1937))});e.default=d.a.create()(function(t){var e=t.form,n=j()(),r=n.history,v=n.match,A=Object(s.useState)(!1),S=Object(i.a)(A,2),k=S[0],D=S[1],J=Object(s.useState)(""),$=Object(i.a)(J,2),z=$[0],X=$[1],q=Object(s.useState)(0),B=Object(i.a)(q,2),L=B[0],Q=B[1],U=Object(s.useState)(""),G=Object(i.a)(U,2),Y=(G[0],G[1],Object(s.useState)("")),M=Object(i.a)(Y,2),K=M[0],W=M[1],V=Object(s.useState)({}),Z=Object(i.a)(V,2),H=Z[0],tt=Z[1],et=Object(s.useState)(P),nt=Object(i.a)(et,2),at=nt[0],rt=nt[1],ct=Object(g.a)(y.c),ot=Object(i.a)(ct,2),it=ot[0],st=(ot[1].loading,Object(g.b)(y.a));return Object(s.useEffect)(Object(o.a)(c.a.mark(function t(){var e,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("user")&&W(JSON.parse(localStorage.getItem("user"))._id),!localStorage.getItem("current_contract_id")){t.next=8;break}return t.next=4,st.refetch({contract_id:localStorage.getItem("current_contract_id")});case 4:n=t.sent,tt(n.data.get_contracts[0]),X(null===(e=n.data.get_contracts[0])||void 0===e?void 0:e.address_id),Q(Number(n.data.get_contracts[0].current_page)+1);case 8:case"end":return t.stop()}},t)})),[localStorage.getItem("current_contract_id")]),u.a.createElement(u.a.Fragment,null,u.a.createElement(l.a,{size:"large",className:"contract_steper",labelPlacement:"vertical",current:L},at&&at.map(function(t){return u.a.createElement(C,{key:t.title,status:t.status,icon:u.a.createElement("img",{src:E.a}),title:t.content})})),u.a.createElement("div",{className:"d-flex justify-content-center pt-5"},u.a.createElement(d.a,Object.assign({},I,{name:"nest-messages",className:"w-50"}),u.a.createElement(s.Suspense,{fallback:u.a.createElement(m.a,{active:!0})},u.a.createElement("div",{className:3===L?"contract_images_section":"d-none"},u.a.createElement(F,{contract_detail_data:H,current:L,customform:e})),u.a.createElement("div",{className:2===L?"":"d-none"},u.a.createElement(R,{contract_detail_data:H,current:L,customform:e})),u.a.createElement("div",{className:0===L?"":"d-none"},u.a.createElement(T,{contract_detail_data:H,current:L,customform:e})),u.a.createElement("div",{className:1===L?"":"d-none"},u.a.createElement(h.b.Provider,{value:{location_change:function(t){X(t._id)}}},u.a.createElement(p.a,{type:"primary",className:"mb-3",onClick:function(){D(!0)}},u.a.createElement("div",{className:"normal_font_size d-flex justify-content-around align-items-center"},u.a.createElement("div",null,"Add new address"),u.a.createElement(_.a,{type:"plus"}))),u.a.createElement(O.a,{user_id:K,address_id:z})),u.a.createElement(w.default,{visible:k}))),u.a.createElement("div",{className:"steps-action justify-content-between d-flex"},L<at.length-1&&u.a.createElement(p.a,{type:"primary",className:"w-50",onClick:function(){return e=at[L].id,void t.form.validateFields(function(){var t=Object(o.a)(c.a.mark(function t(n,r){var o,i,s,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("next -> values",r),n){t.next=16;break}if(2!==L||r.budget&&r.timeline&&r.timeline_type){t.next=5;break}return Object(b.a)({status:"failed",msg:"Please fill all the data"}),t.abrupt("return",!1);case 5:return o={},0===L&&(r.category_id=v.params.id,localStorage.getItem("user")&&(r.user_id=JSON.parse(localStorage.getItem("user"))._id)),z&&(r.address_id=z),r.current_page=L,r&&x()(r)&&(o.contract_data=[r]),localStorage.getItem("current_contract_id")&&(o._id=localStorage.getItem("current_contract_id")),t.next=13,it({variables:o});case 13:i=t.sent,Object(b.a)(i.data.update_contract),"success"===i.data.update_contract.status&&(localStorage.setItem("current_contract_id",i.data.update_contract._id),s=Object(a.a)(at),u=N()(s,["id",e]),s[u].status="finish",rt(s),Q(L+1));case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}());var e}},u.a.createElement("div",{className:"normal_font_size"},"Next")),L===at.length-1&&u.a.createElement(p.a,{type:"primary",className:"w-50",onClick:function(){return function(){e.validateFields(function(){var t=Object(o.a)(c.a.mark(function t(e,n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("next -> values",n);case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}());var t=Object(a.a)(at);t[x()(t)-1].status="finish",rt(t),f.a.success("Processing complete!")}()}},u.a.createElement("div",{className:"normal_font_size"},"Done")),L>=0&&u.a.createElement(p.a,{style:{marginLeft:8},className:"w-50",onClick:function(){return function(t){if(1===t)r.push({pathname:"/"});else{var e=Object(a.a)(at);e[N()(e,["id",t])].status="wait",rt(e),Q(L-1)}}(at[L].id)}},u.a.createElement("div",{className:"normal_font_size"},"Back"))))))})}}]);
//# sourceMappingURL=11.cd100ede.chunk.js.map