(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{1060:function(e,n,t){e.exports=t.p+"static/media/main.c57228a8.png"},2017:function(e,n,t){"use strict";t.r(n);var o,a=t(709),i=t.n(a),r=t(714),l=t(693),c=t(694),s=t(745),_=t(696),m=t(695),d=t(760),g=t(0),u=t.n(g),p=t(718),b=t(74),k=t(950),y=(t(332),t(329),t(146)),$=t(761),v=t.n($),E=t(979),h=t(1060),f=t.n(h),I=u.a.lazy(function(){return t.e(14).then(t.bind(null,1520))}),w={0:"welcome Gizzy",50:"waiting for payment confirmation",10:"Base price paid",11:"Booking canceled",4:"Job started",13:"Ongoing",14:"Completed"},S=v()(o||(o=Object(d.a)(['\nsubscription SENDACCEPTMSG($_id:ID,$booking_id:ID){\n    send_accept_msg (_id:$_id,booking_id:$booking_id){\n      _id\n      status\n      booking_status\n      payment_type\n      mpeas_payment_callback\n      base_price(code:"symbol")\n      extra_price(code:"symbol")\n      ctob_shotcode\n      ctob_billRef\n    }\n}']))),N=function(e){Object(_.a)(t,e);var n=Object(m.a)(t);function t(){var e;Object(l.a)(this,t);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={currency_symbol:"Ksh",collapsed:!1,booking:[],booking_user:[],booking_provider:[],booking_category:[],booking_status:0,payment_type:"",mpeas_payment_callback:!1,base_price:"0.00",extra_price:"0.00",ctob_shotcode:"",ctob_billRef:""},e.onToggle=function(n){console.log(n),e.setState({collapsed:n})},e.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))},e.fetch_booking=function(n){y.a.query({query:E.f,variables:{_id:n},fetchPolicy:"no-cache"}).then(function(n){var t,o,a,i,r,l,c,s,_,m,d;console.log(n),e.current_booking_status(e.props.match.params.id),e.setState({booking:n.data.booking,booking_category:null===(t=n.data.booking[0])||void 0===t?void 0:t.booking_category,booking_user:null===(o=n.data.booking[0])||void 0===o?void 0:o.booking_user,booking_provider:null===(a=n.data.booking[0])||void 0===a?void 0:a.booking_provider,message:null===(i=n.data.booking[0])||void 0===i?void 0:i.get_booking_message,booking_status:null===(r=n.data.booking[0])||void 0===r?void 0:r.booking_status,payment_type:(null===(l=n.data.booking[0])||void 0===l?void 0:l.payment_type)||"",base_price:(null===(c=n.data.booking[0])||void 0===c?void 0:c.base_price)||"",extra_price:(null===(s=n.data.booking[0])||void 0===s?void 0:s.extra_price)||"",ctob_shotcode:(null===(_=n.data.booking[0])||void 0===_?void 0:_.ctob_shotcode)||"",ctob_billRef:(null===(m=n.data.booking[0])||void 0===m?void 0:m.ctob_billRef)||"",mpeas_payment_callback:null===(d=n.data.booking[0])||void 0===d?void 0:d.mpeas_payment_callback})})},e.current_booking_status=function(){var n=Object(r.a)(i.a.mark(function n(t){var o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Invoice -> current_booking_status -> b_id",t),o=Object(s.a)(e),n.next=4,y.a.subscribe({query:S,variables:{_id:JSON.parse(localStorage.getItem("user"))._id,booking_id:t}}).subscribe({next:function(e,n,t){var a;(console.log("Invoice -> next -> error",t),n&&console.log("load"),e)&&(console.log(e.data.send_accept_msg),o.setState({booking_status:e.data.send_accept_msg.booking_status,payment_type:(null===(a=e.data.send_accept_msg)||void 0===a?void 0:a.payment_type)||""}))}});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(this.isMobile()),this.fetch_booking(this.props.match.params.id)}},{key:"render",value:function(){var e,n,t=this.state,o=t.ctob_billRef,a=t.ctob_shotcode,i=t.mpeas_payment_callback,r=t.base_price,l=t.extra_price,c=t.booking,s=t.booking_category,_=t.booking_provider,m=t.booking_user,d=t.payment_type,y=t.booking_status;return console.log("Invoice -> render -> booking_status",y),console.log("Invoice -> render -> mpeas_payment_callback",i),console.log("Invoice -> render -> payment_option",d),u.a.createElement("div",{className:" col-xs-12 col-md-12 col-sm-12 invoice_body_color  "},u.a.createElement("div",{className:"col-xs-12 col-md-12 col-sm-12 col-lg-6 main_content mx-lg-auto"},u.a.createElement("div",{className:"invoice_header mt-1"},u.a.createElement("div",{className:this.isMobile()?"d-none":""},u.a.createElement("a",{href:"/bookings"},u.a.createElement(p.a,{placement:"left",title:"Back to Booking"},u.a.createElement(b.a,{className:"ml-2 cursor_point",type:"arrow-left",style:{fontSize:"26px"}})))),u.a.createElement("div",null,u.a.createElement("img",{src:f.a,alt:"gigzzy",className:"w-50x object_fit cursor_point"})),u.a.createElement("div",{className:"invoice_info"},u.a.createElement("div",null,"INVOICE NO ",u.a.createElement("b",null,c[0]?c[0].booking_ref:"")),u.a.createElement("div",null," ",u.a.createElement("small",null,c[0]?c[0].booking_date:"")),u.a.createElement("div",{className:"py-2"},u.a.createElement(k.a,{color:"green"},w[this.state.booking_status])))),u.a.createElement("div",{className:50!=y&&1!=i||"c2b"!=d?"d-none":"jumbotron p-1 mb-3 mx-3"},u.a.createElement(g.Suspense,{fallback:u.a.createElement("div",{class:"spinner-border text-success",role:"status"},u.a.createElement("span",{class:"sr-only"},"Loading..."))},u.a.createElement(I,{BusinessNumber:a,AmountNumber:o,Amount:i?l:r}))),u.a.createElement("div",{className:"user_batch mx-3"},u.a.createElement("p",null,u.a.createElement("b",null,m[0]?null===(e=m[0])||void 0===e?void 0:e.name:"")),u.a.createElement("p",null,"Thanks for using gigzzy.")),u.a.createElement("div",{className:"total_fare"},u.a.createElement("h5",null,"TOTAL COST"),u.a.createElement("h1",null,u.a.createElement("small",null),c[0]?c[0].total:"")),u.a.createElement("div",{className:"fare_estimation col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex"},u.a.createElement("div",{className:"fare_breakup mr-sm-3"},u.a.createElement("p",{className:"title"},"Fare Breakup"),u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement("label",null,"Base Price"),u.a.createElement("span",null,c[0]?c[0].base_price:"")),u.a.createElement("li",null,u.a.createElement("label",null,"Extra Price "),u.a.createElement("span",null,c[0]?c[0].extra_price:"")))),u.a.createElement("div",{className:"tax_breakup "},u.a.createElement("p",{className:"title"},"Service Breakup"),u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement("label",{className:"d-flex align-items-center"},"Service Fee",u.a.createElement(p.a,{placement:"right",title:"".concat(null===(n=c[0])||void 0===n?void 0:n.service_fee," %")},u.a.createElement(b.a,{className:"ml-2 cursor_point",type:"info-circle"})),u.a.createElement("span",{className:"ml-auto"},c[0]?c[0].admin_fee:"")))))),u.a.createElement("div",{className:"booking_details col-xs-12 col-md-12 col-sm-12"},u.a.createElement("p",{className:"title"},"Booking Details"),u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement("label",null,"Service Type"),u.a.createElement("span",null,s[0]?1===s[0].category_type?s[0].category_name:s[0].subCategory_name:"")),u.a.createElement("li",null,u.a.createElement("label",null,"Booking Date"),u.a.createElement("span",null,c[0]?c[0].booking_date:"")),u.a.createElement("li",null,u.a.createElement("label",null,"Scheduled Date"),u.a.createElement("span",null,c[0]?c[0].booking_date:"")))),u.a.createElement("div",{className:"member_section col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex"},u.a.createElement("div",{className:"user_details mr-sm-3"},u.a.createElement("p",{className:"title"},"User Details"),u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement("label",null,"Name"),u.a.createElement("span",null,m[0]?m[0].name:"")),u.a.createElement("li",null,u.a.createElement("label",null,"Email"),u.a.createElement("span",null,m[0]?m[0].email:"")),u.a.createElement("li",null,u.a.createElement("label",null,"Phone"),u.a.createElement("span",null,m[0]?m[0].phone_number:"")))),u.a.createElement("div",{className:"provider_details"},u.a.createElement("p",{className:"title"},"Provider Details"),u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement("label",null,"Name"),u.a.createElement("span",null,_[0]?_[0].name:"")),u.a.createElement("li",null,u.a.createElement("label",null,"Email"),u.a.createElement("span",null,_[0]?_[0].email:"")),u.a.createElement("li",null,u.a.createElement("label",null,"Phone"),u.a.createElement("span",null,_[0]?_[0].phone_number:""))))),u.a.createElement("div",{className:"invoice_footer col-xs-12 m-3"},u.a.createElement("hr",null),u.a.createElement("p",null," Thanks,"),"gigzzy Team")))}}]),t}(u.a.Component);n.default=N},979:function(e,n,t){"use strict";t.d(n,"b",function(){return E}),t.d(n,"a",function(){return h}),t.d(n,"g",function(){return f}),t.d(n,"i",function(){return I}),t.d(n,"j",function(){return w}),t.d(n,"f",function(){return S}),t.d(n,"e",function(){return N}),t.d(n,"d",function(){return D}),t.d(n,"k",function(){return x}),t.d(n,"l",function(){return j}),t.d(n,"h",function(){return O}),t.d(n,"c",function(){return A});var o,a,i,r,l,c,s,_,m,d,g,u,p,b,k,y=t(760),$=t(761),v=t.n($),E=(v()(o||(o=Object(y.a)(['\nsubscription SENDACCEPTMSG($_id:ID,$booking_id:ID){\n    send_accept_msg (_id:$_id,booking_id:$booking_id){\n      _id\n      status\n      description\n      booking_ref\n      booking_date\n      base_price(code:"symbol")\n      ctob\n      extra_price\n      msg_date\n      msg_time\n      booking_provider {\n        _id\n        name\n        lat\n        lng\n        img_url\n        rating\n      }\n    }\n}']))),v()(a||(a=Object(y.a)(['\nsubscription getPendingDataSubscription($_id: ID\n$role: Int\n$booking_status: Int\n){\n  get_my_appointments(_id: $_id, role: $role, booking_status: $booking_status)\n  {\n    _id\n    status\n    description\n    base_price(code:"symbol")\n    ctob\n    booking_date\n    jobStart_time\n    jobEnd_time\n    booking_status\n    user_image_url\n    start_job_image_url\n    end_job_image_url\n    booking_type\n    user_msg_count\n    provider_msg_count\n    user_msg_is_read\n    provider_msg_is_read\n    booking_category {\n      category_name\n      subCategory_name\n      category_type\n      description\n      _id\n      base_price\n      hour_price\n      hour_limit\n      img_url\n      booking_parent_category{\n        category_name\n      }\n    }\n    booking_user {\n      name\n      lat\n      lng\n      phone_no\n      phone_number\n      _id\n      img_url\n    }\n    booking_provider {\n      name\n      lat\n      lng\n      phone_no\n      _id\n      img_url\n    }\n    # find_kilometre(lat: $lat, lng: $lng) {\n    #   kilometre\n    # }\n  }\n}']))),v()(i||(i=Object(y.a)(["\nsubscription TESTS($online:String){\n    test (online:$online){\n      status\n      msg\n    }\n}"]))),v()(r||(r=Object(y.a)(['\n mutation ADDBOOKING($user_id:ID,$local_location_code:String,$location_code:String,$booking_time:String,$booking_hour:String,$booking_type:Int,$category_id:ID,$category_type:Int,$lat:Float,$lng:Float,$hours:String,$description:String,$booking_status:Int,$booking_date:String,$file:[Upload]) {\n    add_booking(\n      user_id: $user_id,\n      category_id: $category_id\n      location_code:$location_code\n      local_location_code:$local_location_code\n      category_type: $category_type\n      lat: $lat\n      lng: $lng\n      hours: $hours\n      description: $description\n      booking_status: $booking_status,\n      booking_type:$booking_type,\n      booking_date:$booking_date,\n      booking_time:$booking_time,\n      booking_hour:$booking_hour,\n      file:$file\n    ) {\n      id\n      description\n      location\n      lat\n      lng\n      user_image_url\n      payment_option(code:$local_location_code)\n      user(_id:$user_id) {\n        name\n      }\n      provider {\n        name\n        _id\n      }\n      category(_id: $category_id, category_type: $category_type) {\n        category_name\n        subCategory_name\n        base_price\n        hour_price\n        hour_limit\n        description\n        img_url\n        ParentCategoryCurrency(root: true,location_code:$location_code) {\n          base_price(code:"symbol")\n        }\n      }\n      hours\n    }\n  }\n  '])))),h=v()(l||(l=Object(y.a)(["\nmutation AcceptJobMutation($role: Int\n  $booking_id: ID\n  $provider_id: ID\n  $booking_status:Int\n  $phone_number:String\n  $payment_type:String\n  $payment_option:String\n  $location_code:String\n  $stripe_token:String\n){\n  manage_booking(\n    role:$role\n    booking_id: $booking_id\n    provider_id: $provider_id\n    booking_status: $booking_status\n    phone_number : $phone_number\n    payment_type:$payment_type\n    payment_option:$payment_option\n    location_code:$location_code\n    stripe_token:$stripe_token\n  ){\n    status\n    msg\n  }\n}"]))),f=v()(c||(c=Object(y.a)(["\nmutation MANAGECONTRACT($role: Int\n  $contract_id: ID\n  $provider_id: ID\n  $biding_id:ID\n  $user_id:ID\n  $booking_status:Int\n  $phone_number:String\n  $payment_type:String\n  $payment_option:String\n  $location_code:String\n  $stripe_token:String\n){\n  manage_contract_booking(\n    role:$role\n    contract_id: $contract_id\n    biding_id:$biding_id\n    provider_id: $provider_id\n    user_id:$user_id\n    booking_status: $booking_status\n    phone_number : $phone_number\n    payment_type:$payment_type\n    payment_option:$payment_option\n    location_code:$location_code\n    stripe_token:$stripe_token\n  ){\n    status\n    msg\n  }\n}"]))),I=v()(s||(s=Object(y.a)(["\n    query MY_CONTRACT_APPOINTMENTS($user_id:ID,$role:Int,$limit:Int,$page:Int){\n      get_contracts_pagination(user_id:$user_id,role:$role,limit:$limit,page:$page){\n        pageInfo{\n          totalDocs\n          page\n        }\n        data{\n          _id\n          name\n          contract_ref\n          budget\n          created_at\n          get_contract_category {\n            category_type\n            subCategory_name\n            category_name\n          }\n          get_contract_all_files(limit:1){\n              small_image\n            }\n        }\n    }\n}"]))),w=v()(_||(_=Object(y.a)(['\nquery My_appointments($_id : ID,$role : Int,$booking_status : Int,$limit:Int,$page:Int)\n{\n  get_my_appointments(_id:$_id,role:$role,booking_status:$booking_status,limit:$limit,page:$page){\n    pageInfo{\n      totalDocs\n      page\n    }\n    data{\n            _id\n          booking_status\n          booking_date\n          base_price(code:"symbol")\n          ctob\n          booking_ref\n          booking_type\n          booking_date\n          user_msg_count\n          provider_msg_count\n          user_msg_is_read\n          provider_msg_is_read\n          booking_category{\n          img_url\n          category_type\n          category_name\n          subCategory_name\n          is_parent\n            booking_parent_category{\n              category_name\n              img_url\n            }\n          }\n          booking_provider{\n            name\n            img_url\n            phone_number\n          }\n        }\n    }\n}']))),S=v()(m||(m=Object(y.a)(['\nquery GETPARTICULARBOOKING($_id : ID,$location_code:String) {\n  booking(_id:$_id,location_code:$location_code) {\n        _id\n        description\n        user_image_url\n        booking_status\n        booking_date\n        created_at\n        job_start_time\n        job_end_time\n        start_job_image_url\n        end_job_image_url\n        booking_ref\n        base_price(code:"symbol")\n        extra_price(code:"symbol")\n        extra_hour_price(code:"symbol")\n        total(code:"symbol")\n        final_payment(code:"symbol")\n        admin_fee(code:"symbol")\n        charge_id\n        MpesaReceiptNumber\n        mpeas_payment_callback\n        ctob\n        ctob_shotcode\n        ctob_billRef\n        service_fee\n        lat\n        lng\n        provider_fee\n        payment_status\n        payment_type\n        user_rating\n        user_rating_status\n        actual_time\n        user_msg_count\n          provider_msg_count\n          user_msg_is_read\n          provider_msg_is_read\n      user_comments\n      provider_rating\n      provider_comments\n      booking_type\n      payment_option(code:$location_code)\n      get_booking_message(booking_id:$_id){\n          message\n          createdAt\n          role\n          msg_date\n          msg_time\n        }\n        booking_category {\n          category_name\n          category_type\n          subCategory_name\n          description\n          _id\n          base_price\n          hour_price\n          hour_limit\n          img_url\n          booking_parent_category {\n            category_name\n            category_name\n          }\n        }\n        booking_provider{\n          name\n          email\n          phone_number\n          _id\n          img_url\n          lat\n          lng\n        }\n        booking_user {\n          name\n          phone_number\n          email\n          img_url\n          location\n        }\n      }\n    }']))),N=v()(d||(d=Object(y.a)(["\n  query GETMSG($booking_id : ID,$user_id:ID,$provider_id:ID) {\n    get_message(booking_id:$booking_id){\n      message\n      createdAt\n      role\n      msg_date\n      msg_time\n      user(_id:$user_id){\n        name\n        img_url\n      }\n      provider(_id:$provider_id){\n        name\n        img_url\n      }\n    }\n  }"]))),D=v()(g||(g=Object(y.a)(["\nmutation ADDMSG($booking_id : ID,$user_id:ID,$data:String){ \n  add_message(\n    role:1\n    booking_id: $booking_id\n    user_id: $user_id\n    message: $data\n  ) {\n    message\n  }\n}"]))),x=v()(u||(u=Object(y.a)(["\nmutation UPDATE_MANUAL_PAYMENT($booking_id : ID,$role:Int,){ \n  update_manual_payment(role:$role,booking_id: $booking_id) {\n    msg\n    status\n  }\n}"]))),j=v()(p||(p=Object(y.a)(["\nmutation UPDATE_MSG_COUNT($booking_id : ID,$role:Int,){ \n  update_msg_is_read(role:$role,booking_id: $booking_id) {\n    msg\n    status\n  }\n}"]))),O=v()(b||(b=Object(y.a)(["\nsubscription MSGSUB($booking_id : ID,$user_id:ID,$provider_id:ID){ \n\tmessageSent(booking_id:$booking_id){\n    \tmessage\n      createdAt\n      msg_date\n      msg_time\n      role\n      user(_id:$user_id){\n        name\n        img_url\n      }\n      provider(_id:$provider_id){\n        name\n        img_url\n      }\n  }\n}"]))),A=v()(k||(k=Object(y.a)(["\nmutation ADDCOMMENTS($booking_id : ID,$user_id:ID,$rating:Int,$comments:String){ \n  addRating(\n    role:1\n    booking_id: $booking_id\n    user_id: $user_id\n    rating: $rating\n    comments:$comments\n  ) {\n    user_rating_status\n    msg\n    status\n  }\n}"])))}}]);
//# sourceMappingURL=134.43e2eb47.chunk.js.map