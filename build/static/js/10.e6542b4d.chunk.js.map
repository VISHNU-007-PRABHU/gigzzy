{"version":3,"sources":["component/Admin/subcategory/MultiCurrency.js"],"names":["Panel","Collapse","Title","Typography","MultiCurrencyFrom","React","lazy","Form","create","props","form","useReactRouter","match","history","useState","currency_data","set_currency_data","useMutation","REMOVE_CATEGORY_CURRENCY","DeleteCategoryCurrency","loading","add_currency_visible","set_add_currency_visible","set_loading","GetCategoryCurrency","useQuery","GET_CATEGORY_CURRENCY","useEffect","params","id","getCurrencyResponse","a","input_data","pagination","category_id","refetch","finaldata","data","genExtra","event","_id","variables","remove_data","Alert_msg","status","stopPropagation","from_parent","spinning","className","level","type","icon","onClick","accordion","length","map","cdata","i","key","header","get_parent_currency","name","title","onConfirm","e","theme","twoToneColor","fallback","active","currency_disable","description","visible","onCancel","footer"],"mappings":"wSAQQA,EAAUC,IAAVD,MACAE,EAAUC,IAAVD,MAEFE,EAAoBC,IAAMC,MAAK,kBAAM,mCA6F5BC,cAAKC,QAALD,EA5FO,SAACE,GACFA,EAATC,KAAR,IACA,EAA2BC,MAAVC,GAAjB,EAAQC,QAAR,EAAiBD,OACjB,EAA2CE,mBAAS,IAApD,mBAAOC,EAAP,KAAsBC,EAAtB,KACA,EAAuDF,mBAAS,IAAhE,mBACA,GADA,UAC6DG,YAAYC,MAAzE,mBAAOC,EAAP,KACA,GADA,KAAiCC,QACwBN,oBAAS,IAAlE,mBAAOO,EAAP,KAA6BC,EAA7B,KACA,EAA+BR,oBAAS,GAAxC,mBAAOM,EAAP,KAAgBG,EAAhB,KACMC,EAAsBC,YAASC,KAErCC,qBAAU,WACFf,EAAMgB,OAAOC,IACbC,MAEL,IAEH,IAAMA,EAAmB,uCAAG,kCAAAC,EAAA,6DACxBR,GAAY,GACRS,EAAa,CAAEC,YAAY,EAAOC,YAAatB,EAAMgB,OAAOC,IAFxC,SAGFL,EAAoBW,QAAQH,GAH1B,OAGpBI,EAHoB,OAIxBpB,EAAiB,UAACoB,EAAUC,YAAX,iBAAC,EAAgBb,2BAAjB,aAAC,EAAqCa,MACvDd,GAAY,GALY,2CAAH,qDAQnBe,EAAQ,uCAAG,WAAOC,EAAOV,GAAd,iBAAAE,EAAA,6DACTC,EAAa,CACbQ,IAAKX,GAETN,GAAY,GAJC,SAKWJ,EAAuB,CAAEsB,UAAWT,IAL/C,OAKTU,EALS,OAMbC,YAAUD,EAAYL,KAAKlB,wBAC4B,YAAnDuB,EAAYL,KAAKlB,uBAAuByB,QACxCd,IAEJS,EAAMM,kBAVO,2CAAH,wDAaRC,EAAc,WAChBhB,IACAR,GAAyB,IAG7B,OAAQ,oCACJ,kBAAC,IAAD,CAAMyB,SAAU3B,GACZ,yBAAK4B,UAAU,sCACX,kBAAC9C,EAAD,CAAO+C,MAAO,EAAGD,UAAW,IA/C9B,YAkDE,kBAAC,IAAD,CAAQA,UAAU,4BAA4BE,KAAK,UAAUC,KAAK,OAAOC,QAAS,WAAQ9B,GAA0BD,KAApH,iBAIJ,kBAAC,IAAD,CAAUgC,WAAS,GACbtC,GAAiBA,EAAcuC,QAAUvC,EAAcwC,KAAI,SAACC,EAAOC,GAAO,IAAD,IACvE,OACI,kBAACzD,GAAD,GAAO0D,IAAKD,EAAGzD,OAAK,EAACgD,UAAU,uBAAuBW,OAClD,yBAAKX,UAAU,kCACX,oCAAMQ,QAAN,IAAMA,GAAN,UAAMA,EAAOI,2BAAb,aAAM,EAA4BC,MAClC,gCAHR,oBAMSJ,GANT,sBAMmB,6BACX,kBAAC,IAAD,CAAYK,MAAM,2DAA2DC,UAAW,SAACC,GAAQ1B,EAAS0B,EAAGR,EAAMhB,OAC/G,kBAAC,IAAD,CAAMU,KAAK,SAASe,MAAM,UAAUC,aAAa,UAAUlB,UAAU,YARjF,GAYI,kBAAC,WAAD,CAAUmB,SAAU,kBAAC,IAAD,CAAUC,QAAM,KAChC,kBAAChE,EAAD,CAAmB0C,YAAaA,EAAaT,KAAMmB,EAAOa,kBAAkB,UAM1FtD,IAAkBA,EAAcuC,QAAU,yBAAKN,UAAU,qCACvD,kBAAC,IAAD,CAAOsB,aAAa,OAKhC,kBAAC,IAAD,CACIC,QAASlD,EACTyC,MAAM,mBACNU,SAAU,WAAQlD,GAA0BD,IAC5CoD,OAAQ,MAER,kBAAC,WAAD,CAAUN,SAAU,kBAAC,IAAD,CAAUC,QAAM,KAChC,kBAAChE,EAAD,CAAmBW,cAAeA,EAAe+B,YAAaA","file":"static/js/10.e6542b4d.chunk.js","sourcesContent":["import React, { useState, useEffect, Suspense } from 'react'\r\nimport { Collapse, Form, Typography, Skeleton, Icon, Button, Modal, Popconfirm, Empty,Spin } from 'antd';\r\nimport { REMOVE_CATEGORY_CURRENCY } from \"../../../graphql/Admin/sub_category\";\r\nimport { useMutation, useQuery } from '@apollo/react-hooks';\r\nimport useReactRouter from 'use-react-router';\r\nimport { Alert_msg } from \"../../Comman/alert_msg\";\r\nimport { GET_CATEGORY_CURRENCY } from '../../../graphql/Admin/sub_category';\r\n\r\nconst { Panel } = Collapse;\r\nconst { Title } = Typography;\r\nconst title = \"Currency\"\r\nconst MultiCurrencyFrom = React.lazy(() => import('./MultiCurrencyFrom'));\r\nconst MultiCurrency = (props) => {\r\n    const { form } = props;\r\n    const { history, match } = useReactRouter();\r\n    const [currency_data, set_currency_data] = useState([]);\r\n    const [local_currency_data, set_local_currency_data] = useState({});\r\n    const [DeleteCategoryCurrency, { loading: removeLoading }] = useMutation(REMOVE_CATEGORY_CURRENCY)\r\n    const [add_currency_visible, set_add_currency_visible] = useState(false);\r\n    const [loading, set_loading] = useState(false);\r\n    const GetCategoryCurrency = useQuery(GET_CATEGORY_CURRENCY);\r\n\r\n    useEffect(() => {\r\n        if (match.params.id) {\r\n            getCurrencyResponse()\r\n        }\r\n    }, [])\r\n\r\n    const getCurrencyResponse = async () => {\r\n        set_loading(true)\r\n        let input_data = { pagination: false, category_id: match.params.id }\r\n        let finaldata = await GetCategoryCurrency.refetch(input_data)\r\n        set_currency_data(finaldata.data?.GetCategoryCurrency?.data)\r\n        set_loading(false)\r\n    }\r\n\r\n    const genExtra = async (event, id) => {\r\n        let input_data = {\r\n            _id: id\r\n        }\r\n        set_loading(true)\r\n        let remove_data = await DeleteCategoryCurrency({ variables: input_data });\r\n        Alert_msg(remove_data.data.DeleteCategoryCurrency)\r\n        if (remove_data.data.DeleteCategoryCurrency.status === \"success\") {\r\n            getCurrencyResponse()\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const from_parent = () => {\r\n        getCurrencyResponse()\r\n        set_add_currency_visible(false)\r\n    }\r\n\r\n    return (<>\r\n        <Spin spinning={loading}>\r\n            <div className=\"d-flex justify-content-between m-3\">\r\n                <Title level={4} className={\"\"}>\r\n                    {title}\r\n                </Title>\r\n                <Button className=\"align-items-center d-flex\" type=\"primary\" icon=\"plus\" onClick={() => { set_add_currency_visible(!add_currency_visible) }}>\r\n                    Add Currency\r\n                </Button>\r\n            </div>\r\n            <Collapse accordion >\r\n                {(currency_data && currency_data.length && currency_data.map((cdata, i) => {\r\n                    return (\r\n                        <Panel key={i} Panel className=\"multi_currency_panel\" header={\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <div>{cdata?.get_parent_currency?.name}</div>\r\n                                <div>\r\n                                </div>\r\n                            </div>}\r\n                            key={i} extra={<div>\r\n                                <Popconfirm title=\"Sure to delete because may be under some more bookings ?\" onConfirm={(e) => { genExtra(e, cdata._id) }}>\r\n                                    <Icon type=\"delete\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='f_25' />\r\n                                </Popconfirm>\r\n                            </div>\r\n                            }>\r\n                            <Suspense fallback={<Skeleton active />}>\r\n                                <MultiCurrencyFrom from_parent={from_parent} data={cdata} currency_disable={true} />\r\n                            </Suspense>\r\n\r\n                        </Panel>\r\n                    )\r\n                }))}\r\n                {!currency_data && !currency_data.length && <div className=\"d-flex justify-content-center p-4\">\r\n                    <Empty description={false} />\r\n                </div>\r\n                }\r\n            </Collapse>\r\n        </Spin>\r\n        <Modal\r\n            visible={add_currency_visible}\r\n            title=\"Add new currency\"\r\n            onCancel={() => { set_add_currency_visible(!add_currency_visible) }}\r\n            footer={null}\r\n        >\r\n            <Suspense fallback={<Skeleton active />}>\r\n                <MultiCurrencyFrom currency_data={currency_data} from_parent={from_parent} />\r\n            </Suspense>\r\n        </Modal>\r\n    </>);\r\n};\r\nexport default Form.create()((MultiCurrency));\r\n\r\n\r\n"],"sourceRoot":""}