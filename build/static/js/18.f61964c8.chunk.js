(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1924:function(e,t,a){"use strict";a.d(t,"d",function(){return l}),a.d(t,"e",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"c",function(){return g}),a.d(t,"b",function(){return _});var n,c,r,i,o,s=a(18),A=a(19),u=a.n(A),l=u()(n||(n=Object(s.a)(["\n    mutation UPDATECONTRACT($_id:ID,$contract_data:JSON){\n        update_contract(_id:$_id,contract_data:$contract_data){\n            msg\n            status\n            _id\n        }\n    }\n"]))),d=u()(c||(c=Object(s.a)(["\n    mutation UPDATECONTRACTFILE($contract_id:ID,$file:[Upload],$category:String,$image_tag:String,$_id:ID){\n        ContractJobFileUpload(contract_id:$contract_id,file:$file,category:$category,image_tag:$image_tag,_id:$_id){\n            msg\n            status\n            _id\n        }\n    }\n"]))),m=u()(r||(r=Object(s.a)(["\n    mutation DELETECONTRACTFILE($_id:ID){\n        DeleteContractJobFile(_id:$_id){\n            msg\n            status\n        }\n    }\n"]))),g=u()(i||(i=Object(s.a)(["\n    query GETCONTRACTFILES($contract_id:ID){\n        get_contract_files(contract_id:$contract_id) {\n            _id\n            images{\n                small_image\n                image_tag\n                doc_category\n                _id\n            }\n        }\n    }\n"]))),_=u()(o||(o=Object(s.a)(["\n    query GETCONTRACT($contract_id:ID,$location_code:String){\n        get_contracts(contract_id:$contract_id,location_code:$location_code){\n            name\n            description\n            current_page\n            address_id\n            booking_status\n            budget(code:$location_code)\n            timeline\n            biding_id\n            timeline_type\n            terms_condition\n            contract_ref\n            biding_count\n            created_at\n            currenct_milestone_id\n            currenct_milestone_status\n            ctob_billRef\n            ctob_shotcode\n            ctob\n            get_contract_category{\n                category_name\n                subCategory_name\n                category_type\n            }\n            get_contract_all_files(contract_id:$contract_id){\n                small_image\n            }\n            get_contract_files(contract_id:$contract_id) {\n                _id\n                images{\n                    small_image\n                    large_image\n                    image_tag\n                }\n            }\n            get_provider_user {\n                img_url\n                first_name\n                email\n                phone_no\n                user_type\n                last_name\n                _id\n                get_company_root_detail(root: true) {\n                    company_name\n                    company_website\n                    company_category\n                    get_company_images {\n                    small_image\n                    }\n                }\n            }\n            get_user {\n                img_url\n                first_name\n                user_type\n                last_name\n                email\n                phone_no\n                _id\n                get_company_root_detail(root: true) {\n                    company_name\n                    company_website\n                    company_category\n                    get_company_images {\n                        small_image\n                    }\n                }\n            }\n        }\n    }\n"])))},1972:function(e,t,a){var n={"./step0.png":1973,"./step1.png":1974,"./step2.png":1975,"./step3.png":1976,"./step4.png":1977,"./step5.png":1978};function c(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=r,e.exports=c,c.id=1972},1973:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},1974:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},1975:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAATCAYAAACk9eypAAAABHNCSVQICAgIfAhkiAAAATdJREFUKFN9k41RAkEMhd0OtIOzArECtQKlAo8K5CoQKvCsQOgAKgAqkA6UCsQK1u/dJDdhhzMzmUvevpdkfy5dmOWcLwmf8RofGbzn26aUls5LCiCL8BGIvu7fLcEY4TFZ5U0gq5oI6niPP5pqhWAswRTgzUBVWYGJmIl3xfqDBJrzBl9CqEOuGguwyQmHJFv1Cd9vXONFuybRFC/4Th1c0ACoWym4AptFgTZ4h3ebQr8g1vHK5niLf+IVvlaHSJgiegfT4tFEOpDa4kYCJboDN42lrrInq+xrt34PP0EwFB7oXvlNx7GGBA2CNj4NbWzIfjVa9zScUWy+FM4hzwRGQUX+dabFAWyk6icCJXRRlddC1L0vx/oOYTR/W4LWkHW0vZ0T6N/QAfQb/Vdgo+mx7am+Lff0By1fi6/SK19OAAAAAElFTkSuQmCC"},1976:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOCAYAAADwikbvAAAABHNCSVQICAgIfAhkiAAAAH1JREFUKFNj/A8EDCQARiCAKWeku2aghQeAtheQZTPUtY4jUjMszqAhaA/kXwRifyBWwBH9IPEFQOwIj3CoZgGoxg1A2oBA2kHRPAGouAGIQQag25oAFIuHGuYIpS/AbSaUQoEuAzk1HiV5EtKELA8yAKgZ5AowINpmbJYAALy7UvQ5VSNWAAAAAElFTkSuQmCC"},1977:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAUCAYAAABmvqYOAAAABHNCSVQICAgIfAhkiAAAAVhJREFUOE+tlYtRwkAQhu8q0A6kBKjAUIGhAqEDrEA6QCsQKhAqMCXQgdqBVhC/P7OXiTcil0tuZieTe3y7++89fF3XB+fcHTZGO3jvFwHkgdf8PGCngfQp67fAfQyfG/ye73WmkwnrltgG+8L2IXLB5VkDQzNQbA2rCy/oKMhK30ENpSsA1SA4EMmwNRkWBNZkPRZc2l5ZmkfgZW84kUxDVF296P/g/8b69sxRJumRA1ANXrF57EBOVTiTZc24MukFV3FuMUU5C4D/Kp6kuRXspQOqgGvb/tmYv5M0F+FM0GF6x+JD9QxgHWmvOQqi1AlNgUvLxzNBrmDsTF+B3zDp7y7C8TyxqM8poMItbVBO2uxS4BULVMTeLQWumzKrxXClGAr3qbvFruFR4AWUYCqI4CpmVmP9pt0tgWBAvUi/tlmWB+eeWHdsXw075nrywkWUyW2WfWPlD6vW/x+0qGIPAAAAAElFTkSuQmCC"},1978:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAPCAYAAADgbT9oAAAABHNCSVQICAgIfAhkiAAAALFJREFUOE9j/P///wcGBgZ+IKYmMGQEGvyfmiZCzXIEGexAA4MvgAw+ADSY2q4upGlQUNu1oJAFhzElBjeixU8BNIWhGLwQKPiAiIhUAKqJB6ljBAJk9dD4skd38QISDE6AGtiAxcUC1AgKXB5ECYqLQFWgXIgOQF6Xx2HCQTRxA2xhDAr4C1gMAHkb5nV0aQc0AVBwghxCcaogKihwKSJHHOziDUCd/uToxqHnIVDcAQAZqlEzN/1i9gAAAABJRU5ErkJggg=="},2029:function(e,t,a){"use strict";a.r(t);var n=a(149),c=a(3),r=a.n(c),i=a(5),o=a(38),s=a(1),A=a.n(s),u=a(2030),l=a(450),d=a(1911),m=a(192),g=a(153),_=a(74),p=a(23),f=a(245),b=a(20),E=a(102),O=a(1924),k=a(414),v=a(141),C=a.n(v),y=a(118),h=a(266),w=a(373),j=a.n(w),N=a(101),F=a.n(N),x=(a(1948),u.a.Step),I=[{id:1,title:"First",content:"Project Details",status:"wait"},{id:2,title:"Second",content:"Project Location",status:"wait"},{id:3,title:"Last",content:"Budget",status:"wait"},{id:4,title:"final",content:"Document",status:"wait"},{id:5,title:"preview",content:"Post Preview",status:"process"}],Q={offset:8,span:16},S=A.a.lazy(function(){return a.e(52).then(a.bind(null,1991))}),R=A.a.lazy(function(){return a.e(51).then(a.bind(null,1992))}),B=A.a.lazy(function(){return a.e(31).then(a.bind(null,1993))});A.a.lazy(function(){return a.e(30).then(a.bind(null,1994))});t.default=d.a.create()(function(e){var t,c,v,w,N,T,U=e.form,D=C()(),G=D.history,J=D.match,P=Object(s.useState)(!1),q=Object(o.a)(P,2),W=q[0],K=q[1],X=Object(s.useState)(!0),z=Object(o.a)(X,2),V=z[0],L=z[1],Y=Object(s.useState)(""),M=Object(o.a)(Y,2),H=M[0],$=M[1],Z=Object(s.useState)(0),ee=Object(o.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(s.useState)(""),ce=Object(o.a)(ne,2),re=(ce[0],ce[1],Object(s.useState)("")),ie=Object(o.a)(re,2),oe=ie[0],se=ie[1],Ae=Object(s.useState)({}),ue=Object(o.a)(Ae,2),le=ue[0],de=ue[1],me=Object(s.useState)([]),ge=Object(o.a)(me,2),_e=ge[0],pe=ge[1],fe=Object(s.useState)(I),be=Object(o.a)(fe,2),Ee=be[0],Oe=be[1],ke=Object(E.a)(O.d),ve=Object(o.a)(ke,2),Ce=ve[0],ye=(ve[1].loading,Object(E.b)(O.b)),he=Object(s.useState)({}),we=Object(o.a)(he,2),je=we[0],Ne=we[1];Object(s.useEffect)(Object(i.a)(r.a.mark(function e(){var t,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("user")&&se(JSON.parse(localStorage.getItem("user"))._id),!J.params.id){e.next=12;break}return e.next=4,ye.refetch({contract_id:J.params.id});case 4:(a=e.sent).data.get_contracts[0].current_page=a.data.get_contracts[0].current_page||-1,n=parseInt(a.data.get_contracts[0].current_page)+1,I.map(function(e){if(n>=e.id)return e.status="finish"}),de(a.data.get_contracts[0]),$(null===(t=a.data.get_contracts[0])||void 0===t?void 0:t.address_id),ae(Number(a.data.get_contracts[0].current_page)+1),L(!1);case 12:case"end":return e.stop()}},e)})),[J.params.id]);var Fe=function(e){return A.a.createElement("img",{src:a(1972)("./step"+e.id+".png")})};return A.a.createElement("div",null,!V&&A.a.createElement(A.a.Fragment,null,A.a.createElement("h4",{className:"text-center mb-5"},2==(null===le||void 0===le?void 0:null===(t=le.get_contract_category)||void 0===t?void 0:null===(c=t[0])||void 0===c?void 0:c.category_type)?null===le||void 0===le?void 0:null===(v=le.get_contract_category)||void 0===v?void 0:null===(w=v[0])||void 0===w?void 0:w.subCategory_name:null===le||void 0===le?void 0:null===(N=le.get_contract_category)||void 0===N?void 0:null===(T=N[0])||void 0===T?void 0:T.category_name),A.a.createElement(u.a,{size:"large",className:"contract_steper",labelPlacement:"vertical",current:te},Ee&&Ee.map(function(e){return A.a.createElement(x,{key:e.title,status:e.status,icon:Fe(e),title:e.content})})),A.a.createElement("div",{className:"d-flex justify-content-center my-5"},A.a.createElement(d.a,Object.assign({},Q,{name:"nest-messages",className:"w-100"}),A.a.createElement(s.Suspense,{fallback:A.a.createElement(m.a,{active:!0})},A.a.createElement("div",{className:4===te||5===te?"":"d-none"},A.a.createElement("h4",{className:"text-center"},"Review and publish your project"),A.a.createElement(S,{contract_detail_data:le,current:te,customform:U}),A.a.createElement(R,{contract_detail_data:le,current:te,customform:U}),A.a.createElement(B,{hide_common_upload:!0,contract_detail_data:le,current:te,customform:U})),A.a.createElement("div",{className:3===te?"contract_images_section":"d-none"},A.a.createElement(g.a,{md:{span:18,offset:3}},A.a.createElement(B,{contract_detail_data:le,current:te,customform:U}))),A.a.createElement("div",{className:2===te?"":"d-none"},A.a.createElement(g.a,{md:{span:18,offset:3}},A.a.createElement(R,{contract_detail_data:le,current:te,customform:U}))),A.a.createElement("div",{className:0===te?"":"d-none"},A.a.createElement(g.a,{md:{span:18,offset:3}},A.a.createElement(S,{contract_detail_data:le,current:te,customform:U}))),A.a.createElement("div",{className:1===te?"":"d-none"},A.a.createElement(y.c.Provider,{value:{location_change:function(e){$(e._id)},popup_closed:function(){K(!1)},popup_closed_option:!0}},A.a.createElement(_.a,{type:"primary",className:"mb-3 h-50x",onClick:function(){Ne({}),K(!0)}},A.a.createElement("div",{className:"normal_font_size d-flex justify-content-around align-items-center"},A.a.createElement("div",{className:"mr-3"},"Add New Address"),A.a.createElement(p.a,{type:"plus"}))),A.a.createElement("h4",{className:"text-center mb-5"},"My Saved Address"),A.a.createElement(g.a,{md:{span:18,offset:3},className:"extra_radius_input shadow-lg"},A.a.createElement(y.a.Provider,{value:{location_edit:function(e){Ne(e),K(!0)},no_data:function(e){pe(e)}}},A.a.createElement(k.a,{user_id:oe,address_id:H}))),A.a.createElement(h.default,{address_from:je,visible:W})))))),A.a.createElement("div",{className:"steps-action justify-content-between d-flex mb-5"},A.a.createElement(g.a,{md:{span:18,offset:3}},A.a.createElement(f.a,{gutter:[12,24]},A.a.createElement(g.a,{md:12},A.a.createElement(_.a,{type:"primary",ghost:!0,className:"contract_actions w-100",onClick:function(){0===te?G.push({pathname:"/bookings"}):ae(te-1)}},function(e){switch(e){case 0:return"Cancel";default:return"Back"}}(te))),A.a.createElement(g.a,{md:12},A.a.createElement(_.a,{type:"primary",className:"contract_actions w-100",onClick:function(){e.form.validateFields(function(){var e=Object(i.a)(r.a.mark(function e(t,a){var c,i,o,s,A;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=39;break}c={},J.params.id&&(c._id=J.params.id),a.current_page=te>=4?4:te,e.t0=te,e.next=2===e.t0?7:1===e.t0?15:5===e.t0?29:31;break;case 7:if(a.budget&&!(a.budget<=0)){e.next=10;break}return Object(b.a)({status:"failed",msg:"Please Enter the budget"}),e.abrupt("return",!1);case 10:if("2"!=a.timeline_type&&"3"!=a.timeline_type){e.next=14;break}if(!(a.timeline<=0)){e.next=14;break}return Object(b.a)({status:"failed",msg:"Enter Timeline more than 1"}),e.abrupt("return",!1);case 14:return e.abrupt("break",32);case 15:if(""!=H&&null!=H){e.next=20;break}return Object(b.a)({status:"failed",msg:"Select any one address"}),e.abrupt("return",!1);case 20:if(!H){e.next=28;break}if(-1!=j()(_e,["_id",H])){e.next=27;break}return Object(b.a)({status:"failed",msg:"Select any one address"}),e.abrupt("return",!1);case 27:a.address_id=H;case 28:return e.abrupt("break",32);case 29:return a.contract_status="12",e.abrupt("break",32);case 31:return e.abrupt("break",32);case 32:return a&&F()(a)&&(c.contract_data=[a]),e.next=35,Ce({variables:c});case 35:i=e.sent,Object(b.a)(i.data.update_contract),console.log(te),5===te||6===te?(o=I.map(function(e){return e.status="finish"}),Oe(o),ae(4),l.a.success("Processing complete!"),G.push({pathname:"/contract/view/".concat(J.params.id)})):(s=Object(n.a)(Ee),A=j()(s,["id",te+1]),s[A].status="finish",Oe(s),ae(te+1));case 39:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())}},function(e){switch(e){case 3:return"Save and Preview";case 4:case 5:return"Publish";default:return"Next"}}(te))))))))})}}]);
//# sourceMappingURL=18.f61964c8.chunk.js.map