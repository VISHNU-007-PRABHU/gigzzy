{"version":3,"sources":["component/Admin/Roles/AdminUsers.js"],"names":["AdminUsers","props","_this","Object","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","_super","call","handleTableChange","_ref","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","pagination","pager","wrap","_context","prev","next","_home_waioz_gigzzy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__","current","setState","loading","client","query","GET_ADMIN_USER","variables","limit","pageSize","page","fetchPolicy","then","result","state","total","data","get_admin_users","pageInfo","totalDocs","dataSource","stop","_x","apply","arguments","fetch_user","_ref2","_callee2","visible","_context2","role","_x2","handleDelete","_ref3","_callee3","_id","_context3","mutate","mutation","DELETE_ADMIN_USER","error","Alert_msg","delete_admin_user","status","_x3","onFilter","_ref4","_callee4","value","datas","_context4","console","log","target","$or","name","$regex","$options","email","SEARCH_ADMIN","_result$data","admin_search","_x4","search_user","simple","_this2","columns","title","width","render","text","record","react__WEBPACK_IMPORTED_MODULE_7___default","createElement","className","style","wordBreak","_record$admin_role_de","_record$admin_role_de2","antd_es_tag__WEBPACK_IMPORTED_MODULE_14__","color","admin_role_detail","msg","dataIndex","RoleViewFunction","length","_Comman_roles_permission_view__WEBPACK_IMPORTED_MODULE_17__","permission","onClick","history","push","concat","antd__WEBPACK_IMPORTED_MODULE_11__","type","theme","twoToneColor","antd__WEBPACK_IMPORTED_MODULE_12__","onConfirm","antd_es_input_Search__WEBPACK_IMPORTED_MODULE_15__","size","placeholder","onKeyUp","event","id","antd__WEBPACK_IMPORTED_MODULE_13__","rowClassName","onChange","React","Component","withRouter"],"mappings":"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","file":"static/js/23.2b350472.chunk.js","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { GET_ADMIN_USER, SEARCH_ADMIN, DELETE_ADMIN_USER } from '../../../graphql/Admin/roles';\nimport { client } from \"../../../apollo\";\nimport { Table, Icon, Popconfirm } from 'antd';\nimport Tag from 'antd/es/tag';\nimport Search from \"antd/es/input/Search\";\nimport { Alert_msg } from '../../Comman/alert_msg';\nimport RoleView, { RoleViewFunction } from '../../Comman/roles_permission_view'\nclass AdminUsers extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataSource: [],\n            search_user: [],\n            loading: false,\n            pagination: {\n                pageSize: 10,\n                current: 1,\n                total: 0,\n                simple: true,\n            }\n        };\n    }\n    componentDidMount() {\n        this.fetch_user();\n    }\n    handleTableChange = async pagination => {\n        const pager = { ...pagination };\n        pager.current = pagination.current;\n        this.setState({ loading: true });\n\n        await client.query({\n            query: GET_ADMIN_USER,\n            variables: { limit: pager.pageSize, page: pager.current },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            const pagination = { ...this.state.pagination };\n            pagination.total = result.data.get_admin_users.pageInfo.totalDocs;\n            pagination.current = result.data.get_admin_users.pageInfo.page;\n            this.setState({ pagination, loading: false, dataSource: result.data.get_admin_users.data });\n        });\n    };\n\n    fetch_user = async (visible) => {\n        this.setState({ loading: true });\n\n        await client.query({\n            query: GET_ADMIN_USER,\n            variables: { limit: this.state.pagination.pageSize, page: this.state.pagination.current, role: \"1\" },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            const pagination = { ...this.state.pagination };\n            pagination.total = result.data.get_admin_users.pageInfo.totalDocs;\n            this.setState({ loading: false, pagination, dataSource: result.data.get_admin_users.data });\n        });\n    }\n\n    handleDelete = async (_id) => {\n        await client.mutate({\n            mutation: DELETE_ADMIN_USER,\n            variables: { _id: _id },\n        }).then((result, loading, error) => {\n            Alert_msg(result.data.delete_admin_user);\n            if (result.data.delete_admin_user.status === 'success') {\n                this.fetch_user();\n            }\n        });\n    }\n\n    onFilter = async (value) => {\n        console.log(value.target.value);\n        var datas = {\n            $or: [{ 'name': { $regex: '.*' + value.target.value + '.*', $options: 'i' } },\n            { 'email': { $regex: '.*' + value.target.value + '.*', $options: 'i' } }]\n        }\n        await client.query({\n            query: SEARCH_ADMIN,\n            variables: { data: datas },\n            fetchPolicy: 'no-cache',\n        }).then(result => {\n            this.setState({ dataSource: result?.data?.admin_search });\n        });\n    }\n\n    render() {\n        const { dataSource } = this.state;\n\n        const columns = [\n            {\n                title: \"Name\",\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Name\">{record.name}</span>;\n                }\n\n            },\n            {\n                title: () => {\n                    return <div>\n                        <div className=\"d-block\">\n                            <div>\n                                Email\n                            </div>\n                        </div>\n                    </div>\n                },\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Email\" style={{ wordBreak: \"keep-all\" }}>{record.email}</span>;\n                }\n\n            },\n            {\n                title: () => {\n                    return <div>\n                        <div className=\"d-block\">\n                            <div>\n                                Roles\n                            </div>\n                        </div>\n                    </div>\n                },\n                width: '20%',\n                render: (text, record) => {\n                    return <span title=\"Email\" style={{ wordBreak: \"keep-all\" }}>\n                        {record['roles'] ?\n                            <Tag color=\"purple\">{record?.admin_role_detail?.name}</Tag> : record?.admin_role_detail?.msg}\n                    </span>;\n                }\n\n            },\n            {\n                title: \"Action\",\n                dataIndex: 'operation',\n                className: RoleViewFunction('edit_admin') || RoleViewFunction('delete_admin') ? '' : 'd-none',\n                render: (text, record) =>\n                    this.state.dataSource.length >= 1 ? (\n                        <span title=\"....\" className=\"d-flex d-sm-inline justify-content-around\">\n                            <RoleView permission=\"edit_admin\">\n                                <span className='cursor_point' onClick={() => { this.props.history.push(`/admin-admin/add/${record._id}`); }}><Icon type=\"edit\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='mx-3 f_25' /></span>\n                            </RoleView>\n                            <RoleView permission=\"delete_admin\">\n                                <Popconfirm title=\"Sure to delete the admin ?\" onConfirm={() => this.handleDelete(record._id)}>\n                                    <Icon type=\"delete\" theme=\"twoTone\" twoToneColor=\"#52c41a\" className='f_25' />\n                                </Popconfirm>\n                            </RoleView>\n                        </span>\n                    ) : null,\n            },\n        ];\n\n\n        return (\n            <div>\n                <div className='mx-2 mx-sm-0 mb-3'>\n                    <Search size=\"large\" placeholder=\"search\" onKeyUp={(event) => { this.onFilter(event) }} loading={false} />\n                </div>\n                <div id=\"no-more-tables\">\n                    <Table\n                        rowClassName={() => 'editable-row'}\n                        className='table_shadow'\n                        dataSource={dataSource}\n                        columns={columns}\n                        size=\"middle\"\n                        pagination={this.state.pagination}\n                        onChange={this.handleTableChange}\n                        loading={this.state.loading}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(AdminUsers);"],"sourceRoot":""}