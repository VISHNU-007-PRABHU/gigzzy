(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1967:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),o=a(11),i=a(5),c=a(12),l=a(13),s=a(15),u=a(14),d=a(1),p=a.n(d),m=a(67),h=a(191),f=a(6),g=a(23),v=a(605),b=a(960),_=a(20),w=a(604),y=a(25),E=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleTableChange=function(){var e=Object(i.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(o.a)({},t)).current=t.current,n.setState({loading:!0}),e.next=5,f.a.query({query:h.h,variables:{limit:a.pageSize,page:a.current,role:"1"},fetchPolicy:"no-cache"}).then(function(e){console.log(e.data);var t=Object(o.a)({},n.state.pagination);t.total=e.data.get_admin_roles.pageInfo.totalDocs,t.current=e.data.get_admin_roles.pageInfo.page,console.log(t),n.setState({pagination:t,loading:!1,dataSource:e.data.get_admin_roles.data})});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.fetch_user=function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.next=3,f.a.query({query:h.h,variables:{limit:n.state.pagination.pageSize,page:n.state.pagination.current,role:"1"},fetchPolicy:"no-cache"}).then(function(e){var t=Object(o.a)({},n.state.pagination);t.total=e.data.get_admin_roles.pageInfo.totalDocs,n.setState({loading:!1,pagination:t,dataSource:e.data.get_admin_roles.data})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.mutate({mutation:h.d,variables:{_id:t}}).then(function(e,t,a){Object(_.a)(e.data.delete_admin_roles),"success"===e.data.delete_admin_roles.status&&n.fetch_user()});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onFilter=function(){var e=Object(i.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.value),a={$or:[{name:{$regex:".*"+t.target.value+".*",$options:"i"}},{key:{$regex:".*"+t.target.value+".*",$options:"i"}}]},e.next=4,f.a.query({query:h.k,variables:{data:a},fetchPolicy:"no-cache"}).then(function(e){var t;n.setState({dataSource:null===e||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.roles_search})});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={dataSource:[],search_user:[],loading:!1,pagination:{pageSize:10,current:1,total:0,simple:!0}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetch_user()}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a=[{title:"Roles Name",width:"20%",render:function(e,t){return p.a.createElement("span",{title:"Roles Name"},null===t||void 0===t?void 0:t.name)}},{title:function(){return p.a.createElement("div",null,p.a.createElement("div",{className:"d-block"},p.a.createElement("div",null,"Key Roles")))},width:"20%",render:function(e,t){return p.a.createElement("span",{title:"Key Roles",style:{wordBreak:"keep-all"}},null===t||void 0===t?void 0:t.key)}},{title:"Action",dataIndex:"operation",className:Object(y.a)("edit_roles")||Object(y.a)("delete_roles")?"":"d-none",render:function(t,a){return e.state.dataSource.length>=1?p.a.createElement("span",{title:"....",className:"d-flex d-sm-inline justify-content-around"},p.a.createElement(y.b,{permission:"edit_roles"},p.a.createElement("span",{className:"cursor_point",onClick:function(){e.props.history.push("/admin-roles/add/".concat(a._id))}},p.a.createElement(g.a,{type:"edit",theme:"twoTone",twoToneColor:"#52c41a",className:"mx-3 f_25"}))),p.a.createElement(y.b,{permission:"delete_roles"},p.a.createElement(v.a,{title:"Sure to delete the user ?",onConfirm:function(){return e.handleDelete(a._id)}},p.a.createElement(g.a,{type:"delete",theme:"twoTone",twoToneColor:"#52c41a",className:"f_25"})))):null}}];return p.a.createElement("div",null,p.a.createElement("div",{className:"mx-2 mx-sm-0 mb-3"},p.a.createElement(w.a,{size:"large",placeholder:"search",onKeyUp:function(t){e.onFilter(t)},loading:!1})),p.a.createElement("div",{id:"no-more-tables"},p.a.createElement(b.a,{rowClassName:function(){return"editable-row"},className:"table_shadow",dataSource:t,columns:a,size:"middle",pagination:this.state.pagination,onChange:this.handleTableChange,loading:this.state.loading})))}}]),a}(p.a.Component);t.default=Object(m.withRouter)(E)}}]);
//# sourceMappingURL=27.d19285c7.chunk.js.map