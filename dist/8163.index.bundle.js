"use strict";(self.webpackChunkjiffy=self.webpackChunkjiffy||[]).push([[8163],{88163:function(e,t,n){n.r(t);var r=n(35466),a=n(15300),c=n(49624),o=n(40137),i=n(55702),u=n(41190),l=n(96990),s=n(1554),m=n(76970),f=n(14962),d=n(86387),p=n(59854),g=n(98057);function v(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){v(c,r,a,o,i,"next",e)}function i(e){v(c,r,a,o,i,"throw",e)}o(void 0)}))}}function h(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.Z.TextArea;var b=r.lazy((function(){return n.e(8955).then(n.bind(n,38955))})),w=r.lazy((function(){return n.e(4614).then(n.bind(n,84614))}));t.default=i.Z.create()((function(e){(0,d.useHistory)();var t=y((0,r.useState)(!1),2),n=t[0],a=t[1],v=y((0,r.useState)(""),2),E=(v[0],v[1],y((0,r.useState)(!1),2)),x=E[0],S=E[1],Z=y((0,r.useState)([]),2),N=Z[0],k=Z[1],R=y((0,r.useState)({}),2),F=R[0],j=R[1],C=y((0,r.useState)(!1),2),A=(C[0],C[1],y((0,p.Db)(g.xt),2)),I=A[0];h(A[1]);var P=y((0,p.Db)(g.ri),2),U=P[0];h(P[1]);var z=(0,p.aM)(g.Pj),D=e.customform;(0,r.useEffect)((function(){e.hide_common_upload&&a(e.hide_common_upload),T()}),[e]);var T=function(){var e=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.refetch({contract_id:localStorage.getItem("current_contract_id")});case 2:(t=e.sent)&&t.data&&t.data.get_contract_files&&t.data.get_contract_files.length&&k(t&&t.data.get_contract_files);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=_(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"others",r={contract_id:localStorage.getItem("current_contract_id"),file:[t]},n&&(r.category=n),e.next=5,I({variables:r});case 5:"success"===e.sent.data.ContractJobFileUpload.status&&T();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t),S(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(!1),T();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={_id:t},e.next=3,U({variables:n});case 3:e.sent,console.log("delete_contract_images -> input_data",n),T();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement(c.Z,{className:n?"d-none":""},r.createElement(o.Z,{span:24},r.createElement(i.Z.Item,{label:""},D.getFieldDecorator("file",{rules:[],valuePropName:"fileList"})(r.createElement(b,{custom_content:"Upload document",onFileUpload:G,custom_sub_content:"Upload your documents and site images etc..,",custom_class:"avatar-uploader d-flex justify-content-center px_view"}," "))),r.createElement("small",null,"Supported File Formats : JPG, PNG"))),r.createElement(c.Z,{gutter:[16,40]},r.createElement(o.Z,{span:24},N.length?N.map((function(e){return r.createElement(u.Z,{className:"mb-2 extra_radius_input document_section_contract",title:r.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.createElement("div",null,e._id),r.createElement("div",{className:"d-flex"},r.createElement(b,{onFileUpload:G,custom_category:e._id,custom_class:"contract_header_images"})))},r.createElement(c.Z,{gutter:8},e.images.map((function(e){return r.createElement(o.Z,{md:{span:8},className:"gutter-row imgHolder position-relative cursor_point"},r.createElement("div",{className:"h-100"},r.createElement("img",{loading:"lazy",className:"rounded w-100 img_cover img-fluid loading h-100",src:e.small_image}),r.createElement("span",{className:"tags bold"},e.image_tag),r.createElement("span",{className:"edit",onClick:function(){H(e)}},r.createElement(l.Z,{type:"edit",className:"f_25"})),r.createElement(s.Z,{title:"Sure to delete this image ?",onConfirm:function(){return M(e._id)}},r.createElement("span",{className:"delete"},r.createElement(l.Z,{type:"delete",className:"f_25"})))))}))))})):r.createElement(r.Fragment,null))),r.createElement(m.Z,{footer:null,centered:!0,visible:x,onCancel:function(){S(!1)}},r.createElement(r.Suspense,{fallback:r.createElement(f.Z,{active:!0})},r.createElement(w,{modelReturnFuncion:J,image_comman_data:F}))))}))}}]);