"use strict";(self.webpackChunkjiffy=self.webpackChunkjiffy||[]).push([[5121],{5121:function(e,n,t){t.r(n);var l=t(35466),a=t(28355),i=t(96990),r=t(41253),c=t(25904),o=t.n(c),d=t(61854),s=t(69753),m=t(59854),u=t(98057),_=t(86417),g=t(55128),p=t(13974),f=t.n(p);function E(e,n,t,l,a,i,r){try{var c=e[i](r),o=c.value}catch(e){return void t(e)}c.done?n(o):Promise.resolve(o).then(l,a)}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,a,i=[],r=!0,c=!1;try{for(t=t.call(e);!(r=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==t.return||t.return()}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}var y=l.lazy((function(){return t.e(2115).then(t.bind(t,12115))})),N={0:"welcome Gizzy",50:"waiting for payment confirmation",9:"Provider accept job",10:"Base price paid",11:"Booking canceled",4:"Job started",13:"Ongoing",14:"Completed"},$={0:"welcome Gizzy",50:"waiting for payment confirmation",9:"Pending",4:"Job started",13:"Ongoing",14:"Completed"};n.default=function(){var e,n,t,c,p,v,h,I,x,S,k=o()(),D=(0,s.Z)(),w=(D.history,D.match),O=b((0,l.useState)([]),2),T=O[0],P=O[1],j=b((0,l.useState)([]),2),z=j[0],A=j[1],B=b((0,l.useState)({}),2),Z=B[0],G=B[1],M=b((0,l.useState)([]),2),C=M[0],L=M[1],F=b((0,l.useState)([]),2),J=F[0],U=F[1],q=b((0,l.useState)([]),2),R=q[0],V=q[1],Y=b((0,l.useState)(!1),2),H=(Y[0],Y[1],b((0,l.useState)({}),2)),K=H[0],Q=H[1],W=(0,m.aM)(u.T8),X=(0,m.aM)(_.Nc),ee=(0,m.aM)(g.aY);(0,l.useEffect)((function(){ne()}),[]);var ne=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,t,l,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.refetch({contract_id:w.params.id});case 2:if(n=e.sent,U(n.data.get_contracts[0]),L(n.data.get_contracts[0].get_provider_user),A(n.data.get_contracts[0].get_user),P(n.data.get_contracts[0].get_contract_category),!n.data.get_contracts[0].biding_id){e.next=17;break}return e.next=10,X.refetch({_id:n.data.get_contracts[0].biding_id});case 10:return t=e.sent,G(t.data.get_biding_detail),e.next=14,ee.refetch({biding_id:n.data.get_contracts[0].biding_id});case 14:l=e.sent,V(l.data.get_biding_milestone),50===n.data.get_contracts[0].booking_status?Q(t.data.get_biding_detail):n.data.get_contracts[0].currenct_milestone_status&&(a=n.data.get_contracts[0].currenct_milestone_id,i=f().find(R,["_id",a]),f().size(i)&&Q(i));case 17:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(l,a){var i=e.apply(n,t);function r(e){E(i,l,a,r,c,"next",e)}function c(e){E(i,l,a,r,c,"throw",e)}r(void 0)}))});return function(){return n.apply(this,arguments)}}();return l.createElement(l.Fragment,null,l.createElement("div",{className:" col-xs-12 col-md-12 col-sm-12 invoice_body_color  "},l.createElement("div",{className:"col-xs-12 col-md-12 col-sm-12 col-lg-6 main_content mx-lg-auto"},l.createElement("div",{className:"invoice_header mt-1"},l.createElement("div",{className:k.isMobile()?"d-none":""},l.createElement("a",{href:"/bookings"},l.createElement(a.Z,{placement:"left",title:"Back to Booking"},l.createElement(i.Z,{className:"ml-2 cursor_point",type:"arrow-left",style:{fontSize:"26px"}})))),l.createElement("div",null,l.createElement("img",{src:d.Z,alt:"gigzzy",className:"w-50x object_fit cursor_point"})),l.createElement("div",{className:"invoice_info"},l.createElement("div",null,"INVOICE NO ",l.createElement("b",null,null==J?void 0:J.contract_ref)),l.createElement("div",null," ",l.createElement("small",null,null==J?void 0:J.booking_date)),l.createElement("div",{className:"py-2"},l.createElement(r.Z,{color:"green"},N[J.booking_status])))),l.createElement("div",{className:50===(null==K?void 0:K.booking_status)&&"c2b"==(null==K?void 0:K.payment_type)?"jumbotron p-1 mb-3 mx-3":"d-none"},l.createElement(l.Suspense,{fallback:l.createElement("div",{class:"spinner-border text-success",role:"status"},l.createElement("span",{class:"sr-only"},"Loading..."))},l.createElement(y,{BusinessNumber:null==K?void 0:K.ctob_shotcode,AmountNumber:null==K?void 0:K.ctob_billRef,Amount:null==K?void 0:K.budget}))),l.createElement("div",{className:"user_batch mx-3"},l.createElement("p",null,l.createElement("b",null,null==z||null===(e=z[0])||void 0===e?void 0:e.name)),l.createElement("p",null,"Thanks for using gigzzy.")),l.createElement("div",{className:"total_fare"},l.createElement("h5",null,"TOTAL COST"),l.createElement("h1",null,l.createElement("small",null),null==Z?void 0:Z.budget)),l.createElement("div",{className:"fare_estimation col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex"},l.createElement("div",{className:"fare_breakup mr-sm-3"},l.createElement("p",{className:"title"},"Fare Breakup"),l.createElement("ul",null,l.createElement("li",null,l.createElement("label",null,"Base Price"),l.createElement("span",null,null==Z?void 0:Z.admin_fee)))),l.createElement("div",{className:"tax_breakup "},l.createElement("p",{className:"title"},"Service Breakup"),l.createElement("ul",null,l.createElement("li",null,l.createElement("label",{className:"d-flex align-items-center"},"Service Fee",l.createElement("span",{className:"ml-auto"},null==Z?void 0:Z.service_fee,"%")))))),l.createElement("div",{className:"booking_details col-xs-12 col-md-12 col-sm-12"},l.createElement("p",{className:"title"},"Booking Details"),l.createElement("ul",null,l.createElement("li",null,l.createElement("label",null,"Service Type"),l.createElement("span",null,1===(null==T||null===(n=T[0])||void 0===n?void 0:n.category_type)?null==T||null===(t=T[0])||void 0===t?void 0:t.category_name:null==T||null===(c=T[0])||void 0===c?void 0:c.subCategory_name)),l.createElement("li",null,l.createElement("label",null,"Booking Date"),l.createElement("span",null,null==J?void 0:J.created_at)))),R.length>0&&l.createElement("div",{className:"booking_details col-xs-12 col-md-12 col-sm-12"},l.createElement("p",{className:"title"},"Milestone Details"),R.map((function(e,n){return l.createElement(l.Fragment,null,l.createElement("div",{className:"jumbotron p-3 "},l.createElement("div",null,"Milestone ",n),l.createElement("div",{className:"justify-content-between d-flex"},l.createElement("div",{className:"d-flex"},"Milestone Status"),l.createElement("div",{className:"d-flex flex-grow-0"},l.createElement(r.Z,{color:"green"},$[null==e?void 0:e.booking_status]))),l.createElement("div",{className:"justify-content-between d-flex"},l.createElement("div",{className:"d-flex"},"Budget"),l.createElement("div",{className:"d-flex flex-grow-0"},null==e?void 0:e.budget))))}))),l.createElement("div",{className:"member_section col-xs-12 col-md-12 col-sm-12 nopad d-print-block d-md-flex"},l.createElement("div",{className:"user_details mr-sm-3"},l.createElement("p",{className:"title"},"User Details"),l.createElement("ul",null,l.createElement("li",null,l.createElement("label",null,"Name"),l.createElement("span",null,null==z||null===(p=z[0])||void 0===p?void 0:p.name)),l.createElement("li",null,l.createElement("label",null,"Email"),l.createElement("span",null,null==z||null===(v=z[0])||void 0===v?void 0:v.email)),l.createElement("li",null,l.createElement("label",null,"Phone"),l.createElement("span",null,null==z||null===(h=z[0])||void 0===h?void 0:h.phone_number)))),l.createElement("div",{className:"provider_details"},l.createElement("p",{className:"title"},"Provider Details"),l.createElement("ul",null,l.createElement("li",null,l.createElement("label",null,"Name"),l.createElement("span",null,null==C||null===(I=C[0])||void 0===I?void 0:I.name)),l.createElement("li",null,l.createElement("label",null,"Email"),l.createElement("span",null,null==C||null===(x=C[0])||void 0===x?void 0:x.email)),l.createElement("li",null,l.createElement("label",null,"Phone"),l.createElement("span",null,null==C||null===(S=C[0])||void 0===S?void 0:S.phone_number))))),l.createElement("div",{className:"invoice_footer col-xs-12 m-3"},l.createElement("hr",null),l.createElement("p",null," Thanks,"),"gigzzy Team"))))}},86417:function(e,n,t){t.d(n,{Ne:function(){return o},Nc:function(){return d},FV:function(){return s}});var l,a,i,r=t(82992);function c(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var o=(0,r.ZP)(l||(l=c(["\n    query GETBIDINGPAGINATION($limit: Int,$page:Int,$data:JSON,$contract_id:ID,$location_code:String) {\n        get_biding_pagination(limit:$limit,page:$page,data:$data,contract_id:$contract_id,location_code:$location_code) {\n            pageInfo{\n                totalDocs\n                page\n            }\n            data{\n                _id\n                budget(code:$location_code)\n                service_fee\n                admin_fee(code:$location_code)\n                ref: biding_ref\n                created_at\n                user_id\n                contract_id\n                description\n                experience\n                timeline\n                timeline_type\n                payment_option(code:$location_code)\n                add_to_shortlist\n                provider_rating_by_category(root: true) {\n                    rating\n                }\n                get_biding_all_files {\n                    small_image\n                }\n                get_user(root_parent:true) {\n                    img_url\n                    first_name\n                    user_type\n                    last_name\n                    _id\n                    get_company_root_detail(root: true) {\n                        company_name\n                        company_website\n                        company_category\n                        get_company_images {\n                            small_image\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]))),d=(0,r.ZP)(a||(a=c(['\n    query GETBIDINGDETAIL($_id:ID){\n        get_biding_detail(_id:$_id){\n            _id\n                budget(code:"IN")\n                admin_fee(code:"IN")\n                service_fee\n                ref: biding_ref\n                created_at\n                user_id\n                contract_id\n                description\n                experience\n                timeline\n                timeline_type\n                add_to_shortlist\n                payment_type\n                ctob_shotcode\n                ctob_billRef\n                get_biding_all_files {\n                    small_image\n                }\n                get_user {\n                    img_url\n                    first_name\n                    user_type\n                    last_name\n                    _id\n                    get_company_root_detail(root: true) {\n                        company_name\n                        company_website\n                        company_category\n                        get_company_images {\n                            small_image\n                        }\n                    }\n                }\n        }\n    }\n']))),s=(0,r.ZP)(i||(i=c(["\nmutation UPDATEBIDING($_id:ID,$biding_data:[JSON]){ \n    update_biding(\n    _id: $_id\n    biding_data: $biding_data\n  ) {\n    msg\n    status\n  }\n}"])))},55128:function(e,n,t){t.d(n,{aY:function(){return o},y$:function(){return d}});var l,a,i,r=t(82992);function c(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var o=(0,r.ZP)(l||(l=c(["\n    query GETMILESTONEPAGINATION($_id:ID,$contract_id:ID,$biding_id:ID,$location_code:String){\n        get_biding_milestone(_id:$_id,contract_id:$contract_id,biding_id:$biding_id){\n                _id\n                budget(code:$location_code)\n                ref: milestone_ref\n                created_at\n                user_id\n                contract_id\n                timeline\n                timeline_type\n                payment_option(code:$location_code)\n                booking_status\n                description\n                title\n                pro_description\n                extra_fare\n                extra_fare_reason\n                total(code:$location_code)\n                get_milestone_all_images(root:true){\n                    small_image\n                }\n        }\n    }\n"]))),d=((0,r.ZP)(a||(a=c(["\n    query GETMILESTONEDETAIL($_id:ID,$contract_id:ID,$biding_id:ID){\n        get_biding_milestone_detail(_id:$_id,contract_id:$contract_id,biding_id:$biding_id){\n            _id\n            budget\n            ref: milestone_ref\n            created_at\n            user_id\n            contract_id\n            description\n            timeline\n            timeline_type\n        }\n    }\n"]))),(0,r.ZP)(i||(i=c(["\nmutation UPDATEMILESTONE($option:String  \n    $_id:ID\n    $user_id: String\n    $provider_id:ID\n    $biding_id:ID\n    $contract_id:ID\n    $file:[Upload]\n    $milestone_data:JSON){ \n    update_milestone(\n        option:$option  \n        _id:$_id\n        user_id: $user_id\n        provider_id:$provider_id\n        biding_id:$biding_id\n        contract_id:$contract_id\n        file:$file\n        milestone_data:$milestone_data\n  ) {\n    msg\n    status\n  }\n}"]))))}}]);