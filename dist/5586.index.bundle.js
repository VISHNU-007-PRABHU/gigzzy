(self.webpackChunkjiffy=self.webpackChunkjiffy||[]).push([[5586],{95586:function(e,t,n){"use strict";n.r(t);var a=n(35466),r=n(42563),c=n(66049),o=n(55702),i=n(14962),s=n(40137),A=n(2895),u=n(96990),l=n(49624),m=n(79520),d=n(59854),f=n(98057),p=n(90441),g=n(69753),v=n(64737),E=n(63202),b=n(59377),k=n.n(b),h=n(90214),y=n.n(h);function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},C.apply(this,arguments)}function w(e,t,n,a,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){w(c,a,r,o,i,"next",e)}function i(e){w(c,a,r,o,i,"throw",e)}o(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return c}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n(1046);var Q=r.Z.Step,S=[{id:1,title:"First",content:"Project Details",status:"wait"},{id:2,title:"Second",content:"Project Location",status:"wait"},{id:3,title:"Last",content:"Budget",status:"wait"},{id:4,title:"final",content:"Document",status:"wait"},{id:5,title:"preview",content:"Post Preview",status:"process"}],I={offset:8,span:16},O=a.lazy((function(){return n.e(555).then(n.bind(n,50555))})),B=a.lazy((function(){return n.e(2837).then(n.bind(n,82837))})),R=a.lazy((function(){return n.e(8163).then(n.bind(n,88163))}));t.default=o.Z.create()((function(e){var t,b,h,w,U,j,T=e.form,Z=(0,g.Z)(),P=Z.history,G=Z.match,W=N((0,a.useState)(!1),2),q=W[0],D=W[1],K=N((0,a.useState)(!0),2),J=K[0],X=K[1],z=N((0,a.useState)(""),2),V=z[0],M=z[1],Y=N((0,a.useState)(0),2),L=Y[0],H=Y[1],$=N((0,a.useState)(""),2),ee=($[0],$[1],N((0,a.useState)(""),2)),te=ee[0],ne=ee[1],ae=N((0,a.useState)({}),2),re=ae[0],ce=ae[1],oe=N((0,a.useState)([]),2),ie=oe[0],se=oe[1],Ae=N((0,a.useState)(S),2),ue=Ae[0],le=Ae[1],me=N((0,d.Db)(f.qt),2),de=me[0],fe=(me[1].loading,(0,d.aM)(f.T8)),pe=N((0,a.useState)({}),2),ge=pe[0],ve=pe[1];(0,a.useEffect)(x(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("user")&&ne(JSON.parse(localStorage.getItem("user"))._id),!G.params.id){e.next=12;break}return e.next=4,fe.refetch({contract_id:G.params.id});case 4:(n=e.sent).data.get_contracts[0].current_page=n.data.get_contracts[0].current_page||-1,a=parseInt(n.data.get_contracts[0].current_page)+1,S.map((function(e){if(a>=e.id)return e.status="finish"})),ce(n.data.get_contracts[0]),M(null===(t=n.data.get_contracts[0])||void 0===t?void 0:t.address_id),H(Number(n.data.get_contracts[0].current_page)+1),X(!1);case 12:case"end":return e.stop()}}),e)}))),[G.params.id]);var Ee=function(e){return a.createElement("img",{src:n(33889)("./step"+e.id+".png")})};return a.createElement("div",null,!J&&a.createElement(a.Fragment,null,a.createElement("h4",{className:"text-center mb-5"},2==(null==re||null===(t=re.get_contract_category)||void 0===t||null===(b=t[0])||void 0===b?void 0:b.category_type)?null==re||null===(h=re.get_contract_category)||void 0===h||null===(w=h[0])||void 0===w?void 0:w.subCategory_name:null==re||null===(U=re.get_contract_category)||void 0===U||null===(j=U[0])||void 0===j?void 0:j.category_name),a.createElement(r.Z,{size:"large",className:"contract_steper",labelPlacement:"vertical",current:L},ue&&ue.map((function(e){return a.createElement(Q,{key:e.title,status:e.status,icon:Ee(e),title:e.content})}))),a.createElement("div",{className:"d-flex justify-content-center my-5"},a.createElement(o.Z,C({},I,{name:"nest-messages",className:"w-100"}),a.createElement(a.Suspense,{fallback:a.createElement(i.Z,{active:!0})},a.createElement("div",{className:4===L||5===L?"":"d-none"},a.createElement("h4",{className:"text-center"},"Review and publish your project"),a.createElement(O,{contract_detail_data:re,current:L,customform:T}),a.createElement(B,{contract_detail_data:re,current:L,customform:T}),a.createElement(R,{hide_common_upload:!0,contract_detail_data:re,current:L,customform:T})),a.createElement("div",{className:3===L?"contract_images_section":"d-none"},a.createElement(s.Z,{md:{span:18,offset:3}},a.createElement(R,{contract_detail_data:re,current:L,customform:T}))),a.createElement("div",{className:2===L?"":"d-none"},a.createElement(s.Z,{md:{span:18,offset:3}},a.createElement(B,{contract_detail_data:re,current:L,customform:T}))),a.createElement("div",{className:0===L?"":"d-none"},a.createElement(s.Z,{md:{span:18,offset:3}},a.createElement(O,{contract_detail_data:re,current:L,customform:T}))),a.createElement("div",{className:1===L?"":"d-none"},a.createElement(v.LZ.Provider,{value:{location_change:function(e){M(e._id)},popup_closed:function(){D(!1)},popup_closed_option:!0}},a.createElement(A.Z,{type:"primary",className:"mb-3 h-50x",onClick:function(){ve({}),D(!0)}},a.createElement("div",{className:"normal_font_size d-flex justify-content-around align-items-center"},a.createElement("div",{className:"mr-3"},"Add New Address"),a.createElement(u.Z,{type:"plus"}))),a.createElement("h4",{className:"text-center mb-5"},"My Saved Address"),a.createElement(s.Z,{md:{span:18,offset:3},className:"extra_radius_input shadow-lg"},a.createElement(v.u3.Provider,{value:{location_edit:function(e){ve(e),D(!0)},no_data:function(e){se(e)}}},a.createElement(p.Z,{user_id:te,address_id:V}))),a.createElement(E.default,{address_from:ge,visible:q})))))),a.createElement("div",{className:"steps-action justify-content-between d-flex mb-5"},a.createElement(s.Z,{md:{span:18,offset:3}},a.createElement(l.Z,{gutter:[12,24]},a.createElement(s.Z,{md:12},a.createElement(A.Z,{type:"primary",ghost:!0,className:"contract_actions w-100",onClick:function(){0===L?P.push({pathname:"/bookings"}):H(L-1)}},0===L?"Cancel":"Back")),a.createElement(s.Z,{md:12},a.createElement(A.Z,{type:"primary",className:"contract_actions w-100",onClick:function(){e.form.validateFields(function(){var e=x(regeneratorRuntime.mark((function e(t,n){var a,r,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=39;break}a={},G.params.id&&(a._id=G.params.id),n.current_page=L>=4?4:L,e.t0=L,e.next=2===e.t0?7:1===e.t0?15:5===e.t0?29:31;break;case 7:if(n.budget&&!(n.budget<=0)){e.next=10;break}return(0,m.F)({status:"failed",msg:"Please Enter the budget"}),e.abrupt("return",!1);case 10:if("2"!=n.timeline_type&&"3"!=n.timeline_type){e.next=14;break}if(!(n.timeline<=0)){e.next=14;break}return(0,m.F)({status:"failed",msg:"Enter Timeline more than 1"}),e.abrupt("return",!1);case 14:return e.abrupt("break",32);case 15:if(""!=V&&null!=V){e.next=20;break}return(0,m.F)({status:"failed",msg:"Select any one address"}),e.abrupt("return",!1);case 20:if(!V){e.next=28;break}if(-1!=k()(ie,["_id",V])){e.next=27;break}return(0,m.F)({status:"failed",msg:"Select any one address"}),e.abrupt("return",!1);case 27:n.address_id=V;case 28:return e.abrupt("break",32);case 29:return n.contract_status="12",e.abrupt("break",32);case 31:return e.abrupt("break",32);case 32:return n&&y()(n)&&(a.contract_data=[n]),e.next=35,de({variables:a});case 35:r=e.sent,(0,m.F)(r.data.update_contract),console.log(L),5===L||6===L?(o=S.map((function(e){return e.status="finish"})),le(o),H(4),c.Z.success("Processing complete!"),P.push({pathname:"/contract/view/".concat(G.params.id)})):(i=function(e){if(Array.isArray(e))return _(e)}(A=ue)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(A)||F(A)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=k()(i,["id",L+1]),i[s].status="finish",le(i),H(L+1));case 39:case"end":return e.stop()}var A}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},function(e){switch(e){case 3:return"Save and Preview";case 4:case 5:return"Publish";default:return"Next"}}(L))))))))}))},52955:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},68114:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAAABHNCSVQICAgIfAhkiAAAANRJREFUOE/tkuENgjAQhXsT6Ag6gTiBjuAIOoFxAsomjqAbwATiBrqBG9T3kkKg3jX4nyYXQo/39fF6EkJonXMb1HCdROSa7PWvhqYSNIIiIkiF4ZDG0DQWzDLlALM0JuwN2ksjgrX/11kFkc9kpkVzp+UjRKsoXOJ5RrWAbTOwA3pF0r9JKgC8xt4Olb1RNQIFxhMfqA9qDYd8Tlo/zqiCO44Ff9kDxjmctCwYQcyxjNAOxiwvFlmFRXc+wkZaztkM0xPAjXIweauLwRdPRJYOa9/+AvtAZJ66X6pWAAAAAElFTkSuQmCC"},18490:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAATCAYAAACk9eypAAAABHNCSVQICAgIfAhkiAAAATdJREFUKFN9k41RAkEMhd0OtIOzArECtQKlAo8K5CoQKvCsQOgAKgAqkA6UCsQK1u/dJDdhhzMzmUvevpdkfy5dmOWcLwmf8RofGbzn26aUls5LCiCL8BGIvu7fLcEY4TFZ5U0gq5oI6niPP5pqhWAswRTgzUBVWYGJmIl3xfqDBJrzBl9CqEOuGguwyQmHJFv1Cd9vXONFuybRFC/4Th1c0ACoWym4AptFgTZ4h3ebQr8g1vHK5niLf+IVvlaHSJgiegfT4tFEOpDa4kYCJboDN42lrrInq+xrt34PP0EwFB7oXvlNx7GGBA2CNj4NbWzIfjVa9zScUWy+FM4hzwRGQUX+dabFAWyk6icCJXRRlddC1L0vx/oOYTR/W4LWkHW0vZ0T6N/QAfQb/Vdgo+mx7am+Lff0By1fi6/SK19OAAAAAElFTkSuQmCC"},26968:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOCAYAAADwikbvAAAABHNCSVQICAgIfAhkiAAAAH1JREFUKFNj/A8EDCQARiCAKWeku2aghQeAtheQZTPUtY4jUjMszqAhaA/kXwRifyBWwBH9IPEFQOwIj3CoZgGoxg1A2oBA2kHRPAGouAGIQQag25oAFIuHGuYIpS/AbSaUQoEuAzk1HiV5EtKELA8yAKgZ5AowINpmbJYAALy7UvQ5VSNWAAAAAElFTkSuQmCC"},98878:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAUCAYAAABmvqYOAAAABHNCSVQICAgIfAhkiAAAAVhJREFUOE+tlYtRwkAQhu8q0A6kBKjAUIGhAqEDrEA6QCsQKhAqMCXQgdqBVhC/P7OXiTcil0tuZieTe3y7++89fF3XB+fcHTZGO3jvFwHkgdf8PGCngfQp67fAfQyfG/ye73WmkwnrltgG+8L2IXLB5VkDQzNQbA2rCy/oKMhK30ENpSsA1SA4EMmwNRkWBNZkPRZc2l5ZmkfgZW84kUxDVF296P/g/8b69sxRJumRA1ANXrF57EBOVTiTZc24MukFV3FuMUU5C4D/Kp6kuRXspQOqgGvb/tmYv5M0F+FM0GF6x+JD9QxgHWmvOQqi1AlNgUvLxzNBrmDsTF+B3zDp7y7C8TyxqM8poMItbVBO2uxS4BULVMTeLQWumzKrxXClGAr3qbvFruFR4AWUYCqI4CpmVmP9pt0tgWBAvUi/tlmWB+eeWHdsXw075nrywkWUyW2WfWPlD6vW/x+0qGIPAAAAAElFTkSuQmCC"},31859:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAPCAYAAADgbT9oAAAABHNCSVQICAgIfAhkiAAAALFJREFUOE9j/P///wcGBgZ+IKYmMGQEGvyfmiZCzXIEGexAA4MvgAw+ADSY2q4upGlQUNu1oJAFhzElBjeixU8BNIWhGLwQKPiAiIhUAKqJB6ljBAJk9dD4skd38QISDE6AGtiAxcUC1AgKXB5ECYqLQFWgXIgOQF6Xx2HCQTRxA2xhDAr4C1gMAHkb5nV0aQc0AVBwghxCcaogKihwKSJHHOziDUCd/uToxqHnIVDcAQAZqlEzN/1i9gAAAABJRU5ErkJggg=="},33889:function(e,t,n){var a={"./step0.png":52955,"./step1.png":68114,"./step2.png":18490,"./step3.png":26968,"./step4.png":98878,"./step5.png":31859};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=33889}}]);